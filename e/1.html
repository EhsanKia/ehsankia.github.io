<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Elle #1</title>
	<link rel="stylesheet" href="style.css">
	<script src="utils.js"></script>
</head>
<body>
	<img id="elle">
	<canvas id="cvs"></canvas>
	<script type="text/javascript">
		let size = 300;
		function draw() {
			const angle = Math.random() * 2 * Math.PI;
			const dist = Math.random() * img.height / 2;
			const x = Math.round(dist * Math.cos(angle) + img.width / 2);
			const y = Math.round(dist * Math.sin(angle) + img.height / 2);

			const [r, g, b] = img.getColor(x, y);
			ctx.fillStyle = `rgba(${r}, ${g}, ${b}, 0.5)`;
			ctx.beginPath();
			ctx.arc(x, y, size, 0, 2 * Math.PI);
			ctx.fill();
			if (size > 10) size -= size * 0.002;
		}

		const img = document.getElementById('elle');
		const cvs = document.getElementById('cvs');
		const ctx = cvs.getContext('2d');
		img.load("https://i.imgur.com/9Qf5BCK.jpg", () => {
			cvs.setAttribute("width", img.width);
			cvs.setAttribute("height", img.height);
			start(draw);
		});
	</script>
</body>
</html>