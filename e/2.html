<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Elle #2</title>
	<link rel="stylesheet" href="style.css">
	<script src="utils.js"></script>
</head>
<body>
	<img id="elle">
	<canvas id="cvs"></canvas>
	<script type="text/javascript">
		const poly = new nanoq(null, (a, b) => {
			return a.error < b.error;
		});
		const img = document.getElementById('elle');
		const cvs = document.getElementById('cvs');
		const ctx = cvs.getContext('2d');
		img.load("https://i.imgur.com/vQ0QiS3.jpg", () => {
			cvs.setAttribute("width", img.width);
			cvs.setAttribute("height", img.height);
			const rect = new Rectangle(img.width, img.height);
			rect.draw(ctx, img);
			poly.push(rect);
			draw();
		});

		function draw() {
			const p = poly.pop()
			const [t1, t2] = p.split();
			t1.draw(ctx, img);
			t2.draw(ctx, img);
			poly.push(t1);
			poly.push(t2);

			requestAnimationFrame(draw);
		}
	</script>
</body>
</html>