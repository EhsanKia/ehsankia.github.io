(function(a,b,c,d){function i(b,c){if(b in a){return a[b]}if(typeof a[c]==="function"){return a[c]}return function(a){if(a instanceof Array){return a}if(typeof a==="number"){var b=[];b.length=a;return b}}}function o(a){if(typeof a==="string"){var b=0;for(var e=0;e<a.length;++e){b=b*31+a.charCodeAt(e)&4294967295}return b}if(typeof a!=="object"){return a&4294967295}if(a.hashCode instanceof Function){return a.hashCode()}if(a.$id===d){a.$id=c.floor(c.random()*65536)-32768<<16|c.floor(c.random()*65536)}return a.$id}function p(a,b){if(a===null||b===null){return a===null&&b===null}if(typeof a==="string"){return a===b}if(typeof a!=="object"){return a===b}if(a.equals instanceof Function){return a.equals(b)}return a===b}function u(){}function w(a,b){function c(c){v.defineProperty(a,c,{get:function(){return b[c]},set:function(a){b[c]=a},enumerable:true})}var d=[];for(var e in b){if(typeof b[e]==="function"){if(!a.hasOwnProperty(e)){a[e]=b[e]}}else if(e.charAt(0)!=="$"&&!(e in a)){d.push(e)}}while(d.length>0){c(d.shift())}}function x(a){if(typeof a!=="string"){return false}return["byte","int","char","color","float","long","double"].indexOf(a)!==-1}function D(a){var d=250,f=a.size/d,g=b.createElement("canvas");g.width=2*d;g.height=2*d;g.style.opacity=0;var h=a.getCSSDefinition(d+"px","normal"),i=g.getContext("2d");i.font=h;var j="dbflkhyjqpg";g.width=i.measureText(j).width;i.font=h;var k=b.createElement("div");k.style.position="absolute";k.style.opacity=0;k.style.fontFamily='"'+a.name+'"';k.style.fontSize=d+"px";k.innerHTML=j+"<br/>"+j;b.body.appendChild(k);var l=g.width,m=g.height,n=m/2;i.fillStyle="white";i.fillRect(0,0,l,m);i.fillStyle="black";i.fillText(j,0,n);var o=i.getImageData(0,0,l,m).data;var p=0,q=l*4,r=o.length;while(++p<r&&o[p]===255){e()}var s=c.round(p/q);p=r-1;while(--p>0&&o[p]===255){e()}var t=c.round(p/q);a.ascent=f*(n-s);a.descent=f*(t-n);if(b.defaultView.getComputedStyle){var u=b.defaultView.getComputedStyle(k,null).getPropertyValue("height");u=f*u.replace("px","");if(u>=a.size*2){a.leading=c.round(u/2)}}b.body.removeChild(k);if(a.caching){return i}}function E(a,b){if(a===d){a=""}this.name=a;if(b===d){b=0}this.size=b;this.glyph=false;this.ascent=0;this.descent=0;this.leading=1.2*b;var c=a.indexOf(" Italic Bold");if(c!==-1){a=a.substring(0,c)}this.style="normal";var e=a.indexOf(" Italic");if(e!==-1){a=a.substring(0,e);this.style="italic"}this.weight="normal";var f=a.indexOf(" Bold");if(f!==-1){a=a.substring(0,f);this.weight="bold"}this.family="sans-serif";if(a!==d){switch(a){case"sans-serif":case"serif":case"monospace":case"fantasy":case"cursive":this.family=a;break;default:this.family='"'+a+'", sans-serif';break}}this.context2d=D(this);this.css=this.getCSSDefinition();if(this.context2d){this.context2d.font=this.css}}function G(){var a=["abs","acos","alpha","ambient","ambientLight","append","applyMatrix","arc","arrayCopy","asin","atan","atan2","background","beginCamera","beginDraw","beginShape","bezier","bezierDetail","bezierPoint","bezierTangent","bezierVertex","binary","blend","blendColor","blit_resize","blue","box","breakShape","brightness","camera","ceil","Character","color","colorMode","concat","constrain","copy","cos","createFont","createGraphics","createImage","cursor","curve","curveDetail","curvePoint","curveTangent","curveTightness","curveVertex","day","degrees","directionalLight","disableContextMenu","dist","draw","ellipse","ellipseMode","emissive","enableContextMenu","endCamera","endDraw","endShape","exit","exp","expand","externals","fill","filter","floor","focused","frameCount","frameRate","frustum","get","glyphLook","glyphTable","green","height","hex","hint","hour","hue","image","imageMode","intersect","join","key","keyCode","keyPressed","keyReleased","keyTyped","lerp","lerpColor","lightFalloff","lights","lightSpecular","line","link","loadBytes","loadFont","loadGlyphs","loadImage","loadPixels","loadShape","loadStrings","log","loop","mag","map","match","matchAll","max","millis","min","minute","mix","modelX","modelY","modelZ","modes","month","mouseButton","mouseClicked","mouseDragged","mouseMoved","mouseOut","mouseOver","mousePressed","mouseReleased","mouseScroll","mouseScrolled","mouseX","mouseY","name","nf","nfc","nfp","nfs","noCursor","noFill","noise","noiseDetail","noiseSeed","noLights","noLoop","norm","normal","noSmooth","noStroke","noTint","ortho","param","parseBoolean","parseByte","parseChar","parseFloat","parseInt","peg","perspective","PImage","pixels","PMatrix2D","PMatrix3D","PMatrixStack","pmouseX","pmouseY","point","pointLight","popMatrix","popStyle","pow","print","printCamera","println","printMatrix","printProjection","PShape","PShapeSVG","pushMatrix","pushStyle","quad","radians","random","Random","randomSeed","rect","rectMode","red","redraw","requestImage","resetMatrix","reverse","rotate","rotateX","rotateY","rotateZ","round","saturation","save","saveFrame","saveStrings","scale","screenX","screenY","screenZ","second","set","setup","shape","shapeMode","shared","shininess","shorten","sin","size","smooth","sort","specular","sphere","sphereDetail","splice","split","splitTokens","spotLight","sq","sqrt","status","str","stroke","strokeCap","strokeJoin","strokeWeight","subset","tan","text","textAlign","textAscent","textDescent","textFont","textLeading","textMode","textSize","texture","textureMode","textWidth","tint","toImageData","touchCancel","touchEnd","touchMove","touchStart","translate","triangle","trim","unbinary","unhex","updatePixels","use3DContext","vertex","width","XMLElement","year","__contains","__equals","__equalsIgnoreCase","__frameRate","__hashCode","__int_cast","__instanceof","__keyPressed","__mousePressed","__printStackTrace","__replace","__replaceAll","__replaceFirst","__toCharArray","__split","__codePointAt","__startsWith","__endsWith"];var b={};var c,d;for(c=0,d=a.length;c<d;++c){b[a[c]]=null}for(var e in F.lib){if(F.lib.hasOwnProperty(e)){if(F.lib[e].exports){var f=F.lib[e].exports;for(c=0,d=f.length;c<d;++c){b[f[c]]=null}}}}return b}function H(a){function c(a){var b=[];var c=a.split(/([\{\[\(\)\]\}])/);var d=c[0];var e=[];for(var f=1;f<c.length;f+=2){var g=c[f];if(g==="["||g==="{"||g==="("){e.push(d);d=g}else if(g==="]"||g==="}"||g===")"){var h=g==="}"?"A":g===")"?"B":"C";var i=b.length;b.push(d+g);d=e.pop()+'"'+h+(i+1)+'"'}d+=c[f+1]}b.unshift(d);return b}function e(a,b){return a.replace(/'(\d+)'/g,function(a,c){var d=b[c];if(d.charAt(0)==="/"){return d}return/^'((?:[^'\\\n])|(?:\\.[0-9A-Fa-f]*))'$/.test(d)?"(new $p.Character("+d+"))":d})}function f(a){var b=/^\s*/.exec(a),c;if(b[0].length===a.length){c={left:b[0],middle:"",right:""}}else{var d=/\s*$/.exec(a);c={left:b[0],middle:a.substring(b[0].length,d.index),right:d[0]}}c.untrim=function(a){return this.left+a+this.right};return c}function g(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}function h(a,b){for(var c=0,d=b.length;c<d;++c){a[b[c]]=null}return a}function i(a){for(var b in a){if(a.hasOwnProperty(b)){return false}}return true}function j(a){return a.substring(2,a.length-1)}function x(a,b){var c=r.length;r.push(a);return'"'+b+c+'"'}function y(){return"class"+ ++w}function z(a,b,c){a.classId=b;a.scopeId=c;t[b]=a}function N(a){var b=a;b=b.replace(H,function(a){return x(a,"E")});b=b.replace(I,function(a){return x(a,"D")});b=b.replace(M,function(a){return x(a,"H")});return b}function O(a,b){var c=a.replace(K,function(a,c,d,e,f,g){if(d!==b){return a}return x(a,"G")});return c}function P(a){this.name=a}function Q(a){this.params=a}function R(a){var b=g(a.substring(1,a.length-1));var c=[];if(b!==""){var d=b.split(",");for(var e=0;e<d.length;++e){var f=/\b([A-Za-z_$][\w$]*\b)(\s*"[ABC][\d]*")*\s*$/.exec(d[e]);c.push(new P(f[1]))}}return new Q(c)}function S(a){function d(a,b,d,e){var g=r[e];c=true;var h=f(g.substring(1,g.length-1));return"__"+d+(h.middle===""?x("("+b.replace(/\.\s*$/,"")+")","B"):x("("+b.replace(/\.\s*$/,"")+","+h.middle+")","B"))}function e(a,b,d){c=true;return"__instanceof"+x("("+b+", "+d+")","B")}var b=a;b=b.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"C\d+")+\s*("A\d+")/g,function(a,b,c){return c});b=b.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"B\d+")\s*("A\d+")/g,function(a,b,c){return x(a,"F")});b=b.replace(M,function(a){return x(a,"H")});b=b.replace(/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*("C\d+"(?:\s*"C\d+")*)/g,function(a,b,c){var d=c.replace(/"C(\d+)"/g,function(a,b){return r[b]}).replace(/\[\s*\]/g,"[null]").replace(/\s*\]\s*\[\s*/g,", ");var e="{"+d.substring(1,d.length-1)+"}";var f="('"+b+"', "+x(e,"A")+")";return"$p.createJavaArray"+x(f,"B")});b=b.replace(/(\.\s*length)\s*"B\d+"/g,"$1");b=b.replace(/#([0-9A-Fa-f]{6})\b/g,function(a,b){return"0xFF"+b});b=b.replace(/"B(\d+)"(\s*(?:[\w$']|"B))/g,function(a,b,c){var d=r[b];if(!/^\(\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\s*(?:"C\d+"\s*)*\)$/.test(d)){return a}if(/^\(\s*int\s*\)$/.test(d)){return"(int)"+c}var e=d.split(/"C(\d+)"/g);if(e.length>1){if(!/^\[\s*\]$/.test(r[e[1]])){return a}}return""+c});b=b.replace(/\(int\)([^,\]\)\}\?\:\*\+\-\/\^\|\%\&\~<\>\=]+)/g,function(a,b){var c=f(b);return c.untrim("__int_cast("+c.middle+")")});b=b.replace(/\bsuper(\s*"B\d+")/g,"$$superCstr$1").replace(/\bsuper(\s*\.)/g,"$$super$1");b=b.replace(/\b0+((\d*)(?:\.[\d*])?(?:[eE][\-\+]?\d+)?[fF]?)\b/,function(a,b,c){if(b===c){return a}return c===""?"0"+b:b});b=b.replace(/\b(\.?\d+\.?)[fF]\b/g,"$1");b=b.replace(/([^\s])%([^=\s])/g,"$1 % $2");b=b.replace(/\b(frameRate|keyPressed|mousePressed)\b(?!\s*"B)/g,"__$1");b=b.replace(/\b(boolean|byte|char|float|int)\s*"B/g,function(a,b){return"parse"+b.substring(0,1).toUpperCase()+b.substring(1)+'"B'});b=b.replace(/\bpixels\b\s*(("C(\d+)")|\.length)?(\s*=(?!=)([^,\]\)\}]+))?/g,function(a,b,c,d,e,f){if(c){var g=r[d];if(e){return"pixels.setPixel"+x("("+g.substring(1,g.length-1)+","+f+")","B")}return"pixels.getPixel"+x("("+g.substring(1,g.length-1)+")","B")}if(b){return"pixels.getLength"+x("()","B")}if(e){return"pixels.set"+x("("+f+")","B")}return"pixels.toArray"+x("()","B")});var c;do{c=false;b=b.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*\.\s*(?:[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*\.\s*)*)(replace|replaceAll|replaceFirst|contains|equals|equalsIgnoreCase|hashCode|toCharArray|printStackTrace|split|startsWith|endsWith|codePointAt)\s*"B(\d+)"/g,d)}while(c);do{c=false;b=b.replace(/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*(?:\.\s*[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*)*)instanceof\s+([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)/g,e)}while(c);b=b.replace(/\bthis(\s*"B\d+")/g,"$$constr$1");return b}function T(a,b){this.baseInterfaceName=a;this.body=b;b.owner=this}function U(a){var b=(new RegExp(/\bnew\s*([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)\s*"B\d+"\s*"A(\d+)"/)).exec(a);var c=u,d=y();u=d;var e=b[1]+"$"+d;var f=new T(e,A(r[b[2]],e,"","implements "+b[1]));z(f,d,c);u=c;return f}function V(a,b,c){this.name=a;this.params=b;this.body=c}function W(a){var b=(new RegExp(/\b([A-Za-z_$][\w$]*)\s*"B(\d+)"\s*"A(\d+)"/)).exec(a);return new V(b[1]!=="function"?b[1]:null,R(r[b[2]]),C(r[b[3]]))}function X(a){this.members=a}function Y(a){var b=a.split(",");for(var c=0;c<b.length;++c){var d=b[c].indexOf(":");if(d<0){b[c]={value:F(b[c])}}else{b[c]={label:g(b[c].substring(0,d)),value:F(g(b[c].substring(d+1)))}}}return new X(b)}function Z(a){if(a.charAt(0)==="("||a.charAt(0)==="["){return a.charAt(0)+Z(a.substring(1,a.length-1))+a.charAt(a.length-1)}if(a.charAt(0)==="{"){if(/^\{\s*(?:[A-Za-z_$][\w$]*|'\d+')\s*:/.test(a)){return"{"+x(a.substring(1,a.length-1),"I")+"}"}return"["+Z(a.substring(1,a.length-1))+"]"}var b=f(a);var c=S(b.middle);c=c.replace(/"[ABC](\d+)"/g,function(a,b){return Z(r[b])});return b.untrim(c)}function $(a){return a.replace(/(\.\s*)?((?:\b[A-Za-z_]|\$)[\w$]*)(\s*\.\s*([A-Za-z_$][\w$]*)(\s*\()?)?/g,function(a,b,c,e,f,g){if(b){return a}var h={name:c,member:f,callSign:!!g};return s(h)+(e===d?"":e)})}function _(a,b){this.expr=a;this.transforms=b}function ab(a,b,c){this.name=a;this.value=b;this.isDefault=c}function bb(a,b){var c=a.indexOf("=");var d,e,f;if(c<0){d=a;e=b;f=true}else{d=a.substring(0,c);e=F(a.substring(c+1));f=false}return new ab(g(d.replace(/(\s*"C\d+")+/g,"")),e,f)}function cb(a){if(a==="int"||a==="float"){return"0"}if(a==="boolean"){return"false"}if(a==="color"){return"0x00000000"}return"null"}function db(a,b){this.definitions=a;this.varType=b}function eb(a){this.expression=a}function fb(a){if(J.test(a)){var b=L.exec(a);var c=a.substring(b[0].length).split(",");var d=cb(b[2]);for(var e=0;e<c.length;++e){c[e]=bb(c[e],d)}return new db(c,b[2])}return new eb(F(a))}function gb(a,b,c){this.initStatement=a;this.condition=b;this.step=c}function hb(a,b){this.initStatement=a;this.container=b}function ib(a,b){this.initStatement=a;this.container=b}function jb(a){var b;if(/\bin\b/.test(a)){b=a.substring(1,a.length-1).split(/\bin\b/g);return new hb(fb(g(b[0])),F(b[1]))}if(a.indexOf(":")>=0&&a.indexOf(";")<0){b=a.substring(1,a.length-1).split(":");return new ib(fb(g(b[0])),F(b[1]))}b=a.substring(1,a.length-1).split(";");return new gb(fb(g(b[0])),F(b[1]),F(b[2]))}function kb(a){a.sort(function(a,b){return b.weight-a.weight})}function lb(a,b,c){this.name=a;this.body=b;this.isStatic=c;b.owner=this}function mb(a,b,c){this.name=a;this.body=b;this.isStatic=c;b.owner=this}function nb(a){var b=H.exec(a);H.lastIndex=0;var c=b[1].indexOf("static")>=0;var d=r[j(b[6])],e;var f=u,g=y();u=g;if(b[2]==="interface"){e=new lb(b[3],B(d,b[3],b[4]),c)}else{e=new mb(b[3],A(d,b[3],b[4],b[5]),c)}z(e,g,f);u=f;return e}function ob(a,b,c,d){this.name=a;this.params=b;this.body=c;this.isStatic=d}function pb(a){var b=I.exec(a);I.lastIndex=0;var c=b[1].indexOf("static")>=0;var d=b[6]!==";"?r[j(b[6])]:"{}";return new ob(b[3],R(r[j(b[4])]),C(d),c)}function qb(a,b,c){this.definitions=a;this.fieldType=b;this.isStatic=c}function rb(a){var b=L.exec(a);var c=b[1].indexOf("static")>=0;var d=a.substring(b[0].length).split(/,\s*/g);var e=cb(b[2]);for(var f=0;f<d.length;++f){d[f]=bb(d[f],e)}return new qb(d,b[2],c)}function sb(a,b){this.params=a;this.body=b}function tb(a){var b=(new RegExp(/"B(\d+)"\s*"A(\d+)"/)).exec(a);var c=R(r[b[1]]);return new sb(c,C(r[b[2]]))}function ub(a,b,c,d,e,f){var g,h;this.name=a;this.interfacesNames=b;this.methodsNames=c;this.fields=d;this.innerClasses=e;this.misc=f;for(g=0,h=d.length;g<h;++g){d[g].owner=this}}function vb(a,b,c,d,e,f,g,h,i){var j,k;this.name=a;this.baseClassName=b;this.interfacesNames=c;this.functions=d;this.methods=e;this.fields=f;this.cstrs=g;this.innerClasses=h;this.misc=i;for(j=0,k=f.length;j<k;++j){f[j].owner=this}}function wb(a,b){this.name=a;this.body=b;b.owner=this}function xb(a,b){this.name=a;this.body=b;b.owner=this}function yb(a){var b=H.exec(a);H.lastIndex=0;var c=r[j(b[6])];var d=u,e=y();u=e;var f;if(b[2]==="interface"){f=new wb(b[3],B(c,b[3],b[4]))}else{f=new xb(b[3],A(c,b[3],b[4],b[5]))}z(f,e,d);u=d;return f}function zb(a,b,c){this.name=a;this.params=b;this.body=c}function Ab(a){var b=I.exec(a);var c=I.lastIndex=0;return new zb(b[3],R(r[j(b[4])]),C(r[j(b[6])]))}function Bb(a){var b=a;b=b.replace(/\b(catch\s*"B\d+"\s*"A\d+")(\s*catch\s*"B\d+"\s*"A\d+")+/g,"$1");return b}function Cb(a,b){this.argument=a;this.misc=b}function Db(a,b){this.argument=a;this.misc=b}function Eb(a,b,c){this.name=a;this.argument=b;this.misc=c}function Fb(a){this.expr=a}function Gb(a){this.label=a}function Hb(a){var b=[];for(var c=0,d=a.length;c<d;++c){var e=a[c];if(e instanceof db){b=b.concat(e.getNames())}else if(e instanceof Cb&&e.argument.initStatement instanceof db){b=b.concat(e.argument.initStatement.getNames())}else if(e instanceof lb||e instanceof mb||e instanceof wb||e instanceof xb||e instanceof zb||e instanceof V){b.push(e.name)}}return h({},b)}function Ib(a){this.statements=a}function Jb(a){this.statements=a}function Kb(a){function i(a,c){var e=c.split(".");var f=a.scope,g;while(f){if(f.hasOwnProperty(e[0])){g=f[e[0]];break}f=f.scope}if(g===d){g=b[e[0]]}for(var h=1,i=e.length;h<i&&g;++h){g=g.inScope[e[h]]}return g}var b={};var c,e;for(c in t){if(t.hasOwnProperty(c)){e=t[c];var f=e.scopeId,g=e.name;if(f){var h=t[f];e.scope=h;if(h.inScope===d){h.inScope={}}h.inScope[g]=e}else{b[g]=e}}}for(c in t){if(t.hasOwnProperty(c)){e=t[c];var j=e.body.baseClassName;if(j){var k=i(e,j);if(k){e.base=k;if(!k.derived){k.derived=[]}k.derived.push(e)}}var l=e.body.interfacesNames,m=[],n,o;if(l&&l.length>0){for(n=0,o=l.length;n<o;++n){var p=i(e,l[n]);m.push(p);if(!p){continue}if(!p.derived){p.derived=[]}p.derived.push(e)}if(m.length>0){e.interfaces=m}}}}}function Lb(a){function h(a,b){var d=c[a];if(!d){return false}var e=d.indexOf(b);if(e<0){return false}d.splice(e,1);if(d.length>0){return false}delete c[a];return true}var b=[],c={};var d,e,f;for(d in t){if(t.hasOwnProperty(d)){f=t[d];if(!f.inScope&&!f.derived){b.push(d);f.weight=0}else{var g=[];if(f.inScope){for(e in f.inScope){if(f.inScope.hasOwnProperty(e)){g.push(f.inScope[e])}}}if(f.derived){g=g.concat(f.derived)}c[d]=g}}}while(b.length>0){d=b.shift();f=t[d];if(f.scopeId&&h(f.scopeId,f)){b.push(f.scopeId);t[f.scopeId].weight=f.weight+1}if(f.base&&h(f.base.classId,f)){b.push(f.base.classId);f.base.weight=f.weight+1}if(f.interfaces){var i,j;for(i=0,j=f.interfaces.length;i<j;++i){if(!f.interfaces[i]||!h(f.interfaces[i].classId,f)){continue}b.push(f.interfaces[i].classId);f.interfaces[i].weight=f.weight+1}}}}var b=G();var k=a.replace(/\r\n?|\n\r/g,"\n");var l=[];var m=k.replace(/("(?:[^"\\\n]|\\.)*")|('(?:[^'\\\n]|\\.)*')|(([\[\(=|&!\^:?]\s*)(\/(?![*\/])(?:[^\/\\\n]|\\.)*\/[gim]*)\b)|(\/\/[^\n]*\n)|(\/\*(?:(?!\*\/)(?:.|\n))*\*\/)/g,function(a,b,c,d,e,f,g,h){var i;if(b||c){i=l.length;l.push(a);return"'"+i+"'"}if(d){i=l.length;l.push(f);return e+"'"+i+"'"}return h!==""?" ":"\n"});m=m.replace(/__x([0-9A-F]{4})/g,function(a,b){return"__x005F_x"+b});m=m.replace(/\$/g,"__x0024");var o;var p=m;var q=function(a,b,c,d){if(!!b||!!d){return a}o=true;return""};do{o=false;p=p.replace(/([<]?)<\s*((?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?(?:\s*,\s*(?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?)*)\s*>([=]?)/g,q)}while(o);var r=c(p);var s;var t={},u,w=0;var A,B,C,D,E,F;var H=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)(class|interface)\s+([A-Za-z_$][\w$]*\b)(\s+extends\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?(\s+implements\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?\s*("A\d+")/g;var I=/\b((?:(?:public|private|final|protected|static|abstract|synchronized)\s+)*)((?!(?:else|new|return|throw|function|public|private|protected)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+"|;)/g;var J=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:else|new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*(?:"C\d+"\s*)*([=,]|$)/;var K=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+")/g;var L=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*/;var M=/\bfunction(?:\s+([A-Za-z_$][\w$]*))?\s*("B\d+")\s*("A\d+")/g;P.prototype.toString=function(){return this.name};Q.prototype.getNames=function(){var a=[];for(var b=0,c=this.params.length;b<c;++b){a.push(this.params[b].name)}return a};Q.prototype.toString=function(){if(this.params.length===0){return"()"}var a="(";for(var b=0,c=this.params.length;b<c;++b){a+=this.params[b]+", "}return a.substring(0,a.length-2)+")"};T.prototype.toString=function(){return"new ("+this.body+")"};V.prototype.toString=function(){var a=s;var b=h({"this":null},this.params.getNames());s=function(c){return b.hasOwnProperty(c.name)?c.name:a(c)};var c="function";if(this.name){c+=" "+this.name}c+=this.params+" "+this.body;s=a;return c};X.prototype.toString=function(){var a=s;s=function(b){return b.name==="this"?"this":a(b)};var b="";for(var c=0,d=this.members.length;c<d;++c){if(this.members[c].label){b+=this.members[c].label+": "}b+=this.members[c].value.toString()+", "}s=a;return b.substring(0,b.length-2)};_.prototype.toString=function(){var a=this.transforms;var b=$(this.expr);return b.replace(/"!(\d+)"/g,function(b,c){return a[c].toString()})};F=function(a){var b=[];var c=Z(a);c=c.replace(/"H(\d+)"/g,function(a,c){b.push(W(r[c]));return'"!'+(b.length-1)+'"'});c=c.replace(/"F(\d+)"/g,function(a,c){b.push(U(r[c]));return'"!'+(b.length-1)+'"'});c=c.replace(/"I(\d+)"/g,function(a,c){b.push(Y(r[c]));return'"!'+(b.length-1)+'"'});return new _(c,b)};ab.prototype.toString=function(){return this.name+" = "+this.value};db.prototype.getNames=function(){var a=[];for(var b=0,c=this.definitions.length;b<c;++b){a.push(this.definitions[b].name)}return a};db.prototype.toString=function(){return"var "+this.definitions.join(",")};eb.prototype.toString=function(){return this.expression.toString()};gb.prototype.toString=function(){return"("+this.initStatement+"; "+this.condition+"; "+this.step+")"};hb.prototype.toString=function(){var a=this.initStatement.toString();if(a.indexOf("=")>=0){a=a.substring(0,a.indexOf("="))}return"("+a+" in "+this.container+")"};ib.iteratorId=0;ib.prototype.toString=function(){var a=this.initStatement.toString();var b="$it"+ib.iteratorId++;var c=a.replace(/^\s*var\s*/,"").split("=")[0];var d="var "+b+" = new $p.ObjectIterator("+this.container+"), "+c+" = void(0)";var e=b+".hasNext() && (("+c+" = "+b+".next()) || true)";return"("+d+"; "+e+";)"};lb.prototype.toString=function(){return""+this.body};mb.prototype.toString=function(){return""+this.body};ob.prototype.toString=function(){var a=h({},this.params.getNames());var b=s;s=function(c){return a.hasOwnProperty(c.name)?c.name:b(c)};var c="function "+this.methodId+this.params+" "+this.body+"\n";s=b;return c};qb.prototype.getNames=function(){var a=[];for(var b=0,c=this.definitions.length;b<c;++b){a.push(this.definitions[b].name)}return a};qb.prototype.toString=function(){var a=s({name:"[this]"});if(this.isStatic){var b=this.owner.name;var c=[];for(var d=0,e=this.definitions.length;d<e;++d){var f=this.definitions[d];var g=f.name,h=b+"."+g;var i="if("+h+" === void(0)) {\n"+" "+h+" = "+f.value+"; }\n"+"$p.defineProperty("+a+", "+"'"+g+"', { get: function(){return "+h+";}, "+"set: function(val){"+h+" = val;} });\n";c.push(i)}return c.join("")}return a+"."+this.definitions.join("; "+a+".")};sb.prototype.toString=function(){var a=h({},this.params.getNames());var b=s;s=function(c){return a.hasOwnProperty(c.name)?c.name:b(c)};var c="function $constr_"+this.params.params.length+this.params.toString();var d=this.body.toString();if(!/\$(superCstr|constr)\b/.test(d)){d="{\n$superCstr();\n"+d.substring(1)}s=b;return c+d+"\n"};ub.prototype.getMembers=function(a,b,c){if(this.owner.base){this.owner.base.body.getMembers(a,b,c)}var d,e,f,g;for(d=0,f=this.fields.length;d<f;++d){var h=this.fields[d].getNames();for(e=0,g=h.length;e<g;++e){a[h[e]]=this.fields[d]}}for(d=0,f=this.methodsNames.length;d<f;++d){var i=this.methodsNames[d];b[i]=true}for(d=0,f=this.innerClasses.length;d<f;++d){var j=this.innerClasses[d];c[j.name]=j}};ub.prototype.toString=function(){function a(a){var b=0;while(a){++b;a=a.scope}return b}var b=a(this.owner);var c=this.name;var d="";var e="";var f={},g={},h={};this.getMembers(f,g,h);var i,j,k,l;if(this.owner.interfaces){var m=[],n;for(i=0,j=this.interfacesNames.length;i<j;++i){if(!this.owner.interfaces[i]){continue}n=s({name:this.interfacesNames[i]});m.push(n);d+="$p.extendInterfaceMembers("+c+", "+n+");\n"}e+=c+".$interfaces = ["+m.join(", ")+"];\n"}e+=c+".$isInterface = true;\n";e+=c+".$methods = ['"+this.methodsNames.join("', '")+"'];\n";kb(this.innerClasses);for(i=0,j=this.innerClasses.length;i<j;++i){var o=this.innerClasses[i];if(o.isStatic){d+=c+"."+o.name+" = "+o+";\n"}}for(i=0,j=this.fields.length;i<j;++i){var p=this.fields[i];if(p.isStatic){d+=c+"."+p.definitions.join(";\n"+c+".")+";\n"}}return"(function() {\n"+"function "+c+"() { throw 'Unable to create the interface'; }\n"+d+e+"return "+c+";\n"+"})()"};B=function(a,b,c){var e=a.substring(1,a.length-1);e=N(e);e=O(e,b);var g=[],h=[];e=e.replace(/"([DE])(\d+)"/g,function(a,b,c){if(b==="D"){g.push(c)}else if(b==="E"){h.push(c)}return""});var i=e.split(/;(?:\s*;)*/g);var j;var k,l;if(c!==d){j=c.replace(/^\s*extends\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)}for(k=0,l=g.length;k<l;++k){var m=pb(r[g[k]]);g[k]=m.name}for(k=0,l=i.length-1;k<l;++k){var n=f(i[k]);i[k]=rb(n.middle)}var o=i.pop();for(k=0,l=h.length;k<l;++k){h[k]=nb(r[h[k]])}return new ub(b,j,g,i,h,{tail:o})};vb.prototype.getMembers=function(a,b,c){if(this.owner.base){this.owner.base.body.getMembers(a,b,c)}var d,e,f,g;for(d=0,f=this.fields.length;d<f;++d){var h=this.fields[d].getNames();for(e=0,g=h.length;e<g;++e){a[h[e]]=this.fields[d]}}for(d=0,f=this.methods.length;d<f;++d){var i=this.methods[d];b[i.name]=i}for(d=0,f=this.innerClasses.length;d<f;++d){var j=this.innerClasses[d];c[j.name]=j}};vb.prototype.toString=function(){function a(a){var b=0;while(a){++b;a=a.scope}return b}var b=a(this.owner);var c="$this_"+b;var d=this.name;var e="var "+c+" = this;\n";var f="";var h="";var i={},j={},k={};this.getMembers(i,j,k);var l=s;s=function(a){var b=a.name;if(b==="this"){return a.callSign||!a.member?c+".$self":c}if(i.hasOwnProperty(b)){return i[b].isStatic?d+"."+b:c+"."+b}if(k.hasOwnProperty(b)){return c+"."+b}if(j.hasOwnProperty(b)){return j[b].isStatic?d+"."+b:c+".$self."+b}return l(a)};var m;if(this.baseClassName){m=l({name:this.baseClassName});e+="var $super = { $upcast: "+c+" };\n";e+="function $superCstr(){"+m+".apply($super,arguments);if(!('$self' in $super)) $p.extendClassChain($super)}\n";h+=d+".$base = "+m+";\n"}else{e+="function $superCstr(){$p.extendClassChain("+c+")}\n"}if(this.owner.base){f+="$p.extendStaticMembers("+d+", "+m+");\n"}var n,o,p,q;if(this.owner.interfaces){var r=[],t;for(n=0,o=this.interfacesNames.length;n<o;++n){if(!this.owner.interfaces[n]){continue}t=l({name:this.interfacesNames[n]});r.push(t);f+="$p.extendInterfaceMembers("+d+", "+t+");\n"}h+=d+".$interfaces = ["+r.join(", ")+"];\n"}if(this.functions.length>0){e+=this.functions.join("\n")+"\n"}kb(this.innerClasses);for(n=0,o=this.innerClasses.length;n<o;++n){var u=this.innerClasses[n];if(u.isStatic){f+=d+"."+u.name+" = "+u+";\n";e+=c+"."+u.name+" = "+d+"."+u.name+";\n"}else{e+=c+"."+u.name+" = "+u+";\n"}}for(n=0,o=this.fields.length;n<o;++n){var v=this.fields[n];if(v.isStatic){f+=d+"."+v.definitions.join(";\n"+d+".")+";\n";for(p=0,q=v.definitions.length;p<q;++p){var w=v.definitions[p].name,x=d+"."+w;e+="$p.defineProperty("+c+", '"+w+"', {"+"get: function(){return "+x+"}, "+"set: function(val){"+x+" = val}});\n"}}else{e+=c+"."+v.definitions.join(";\n"+c+".")+";\n"}}var y={};for(n=0,o=this.methods.length;n<o;++n){var z=this.methods[n];var A=y[z.name];var B=z.name+"$"+z.params.params.length;if(A){++A;B+="_"+A}else{A=1}z.methodId=B;y[z.name]=A;if(z.isStatic){f+=z;f+="$p.addMethod("+d+", '"+z.name+"', "+B+");\n";e+="$p.addMethod("+c+", '"+z.name+"', "+B+");\n"}else{e+=z;e+="$p.addMethod("+c+", '"+z.name+"', "+B+");\n"}}e+=g(this.misc.tail);if(this.cstrs.length>0){e+=this.cstrs.join("\n")+"\n"}e+="function $constr() {\n";var C=[];for(n=0,o=this.cstrs.length;n<o;++n){var D=this.cstrs[n].params.params.length;C.push("if(arguments.length === "+D+") { "+"$constr_"+D+".apply("+c+", arguments); }")}if(C.length>0){e+=C.join(" else ")+" else "}e+="$superCstr();\n}\n";e+="$constr.apply(null, arguments);\n";s=l;return"(function() {\n"+"function "+d+"() {\n"+e+"}\n"+f+h+"return "+d+";\n"+"})()"};A=function(a,b,c,e){var g=a.substring(1,a.length-1);g=N(g);g=O(g,b);var h=[],i=[],j=[],k=[];g=g.replace(/"([DEGH])(\d+)"/g,function(a,b,c){if(b==="D"){h.push(c)}else if(b==="E"){i.push(c)}else if(b==="H"){k.push(c)}else{j.push(c)}return""});var l=g.replace(/^(?:\s*;)+/,"").split(/;(?:\s*;)*/g);var m,n;var o;if(c!==d){m=c.replace(/^\s*extends\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*$/g,"$1")}if(e!==d){n=e.replace(/^\s*implements\s+(.+?)\s*$/g,"$1").split(/\s*,\s*/g)}for(o=0;o<k.length;++o){k[o]=W(r[k[o]])}for(o=0;o<h.length;++o){h[o]=pb(r[h[o]])}for(o=0;o<l.length-1;++o){var p=f(l[o]);l[o]=rb(p.middle)}var q=l.pop();for(o=0;o<j.length;++o){j[o]=tb(r[j[o]])}for(o=0;o<i.length;++o){i[o]=nb(r[i[o]])}return new vb(b,m,n,k,h,l,j,i,{tail:q})};wb.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n"+"$p."+this.name+" = "+this.name+";\n"};xb.prototype.toString=function(){return"var "+this.name+" = "+this.body+";\n"+"$p."+this.name+" = "+this.name+";\n"};zb.prototype.toString=function(){var a=h({},this.params.getNames());var b=s;s=function(c){return a.hasOwnProperty(c.name)?c.name:b(c)};var c="function "+this.name+this.params+" "+this.body+"\n"+"$p."+this.name+" = "+this.name+";";s=b;return c};Cb.prototype.toString=function(){return this.misc.prefix+this.argument.toString()};Db.prototype.toString=function(){return this.misc.prefix+this.argument.toString()};Eb.prototype.toString=function(){var a=this.misc.prefix;if(this.argument!==d){a+=this.argument.toString()}return a};Fb.prototype.toString=function(){return"case "+this.expr+":"};Gb.prototype.toString=function(){return this.label};D=function(a,b,c){var e=new RegExp(/\b(catch|for|if|switch|while|with)\s*"B(\d+)"|\b(do|else|finally|return|throw|try|break|continue)\b|("[ADEH](\d+)")|\b(case)\s+([^:]+):|\b([A-Za-z_$][\w$]*\s*:)|(;)/g);var h=[];a=Bb(a);var i=0,j,k;while((j=e.exec(a))!==null){if(j[1]!==d){var l=a.lastIndexOf('"B',e.lastIndex);var m=a.substring(i,l);if(j[1]==="for"){h.push(new Cb(jb(r[j[2]]),{prefix:m}))}else if(j[1]==="catch"){h.push(new Db(R(r[j[2]]),{prefix:m}))}else{h.push(new Eb(j[1],F(r[j[2]]),{prefix:m}))}}else if(j[3]!==d){h.push(new Eb(j[3],d,{prefix:a.substring(i,e.lastIndex)}))}else if(j[4]!==d){k=a.substring(i,e.lastIndex-j[4].length);if(g(k).length!==0){continue}h.push(k);var n=j[4].charAt(1),o=j[5];if(n==="D"){h.push(b(r[o]))}else if(n==="E"){h.push(c(r[o]))}else if(n==="H"){h.push(W(r[o]))}else{h.push(C(r[o]))}}else if(j[6]!==d){h.push(new Fb(F(g(j[7]))))}else if(j[8]!==d){k=a.substring(i,e.lastIndex-j[8].length);if(g(k).length!==0){continue}h.push(new Gb(a.substring(i,e.lastIndex)))}else{var p=f(a.substring(i,e.lastIndex-1));h.push(p.left);h.push(fb(p.middle));h.push(p.right+";")}i=e.lastIndex}var q=f(a.substring(i));h.push(q.left);if(q.middle!==""){h.push(fb(q.middle));h.push(";"+q.right)}return h};Ib.prototype.toString=function(){var a=Hb(this.statements);var b=s;if(!i(a)){s=function(c){return a.hasOwnProperty(c.name)?c.name:b(c)}}var c="{\n"+this.statements.join("")+"\n}";s=b;return c};C=function(a){var b=f(a.substring(1,a.length-1));return new Ib(D(b.middle))};Jb.prototype.toString=function(){var a=[],c=[],d;for(var e=0,f=this.statements.length;e<f;++e){d=this.statements[e];if(d instanceof xb||d instanceof wb){a.push(d)}else{c.push(d)}}kb(a);var g=Hb(this.statements);s=function(a){var c=a.name;if(g.hasOwnProperty(c)){return c}if(b.hasOwnProperty(c)||n.hasOwnProperty(c)||v.hasOwnProperty(c)){return"$p."+c}return c};var h="// this code was autogenerated from PJS\n"+"(function($p) {\n"+a.join("")+"\n"+c.join("")+"\n})";s=null;return h};E=function(){var a=N(r[0]);a=a.replace(/\bimport\s+[^;]+;/g,"");return new Jb(D(a,Ab,yb))};var Mb=E();Kb(Mb);Lb(Mb);var Nb=Mb.toString();Nb=Nb.replace(/\s*\n(?:[\t ]*\n)+/g,"\n\n");Nb=Nb.replace(/__x([0-9A-F]{4})/g,function(a,b){return String.fromCharCode(parseInt(b,16))});return e(Nb,l)}function I(a,b){var c=(new RegExp(/\/\*\s*@pjs\s+((?:[^\*]|\*+[^\*\/])*)\*\//g)).exec(a);if(c&&c.length===2){var d=[],e=c.splice(1,2)[0].replace(/\{([\s\S]*?)\}/g,function(){return function(a,b){d.push(b);return"{"+(d.length-1)+"}"}}()).replace("\n","").replace("\r","").split(";");var f=function(a){return a.replace(/^\s*["']?/,"").replace(/["']?\s*$/,"")};for(var g=0,h=e.length;g<h;g++){var i=e[g].split("=");if(i&&i.length===2){var j=f(i[0]),k=f(i[1]),l=[];if(j==="preload"){l=k.split(",");for(var m=0,n=l.length;m<n;m++){var o=f(l[m]);b.imageCache.add(o)}}else if(j==="font"){l=k.split(",");for(var p=0,q=l.length;p<q;p++){var r=f(l[p]),s=/^\{(\d*?)\}$/.exec(r);E.preloading.add(s?JSON.parse("{"+d[s[1]]+"}"):r)}}else if(j==="pauseOnBlur"){b.options.pauseOnBlur=k==="true"}else if(j==="globalKeyEvents"){b.options.globalKeyEvents=k==="true"}else if(j.substring(0,6)==="param-"){b.params[j.substring(6)]=k}else{b.options[j]=k}}}}return a}var e=function(){};var f=function(){if("console"in a){return function(b){a.console.log("Processing.js: "+b)}}return e}();var g=function(a){var b=new XMLHttpRequest;b.open("GET",a,false);if(b.overrideMimeType){b.overrideMimeType("text/plain")}b.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT");b.send(null);if(b.status!==200&&b.status!==0){throw"XMLHttpRequest failed, status code "+b.status}return b.responseText};var h="document"in this&&!("fake"in this.document);b.head=b.head||b.getElementsByTagName("head")[0];var j=i("Float32Array","WebGLFloatArray"),k=i("Int32Array","WebGLIntArray"),l=i("Uint16Array","WebGLUnsignedShortArray"),m=i("Uint8Array","WebGLUnsignedByteArray");var n={X:0,Y:1,Z:2,R:3,G:4,B:5,A:6,U:7,V:8,NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:1e-4,MAX_FLOAT:3.4028235e+38,MIN_FLOAT:-3.4028235e+38,MAX_INT:2147483647,MIN_INT:-2147483648,PI:c.PI,TWO_PI:2*c.PI,HALF_PI:c.PI/2,THIRD_PI:c.PI/3,QUARTER_PI:c.PI/4,DEG_TO_RAD:c.PI/180,RAD_TO_DEG:180/c.PI,WHITESPACE:" 	\n\r\f ",RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1<<0,ADD:1<<1,SUBTRACT:1<<2,LIGHTEST:1<<3,DARKEST:1<<4,DIFFERENCE:1<<5,EXCLUSION:1<<6,MULTIPLY:1<<7,SCREEN:1<<8,OVERLAY:1<<9,HARD_LIGHT:1<<10,SOFT_LIGHT:1<<11,DODGE:1<<12,BURN:1<<13,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:"butt",ROUND:"round",PROJECT:"square",MITER:"miter",BEVEL:"bevel",AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",NOCURSOR:"url('data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='), auto",DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:720,PRECISIONB:15,PRECISIONF:1<<15,PREC_MAXVAL:(1<<15)-1,PREC_ALPHA_SHIFT:24-15,PREC_RED_SHIFT:16-15,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8};var q=function(a){if(a.iterator instanceof Function){return a.iterator()}if(a instanceof Array){var b=-1;this.hasNext=function(){return++b<a.length};this.next=function(){return a[b]}}else{throw"Unable to iterate: "+a}};var r=function(){function a(a){var b=0;this.hasNext=function(){return b<a.length};this.next=function(){return a[b++]};this.remove=function(){a.splice(b,1)}}function b(c){var d;if(c instanceof b){d=c.toArray()}else{d=[];if(typeof c==="number"){d.length=c>0?c:0}}this.get=function(a){return d[a]};this.contains=function(a){return this.indexOf(a)>-1};this.indexOf=function(a){for(var b=0,c=d.length;b<c;++b){if(p(a,d[b])){return b}}return-1};this.add=function(){if(arguments.length===1){d.push(arguments[0])}else if(arguments.length===2){var a=arguments[0];if(typeof a==="number"){if(a>=0&&a<=d.length){d.splice(a,0,arguments[1])}else{throw a+" is not a valid index"}}else{throw typeof a+" is not a number"}}else{throw"Please use the proper number of parameters."}};this.addAll=function(a,b){var c;if(typeof a==="number"){if(a<0||a>d.length){throw"Index out of bounds for addAll: "+a+" greater or equal than "+d.length}c=new q(b);while(c.hasNext()){d.splice(a++,0,c.next())}}else{c=new q(a);while(c.hasNext()){d.push(c.next())}}};this.set=function(){if(arguments.length===2){var a=arguments[0];if(typeof a==="number"){if(a>=0&&a<d.length){d.splice(a,1,arguments[1])}else{throw a+" is not a valid index."}}else{throw typeof a+" is not a number"}}else{throw"Please use the proper number of parameters."}};this.size=function(){return d.length};this.clear=function(){d.length=0};this.remove=function(a){if(typeof a==="number"){return d.splice(a,1)[0]}a=this.indexOf(a);if(a>-1){d.splice(a,1);return true}return false};this.removeAll=function(a){var c,d,e,f=new b;f.addAll(this);this.clear();for(c=0,d=0;c<f.size();c++){e=f.get(c);if(!a.contains(e)){this.add(d++,e)}}if(this.size()<f.size()){return true}return false};this.isEmpty=function(){return!d.length};this.clone=function(){return new b(this)};this.toArray=function(){return d.slice(0)};this.iterator=function(){return new a(d)}}return b}();var s=function(){function a(){function h(a){var b=o(a)%e.length;return b<0?e.length+b:b}function i(){if(f<=c*e.length){return}var a=[];for(var b=0;b<e.length;++b){if(e[b]!==d){a=a.concat(e[b])}}var g=e.length*2;e=[];e.length=g;for(var i=0;i<a.length;++i){var j=h(a[i].key);var k=e[j];if(k===d){e[j]=k=[]}k.push(a[i])}}function j(a,b){function h(){while(!g){++f;if(c>=e.length){g=true}else if(e[c]===d||f>=e[c].length){f=-1;++c}else{return}}}var c=0;var f=-1;var g=false;this.hasNext=function(){return!g};this.next=function(){var b=a(e[c][f]);h();return b};this.remove=function(){b(this.next());--f};h()}function k(a,b,c){this.clear=function(){g.clear()};this.contains=function(a){return b(a)};this.containsAll=function(a){var b=a.iterator();while(b.hasNext()){if(!this.contains(b.next())){return false}}return true};this.isEmpty=function(){return g.isEmpty()};this.iterator=function(){return new j(a,c)};this.remove=function(a){if(this.contains(a)){c(a);return true}return false};this.removeAll=function(a){var b=a.iterator();var d=false;while(b.hasNext()){var e=b.next();if(this.contains(e)){c(e);d=true}}return true};this.retainAll=function(a){var b=this.iterator();var d=[];while(b.hasNext()){var e=b.next();if(!a.contains(e)){d.push(e)}}for(var f=0;f<d.length;++f){c(d[f])}return d.length>0};this.size=function(){return g.size()};this.toArray=function(){var a=[];var b=this.iterator();while(b.hasNext()){a.push(b.next())}return a}}function l(a){this._isIn=function(b){return b===g&&a.removed===d};this.equals=function(b){return p(a.key,b.getKey())};this.getKey=function(){return a.key};this.getValue=function(){return a.value};this.hashCode=function(b){return o(a.key)};this.setValue=function(b){var c=a.value;a.value=b;return c}}if(arguments.length===1&&arguments[0]instanceof a){return arguments[0].clone()}var b=arguments.length>0?arguments[0]:16;var c=arguments.length>1?arguments[1]:.75;var e=[];e.length=b;var f=0;var g=this;this.clear=function(){f=0;e=[];e.length=b};this.clone=function(){var b=new a;b.putAll(this);return b};this.containsKey=function(a){var b=h(a);var c=e[b];if(c===d){return false}for(var f=0;f<c.length;++f){if(p(c[f].key,a)){return true}}return false};this.containsValue=function(a){for(var b=0;b<e.length;++b){var c=e[b];if(c===d){continue}for(var f=0;f<c.length;++f){if(p(c[f].value,a)){return true}}}return false};this.entrySet=function(){return new k(function(a){return new l(a)},function(a){return a instanceof l&&a._isIn(g)},function(a){return g.remove(a.getKey())})};this.get=function(a){var b=h(a);var c=e[b];if(c===d){return null}for(var f=0;f<c.length;++f){if(p(c[f].key,a)){return c[f].value}}return null};this.isEmpty=function(){return f===0};this.keySet=function(){return new k(function(a){return a.key},function(a){return g.containsKey(a)},function(a){return g.remove(a)})};this.values=function(){return new k(function(a){return a.value},function(a){return g.containsValue(a)},function(a){return g.removeByValue(a)})};this.put=function(a,b){var c=h(a);var g=e[c];if(g===d){++f;e[c]=[{key:a,value:b}];i();return null}for(var j=0;j<g.length;++j){if(p(g[j].key,a)){var k=g[j].value;g[j].value=b;return k}}++f;g.push({key:a,value:b});i();return null};this.putAll=function(a){var b=a.entrySet().iterator();while(b.hasNext()){var c=b.next();this.put(c.getKey(),c.getValue())}};this.remove=function(a){var b=h(a);var c=e[b];if(c===d){return null}for(var g=0;g<c.length;++g){if(p(c[g].key,a)){--f;var i=c[g].value;c[g].removed=true;if(c.length>1){c.splice(g,1)}else{e[b]=d}return i}}return null};this.removeByValue=function(a){var b,c,d,f;for(b in e){if(e.hasOwnProperty(b)){for(c=0,d=e[b].length;c<d;c++){f=e[b][c];if(f.value===a){e[b].splice(c,1);return true}}}}return false};this.size=function(){return f}}return a}();var t=function(){function a(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0}function b(a){return function(b,c){var d=b.get();d[a](c);return d}}a.dist=function(a,b){return a.dist(b)};a.dot=function(a,b){return a.dot(b)};a.cross=function(a,b){return a.cross(b)};a.angleBetween=function(a,b){return c.acos(a.dot(b)/(a.mag()*b.mag()))};a.prototype={set:function(a,b,c){if(arguments.length===1){this.set(a.x||a[0]||0,a.y||a[1]||0,a.z||a[2]||0)}else{this.x=a;this.y=b;this.z=c}},get:function(){return new a(this.x,this.y,this.z)},mag:function(){var a=this.x,b=this.y,d=this.z;return c.sqrt(a*a+b*b+d*d)},add:function(a,b,c){if(arguments.length===1){this.x+=a.x;this.y+=a.y;this.z+=a.z}else{this.x+=a;this.y+=b;this.z+=c}},sub:function(a,b,c){if(arguments.length===1){this.x-=a.x;this.y-=a.y;this.z-=a.z}else{this.x-=a;this.y-=b;this.z-=c}},mult:function(a){if(typeof a==="number"){this.x*=a;this.y*=a;this.z*=a}else{this.x*=a.x;this.y*=a.y;this.z*=a.z}},div:function(a){if(typeof a==="number"){this.x/=a;this.y/=a;this.z/=a}else{this.x/=a.x;this.y/=a.y;this.z/=a.z}},dist:function(a){var b=this.x-a.x,d=this.y-a.y,e=this.z-a.z;return c.sqrt(b*b+d*d+e*e)},dot:function(a,b,c){if(arguments.length===1){return this.x*a.x+this.y*a.y+this.z*a.z}return this.x*a+this.y*b+this.z*c},cross:function(b){var c=this.x,d=this.y,e=this.z;return new a(d*b.z-b.y*e,e*b.x-b.z*c,c*b.y-b.x*d)},normalize:function(){var a=this.mag();if(a>0){this.div(a)}},limit:function(a){if(this.mag()>a){this.normalize();this.mult(a)}},heading2D:function(){return-c.atan2(-this.y,this.x)},toString:function(){return"["+this.x+", "+this.y+", "+this.z+"]"},array:function(){return[this.x,this.y,this.z]}};for(var d in a.prototype){if(a.prototype.hasOwnProperty(d)&&!a.hasOwnProperty(d)){a[d]=b(d)}}return a}();u.prototype=n;var v=new u;v.ArrayList=r;v.HashMap=s;v.PVector=t;v.ObjectIterator=q;v.PConstants=n;v.defineProperty=function(a,b,c){if("defineProperty"in Object){Object.defineProperty(a,b,c)}else{if(c.hasOwnProperty("get")){a.__defineGetter__(b,c.get)}if(c.hasOwnProperty("set")){a.__defineSetter__(b,c.set)}}};v.extendClassChain=function(a){var b=[a];for(var c=a.$upcast;c;c=c.$upcast){w(c,a);b.push(c);a=c}while(b.length>0){b.pop().$self=a}};v.extendStaticMembers=function(a,b){w(a,b)};v.extendInterfaceMembers=function(a,b){w(a,b)};v.addMethod=function(a,b,c,d){if(a[b]){var e=c.length,f=a[b];a[b]=function(){if(arguments.length===e){return c.apply(this,arguments)}return f.apply(this,arguments)}}else{a[b]=c}};v.createJavaArray=function(a,b){var c=null,d=null;if(typeof a==="string"){if(a==="boolean"){d=false}else if(x(a)){d=0}}if(typeof b[0]==="number"){var e=0|b[0];if(b.length<=1){c=[];c.length=e;for(var f=0;f<e;++f){c[f]=d}}else{c=[];var g=b.slice(1);for(var h=0;h<e;++h){c.push(v.createJavaArray(a,g))}}}return c};var y={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};(function(a){function f(a){return function(){throw"Processing.js does not support "+a+"."}}var b=("open() createOutput() createInput() BufferedReader selectFolder() "+"dataPath() createWriter() selectOutput() beginRecord() "+"saveStream() endRecord() selectInput() saveBytes() createReader() "+"beginRaw() endRaw() PrintWriter delay()").split(" "),c=b.length,d,e;while(c--){d=b[c];e=d.replace("()","");a[e]=f(d)}})(v);v.defineProperty(v,"screenWidth",{get:function(){return a.innerWidth}});v.defineProperty(v,"screenHeight",{get:function(){return a.innerHeight}});v.defineProperty(v,"online",{get:function(){return true}});var z=[];var A={};var B=function(a){z.splice(A[a],1);delete A[a]};var C=function(a){if(a.externals.canvas.id===d||!a.externals.canvas.id.length){a.externals.canvas.id="__processing"+z.length}A[a.externals.canvas.id]=z.length;z.push(a)};E.prototype.caching=true;E.prototype.getCSSDefinition=function(a,b){if(a===d){a=this.size+"px"}if(b===d){b=this.leading+"px"}var c=[this.style,"normal",this.weight,a+"/"+b,this.family];return c.join(" ")};E.prototype.measureTextWidth=function(a){return this.context2d.measureText(a).width};E.prototype.measureTextWidthFallback=function(a){var c=b.createElement("canvas"),d=c.getContext("2d");d.font=this.css;return d.measureText(a).width};E.PFontCache={length:0};E.get=function(a,b){b=(b*10+.5|0)/10;var c=E.PFontCache,d=a+"/"+b;if(!c[d]){c[d]=new E(a,b);c.length++;if(c.length===50){E.prototype.measureTextWidth=E.prototype.measureTextWidthFallback;E.prototype.caching=false;var e;for(e in c){if(e!=="length"){c[e].context2d=null}}return new E(a,b)}if(c.length===400){E.PFontCache={};E.get=E.getFallback;return new E(a,b)}}return c[d]};E.getFallback=function(a,b){return new E(a,b)};E.list=function(){return["sans-serif","serif","monospace","fantasy","cursive"]};E.preloading={template:{},initialized:false,initialize:function(){var a=function(){var a="#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm"+"7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3"+"AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG"+"9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3"+"#yld0xg32QAB77#E777773B#E3C#I#Q77773E#"+"Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#"+"E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#"+"Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#";var b=function(a){return"AAAAAAAA".substr(~~a?7-a:6)};return a.replace(/[#237]/g,b)};var c=b.createElement("style");c.setAttribute("type","text/css");c.innerHTML="@font-face {\n"+'  font-family: "PjsEmptyFont";'+"\n"+"  src: url('data:application/x-font-ttf;base64,"+a()+"')\n"+"       format('truetype');\n"+"}";b.head.appendChild(c);var d=b.createElement("span");d.style.cssText='position: absolute; top: 0; left: 0; opacity: 0; font-family: "PjsEmptyFont", fantasy;';d.innerHTML="AAAAAAAA";b.body.appendChild(d);this.template=d;this.initialized=true},getElementWidth:function(a){return b.defaultView.getComputedStyle(a,"").getPropertyValue("width")},timeAttempted:0,pending:function(a){if(!this.initialized){this.initialize()}var c,d,e=this.getElementWidth(this.template);for(var f=0;f<this.fontList.length;f++){c=this.fontList[f];d=this.getElementWidth(c);if(this.timeAttempted<4e3&&d===e){this.timeAttempted+=a;return true}else{b.body.removeChild(c);this.fontList.splice(f--,1);this.timeAttempted=0}}if(this.fontList.length===0){return false}return true},fontList:[],addedList:{},add:function(a){if(!this.initialized){this.initialize()}var c=typeof a==="object"?a.fontFace:a,d=typeof a==="object"?a.url:a;if(this.addedList[c]){return}var e=b.createElement("style");e.setAttribute("type","text/css");e.innerHTML="@font-face{\n  font-family: '"+c+"';\n  src:  url('"+d+"');\n}\n";b.head.appendChild(e);this.addedList[c]=true;var f=b.createElement("span");f.style.cssText="position: absolute; top: 0; left: 0; opacity: 0;";f.style.fontFamily='"'+c+'", "PjsEmptyFont", fantasy';f.innerHTML="AAAAAAAA";b.body.appendChild(f);this.fontList.push(f)}};v.PFont=E;var F=this.Processing=function(f,h){function q(a){F.debug("Unimplemented - "+a)}function md(a,b,c,e){var f=Cb.locations[a];if(f===d){f=s.getUniformLocation(b,c);Cb.locations[a]=f}if(f!==null){if(e.length===4){s.uniform4fv(f,e)}else if(e.length===3){s.uniform3fv(f,e)}else if(e.length===2){s.uniform2fv(f,e)}else{s.uniform1f(f,e)}}}function nd(a,b,c,e){var f=Cb.locations[a];if(f===d){f=s.getUniformLocation(b,c);Cb.locations[a]=f}if(f!==null){if(e.length===4){s.uniform4iv(f,e)}else if(e.length===3){s.uniform3iv(f,e)}else if(e.length===2){s.uniform2iv(f,e)}else{s.uniform1i(f,e)}}}function od(a,b,c,e,f){var g=Cb.locations[a];if(g===d){g=s.getUniformLocation(b,c);Cb.locations[a]=g}if(g!==-1){if(f.length===16){s.uniformMatrix4fv(g,e,f)}else if(f.length===9){s.uniformMatrix3fv(g,e,f)}else{s.uniformMatrix2fv(g,e,f)}}}function pd(a,b,c,e,f){var g=Cb.attributes[a];if(g===d){g=s.getAttribLocation(b,c);Cb.attributes[a]=g}if(g!==-1){s.bindBuffer(s.ARRAY_BUFFER,f);s.vertexAttribPointer(g,e,s.FLOAT,false,0,0);s.enableVertexAttribArray(g)}}function qd(a,b,c){var e=Cb.attributes[a];if(e===d){e=s.getAttribLocation(b,c);Cb.attributes[a]=e}if(e!==-1){s.disableVertexAttribArray(e)}}function Kd(a,b,d,e){var f,g,h,i;if(ob===n.HSB){var j=r.color.toRGB(a,b,d);f=j[0];g=j[1];h=j[2]}else{f=c.round(255*(a/hb));g=c.round(255*(b/ib));h=c.round(255*(d/jb))}i=c.round(255*(e/gb));f=f<0?0:f;g=g<0?0:g;h=h<0?0:h;i=i<0?0:i;f=f>255?255:f;g=g>255?255:g;h=h>255?255:h;i=i>255?255:i;return i<<24&n.ALPHA_MASK|f<<16&n.RED_MASK|g<<8&n.GREEN_MASK|h&n.BLUE_MASK}function Ld(a,b){var d;if(a&n.ALPHA_MASK){d=c.round(255*(b/gb));d=d>255?255:d;d=d<0?0:d;return a-(a&n.ALPHA_MASK)+(d<<24&n.ALPHA_MASK)}if(ob===n.RGB){return Kd(a,a,a,b)}if(ob===n.HSB){return Kd(0,0,a/hb*jb,b)}}function Md(a){if(a<=hb&&a>=0){if(ob===n.RGB){return Kd(a,a,a,gb)}if(ob===n.HSB){return Kd(0,0,a/hb*jb,gb)}}if(a){if(a>2147483647){a-=4294967296}return a}}function Nd(a){var b,c,d;b=((a&n.RED_MASK)>>>16)/255;c=((a&n.GREEN_MASK)>>>8)/255;d=(a&n.BLUE_MASK)/255;var e=r.max(r.max(b,c),d),f=r.min(r.min(b,c),d),g,h;if(f===e){return[0,0,e*jb]}h=(e-f)/e;if(b===e){g=(c-d)/(e-f)}else if(c===e){g=2+(d-b)/(e-f)}else{g=4+(b-c)/(e-f)}g/=6;if(g<0){g+=1}else if(g>1){g-=1}return[g*hb,h*ib,e*jb]}function Od(){s.save()}function Pd(){s.restore();K=true;G=true}function Qd(){var a=(Date.now()-tb)/1e3;ub++;var b=ub/a;if(a>.5){tb=Date.now();ub=0;r.__frameRate=b}r.frameCount++}function Sd(a,b,c){if(a.addEventListener){a.addEventListener(b,c,false)}else{a.attachEvent("on"+b,c)}Rd.push({elem:a,type:b,fn:c})}function Td(a){var b=a.elem,c=a.type,d=a.fn;if(b.removeEventListener){b.removeEventListener(c,d,false)}else if(b.detachEvent){b.detachEvent("on"+c,d)}}function Ud(a,b,e,f,g,h){var i=a<0?e:b;var j=g===0;var k=g===d||g<0?0:g;var l=c.abs(a);if(j){k=1;l*=10;while(c.abs(c.round(l)-l)>1e-6&&k<7){++k;l*=10}}else if(k!==0){l*=c.pow(10,k)}var m,n=l*2;if(c.floor(l)===l){m=l}else if(c.floor(n)===n){var o=c.floor(l);m=o+o%2}else{m=c.round(l)}var p="";var q=f+k;while(q>0||m>0){q--;p=""+m%10+p;m=c.floor(m/10)}if(h!==d){var r=p.length-3-k;while(r>0){p=p.substring(0,r)+h+p.substring(r);r-=3}}if(k>0){return i+p.substring(0,p.length-k)+"."+p.substring(p.length-k,p.length)}return i+p}function Vd(a,b,c,d,e,f){if(a instanceof Array){var g=[];for(var h=0,i=a.length;h<i;h++){g.push(Ud(a[h],b,c,d,e,f))}return g}return Ud(a,b,c,d,e,f)}function Xd(a){var b=parseInt("0x"+a,16);if(b>2147483647){b-=4294967296}return b}function Yd(a){return Array.prototype.slice.call(a,1)}function $d(a){if(typeof a==="number"){return a!==0}if(typeof a==="boolean"){return a}if(typeof a==="string"){return a.toLowerCase()==="true"}if(a instanceof Bd){return a.code===49||a.code===84||a.code===116}}function _d(a){if(typeof a==="number"){return a}if(typeof a==="boolean"){return a?1:0}if(typeof a==="string"){return parseFloat(a)}if(a instanceof Bd){return a.code}}function ae(a,b){if(typeof a==="number"){return a&4294967295}if(typeof a==="boolean"){return a?1:0}if(typeof a==="string"){var c=parseInt(a,b||10);return c&4294967295}if(a instanceof Bd){return a.code}}function ce(a,b){var c=a||362436069,d=b||521288629;var e=function(){c=36969*(c&65535)+(c>>>16)&4294967295;d=18e3*(d&65535)+(d>>>16)&4294967295;return((c&65535)<<16|d&65535)&4294967295};this.nextDouble=function(){var a=e()/4294967296;return a<0?1+a:a};this.nextInt=e}function de(a){function i(a,b,c,d){var e=a&15;var f=e<8?b:c,g=e<4?c:e===12||e===14?b:d;return((e&1)===0?f:-f)+((e&2)===0?g:-g)}function j(a,b,c){var d=(a&1)===0?b:c;return(a&2)===0?-d:d}function k(a,b){return(a&1)===0?-b:b}function l(a,b,c){return b+a*(c-b)}var b=a!==d?new ce(a):ce.createRandomized();var e,f;var g=new m(512);for(e=0;e<256;++e){g[e]=e}for(e=0;e<256;++e){var h=g[f=b.nextInt()&255];g[f]=g[e];g[e]=h}for(e=0;e<256;++e){g[e+256]=g[e]}this.noise3d=function(a,b,d){var e=c.floor(a)&255,f=c.floor(b)&255,h=c.floor(d)&255;a-=c.floor(a);b-=c.floor(b);d-=c.floor(d);var j=(3-2*a)*a*a,k=(3-2*b)*b*b,m=(3-2*d)*d*d;var n=g[e]+f,o=g[n]+h,p=g[n+1]+h,q=g[e+1]+f,r=g[q]+h,s=g[q+1]+h;return l(m,l(k,l(j,i(g[o],a,b,d),i(g[r],a-1,b,d)),l(j,i(g[p],a,b-1,d),i(g[s],a-1,b-1,d))),l(k,l(j,i(g[o+1],a,b,d-1),i(g[r+1],a-1,b,d-1)),l(j,i(g[p+1],a,b-1,d-1),i(g[s+1],a-1,b-1,d-1))))};this.noise2d=function(a,b){var d=c.floor(a)&255,e=c.floor(b)&255;a-=c.floor(a);b-=c.floor(b);var f=(3-2*a)*a*a,h=(3-2*b)*b*b;var i=g[d]+e,k=g[d+1]+e;return l(h,l(f,j(g[i],a,b),j(g[k],a-1,b)),l(f,j(g[i+1],a,b-1),j(g[k+1],a-1,b-1)))};this.noise1d=function(a){var b=c.floor(a)&255;a-=c.floor(a);var d=(3-2*a)*a*a;return l(d,k(g[b],a),k(g[b+1],a-1))}}function ge(){if(z){if(G){s.fillStyle=r.color.toString(D);G=false}s.fill()}}function he(){if(H){if(K){s.strokeStyle=r.color.toString(J);K=false}s.stroke()}}function le(){ge();he();s.closePath()}function te(a,c,e){var f=se.shift();if(f===d){f={};f.canvas=b.createElement("canvas");f.context=f.canvas.getContext("2d")}se.push(f);var g=f.canvas,h=f.context,i=c||a.width,j=e||a.height;g.width=i;g.height=j;if(!a){h.clearRect(0,0,i,j)}else if("data"in a){h.putImageData(a,0,0)}else{h.clearRect(0,0,i,j);h.drawImage(a,0,0,i,j)}return f}function ue(a){return{getLength:function(a){return function(){if(a.isRemote){throw"Image is loaded remotely. Cannot get length."}else{return a.imageData.data.length?a.imageData.data.length/4:0}}}(a),getPixel:function(a){return function(b){var c=b*4,d=a.imageData.data;if(a.isRemote){throw"Image is loaded remotely. Cannot get pixels."}return d[c+3]<<24&n.ALPHA_MASK|d[c]<<16&n.RED_MASK|d[c+1]<<8&n.GREEN_MASK|d[c+2]&n.BLUE_MASK}}(a),setPixel:function(a){return function(b,c){var d=b*4,e=a.imageData.data;if(a.isRemote){throw"Image is loaded remotely. Cannot set pixel."}e[d+0]=(c&n.RED_MASK)>>>16;e[d+1]=(c&n.GREEN_MASK)>>>8;e[d+2]=c&n.BLUE_MASK;e[d+3]=(c&n.ALPHA_MASK)>>>24;a.__isDirty=true}}(a),toArray:function(a){return function(){var b=[],c=a.imageData.data,d=a.width*a.height;if(a.isRemote){throw"Image is loaded remotely. Cannot get pixels."}for(var e=0,f=0;e<d;e++,f+=4){b.push(c[f+3]<<24&n.ALPHA_MASK|c[f]<<16&n.RED_MASK|c[f+1]<<8&n.GREEN_MASK|c[f+2]&n.BLUE_MASK)}return b}}(a),set:function(a){return function(b){var c,d,e;if(this.isRemote){throw"Image is loaded remotely. Cannot set pixels."}d=a.imageData.data;for(var f=0,g=b.length;f<g;f++){e=b[f];c=f*4;d[c+0]=(e&n.RED_MASK)>>>16;d[c+1]=(e&n.GREEN_MASK)>>>8;d[c+2]=e&n.BLUE_MASK;d[c+3]=(e&n.ALPHA_MASK)>>>24}a.__isDirty=true}}(a)}}function we(a,b){var c;if(a>=r.width||a<0||b<0||b>=r.height){return 0}if(jc){var d=((0|a)+r.width*(0|b))*4;c=r.imageData.data;return c[d+3]<<24&n.ALPHA_MASK|c[d]<<16&n.RED_MASK|c[d+1]<<8&n.GREEN_MASK|c[d+2]&n.BLUE_MASK}c=r.toImageData(0|a,0|b,1,1).data;return c[3]<<24&n.ALPHA_MASK|c[0]<<16&n.RED_MASK|c[1]<<8&n.GREEN_MASK|c[2]&n.BLUE_MASK}function xe(a,b,c){if(c.isRemote){throw"Image is loaded remotely. Cannot get x,y."}var d=b*c.width*4+a*4,e=c.imageData.data;return e[d+3]<<24&n.ALPHA_MASK|e[d]<<16&n.RED_MASK|e[d+1]<<8&n.GREEN_MASK|e[d+2]&n.BLUE_MASK}function ye(a,b,c,d){var e=new ve(c,d,n.ARGB);e.fromImageData(r.toImageData(a,b,c,d));return e}function ze(a,b,d,e,f){if(f.isRemote){throw"Image is loaded remotely. Cannot get x,y,w,h."}var g=new ve(d,e,n.ARGB),h=g.imageData.data,i=f.width,j=f.height,k=f.imageData.data;var l=c.max(0,-b),m=c.max(0,-a),o=c.min(e,j-b),p=c.min(d,i-a);for(var q=l;q<o;++q){var r=((b+q)*i+(a+m))*4;var s=(q*d+m)*4;for(var t=m;t<p;++t){h[s++]=k[r++];h[s++]=k[r++];h[s++]=k[r++];h[s++]=k[r++]}}g.__isDirty=true;return g}function Ae(){if(jc){s=hc;jc=false;r.updatePixels()}}function Be(){function a(a,b){function c(){Ae();s[b].apply(s,arguments)}a[b]=c}function b(a,b){function c(){Ae();return s[b]}function d(a){Ae();s[b]=a}r.defineProperty(a,b,{get:c,set:d})}for(var c in s){if(typeof s[c]==="function"){a(this,c)}else{b(this,c)}}}function Ce(){if(jc){return}r.loadPixels();if(ic===null){hc=s;ic=new Be}jc=true;s=ic;kc=0}function De(a,b,c){if(a<r.width&&a>=0&&b>=0&&b<r.height){Ce();r.pixels.setPixel((0|a)+r.width*(0|b),c);if(++kc>lc){Ae()}}}function Ee(a,b,c,d){if(d.isRemote){throw"Image is loaded remotely. Cannot set x,y."}var e=r.color.toArray(c);var f=b*d.width*4+a*4;var g=d.imageData.data;g[f]=e[0];g[f+1]=e[1];g[f+2]=e[2];g[f+3]=e[3]}function Ke(a){if(a instanceof String){return a}if(typeof a==="number"){if(a===(0|a)){return a.toString()}return r.nf(a,0,3)}if(a===null||a===d){return""}return a.toString()}function Le(a,b,c,d){var e,f;if(a.indexOf("\n")<0){e=[a];f=1}else{e=a.split(/\r?\n/g);f=e.length}var g=0;if(_b===n.TOP){g=dc+ec}else if(_b===n.CENTER){g=dc/2-(f-1)*fc/2}else if(_b===n.BOTTOM){g=-(ec+(f-1)*fc)}for(var h=0;h<f;++h){var i=e[h];w.text$line(i,b,c+g,d,$b);g+=fc}}function Me(a,b,d,e,f,g){if(a.length===0||e===0||f===0){return}if(cc>f){return}var h=-1;var i=0;var j=0;var k=[];for(var l=0,m=a.length;l<m;l++){var o=a[l];var p=o===" ";var q=gc.measureTextWidth(o);if(o!=="\n"&&j+q<=e){if(p){h=l}j+=q}else{if(h+1===i){if(l>0){h=l}else{return}}if(o==="\n"){k.push({text:a.substring(i,l),width:j});i=l+1}else{k.push({text:a.substring(i,h+1),width:j});i=h+1}j=0;l=i-1}}if(i<m){k.push({text:a.substring(i),width:j})}var r=1,s=dc;if($b===n.CENTER){r=e/2}else if($b===n.RIGHT){r=e}var t=k.length,u=c.min(t,c.floor(f/fc));if(_b===n.TOP){s=dc+ec}else if(_b===n.CENTER){s=f/2-fc*(u/2-1)}else if(_b===n.BOTTOM){s=ec+fc}var v,x,y;for(v=0;v<t;v++){y=v*fc;if(s+y>f-ec){break}x=k[v];w.text$line(x.text,b+r,d+s+y,g,$b)}}function Ne(a){if(a==="3D"){w=new yd}else if(a==="2D"){w=new xd}else{w=new zd}for(var b in zd.prototype){if(zd.prototype.hasOwnProperty(b)&&b.indexOf("$")<0){r[b]=w[b]}}w.$init()}function Oe(a){return function(){Ne("2D");return w[a].apply(this,arguments)}}function Pe(b,c){var d=b,e=0,f=0;r.pmouseX=r.mouseX;r.pmouseY=r.mouseY;if(d.offsetParent){do{e+=d.offsetLeft;f+=d.offsetTop}while(!!(d=d.offsetParent))}d=b;do{e-=d.scrollLeft||0;f-=d.scrollTop||0}while(!!(d=d.parentNode));e+=pc;f+=qc;e+=rc;f+=sc;e+=a.pageXOffset;f+=a.pageYOffset;return{X:e,Y:f}}function Qe(a,b){var c=Pe(a,b);r.mouseX=b.pageX-c.X;r.mouseY=b.pageY-c.Y}function Re(a){var b=Pe(a.changedTouches[0].target,a.changedTouches[0]),c;for(c=0;c<a.touches.length;c++){var d=a.touches[c];d.offsetX=d.pageX-b.X;d.offsetY=d.pageY-b.Y}for(c=0;c<a.targetTouches.length;c++){var e=a.targetTouches[c];e.offsetX=e.pageX-b.X;e.offsetY=e.pageY-b.Y}for(c=0;c<a.changedTouches.length;c++){var f=a.changedTouches[c];f.offsetX=f.pageX-b.X;f.offsetY=f.pageY-b.Y}return a}function Te(a){var b=a.which||a.keyCode;switch(b){case 13:return 10;case 91:case 93:case 224:return 157;case 57392:return 17;case 46:return 127;case 45:return 155}return b}function Ue(a){var b=a.which||a.keyCode;var c=a.shiftKey||a.ctrlKey||a.altKey||a.metaKey;switch(b){case 13:b=c?13:10;break;case 8:b=c?127:8;break}return new Bd(b)}function Ve(a){if(typeof a.preventDefault==="function"){a.preventDefault()}else if(typeof a.stopPropagation==="function"){a.stopPropagation()}return false}function We(){var a;for(a in mc){if(mc.hasOwnProperty(a)){r.__keyPressed=true;return}}r.__keyPressed=false}function Xe(){r.__keyPressed=false;mc=[];nc=null}function Ye(a,b){mc[a]=b;nc=null;r.key=b;r.keyCode=a;r.keyPressed();r.keyCode=0;r.keyTyped();We()}function Ze(a){var b=Te(a);if(b===n.DELETE){Ye(b,new Bd(127));return}if(oc.indexOf(b)<0){nc=b;return}var c=new Bd(n.CODED);r.key=c;r.keyCode=b;mc[b]=c;r.keyPressed();nc=null;We();return Ve(a)}function $e(a){if(nc===null){return}var b=nc,c=Ue(a);Ye(b,c);return Ve(a)}function _e(a){var b=Te(a),c=mc[b];if(c===d){return}r.key=c;r.keyCode=b;r.keyReleased();delete mc[b];We()}if(!(this instanceof F)){throw"called Processing constructor as if it were a function: missing 'new'."}var i,p=f===d&&h===d;if(p){i=b.createElement("canvas")}else{i=typeof f==="string"?b.getElementById(f):f}if(!(i instanceof HTMLCanvasElement)){throw"called Processing constructor without passing canvas element reference or id."}var r=this;r.externals={canvas:i,context:d,sketch:d};r.name="Processing.js Instance";r.use3DContext=false;r.focused=false;r.breakShape=false;r.glyphTable={};r.pmouseX=0;r.pmouseY=0;r.mouseX=0;r.mouseY=0;r.mouseButton=0;r.mouseScroll=0;r.mouseClicked=d;r.mouseDragged=d;r.mouseMoved=d;r.mousePressed=d;r.mouseReleased=d;r.mouseScrolled=d;r.mouseOver=d;r.mouseOut=d;r.touchStart=d;r.touchEnd=d;r.touchMove=d;r.touchCancel=d;r.key=d;r.keyCode=d;r.keyPressed=e;r.keyReleased=e;r.keyTyped=e;r.draw=d;r.setup=d;r.__mousePressed=false;r.__keyPressed=false;r.__frameRate=60;r.frameCount=0;r.width=100;r.height=100;var s,u,w,x=true,z=true,A=[1,1,1,1],D=4294967295,G=true,H=true,I=[0,0,0,1],J=4278190080,K=true,L=1,M=false,N=false,O=true,P=0,Q=n.CORNER,R=n.CENTER,S=0,T=0,U=0,V=n.NORMAL_MODE_AUTO,W=60,X=1e3/W,Y=n.ARROW,Z=i.style.cursor,$=n.POLYGON,_=0,ab=[],bb=0,cb=20,db=false,eb=-3355444,fb=20,gb=255,hb=255,ib=255,jb=255,kb=false,lb=false,mb=0,nb=0,ob=n.RGB,pb=null,qb=null,rb=false,sb=Date.now(),tb=sb,ub=0,vb,wb,xb,yb,zb,Ab,Bb,Cb={attributes:{},locations:{}},Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub={width:0,height:0},Vb=n.IMAGE,Wb=false,Xb,Yb,Zb,$b=n.LEFT,_b=n.BASELINE,ac=n.MODEL,bc="Arial",cc=12,dc=9,ec=2,fc=14,gc=E.get(bc,cc),hc,ic=null,jc=false,kc,lc=1e3,mc=[],nc=null,oc=[n.SHIFT,n.CONTROL,n.ALT,n.CAPSLK,n.PGUP,n.PGDN,n.END,n.HOME,n.LEFT,n.UP,n.RIGHT,n.DOWN,n.NUMLK,n.INSERT,n.F1,n.F2,n.F3,n.F4,n.F5,n.F6,n.F7,n.F8,n.F9,n.F10,n.F11,n.F12,n.META];var pc,qc,rc,sc;if(b.defaultView&&b.defaultView.getComputedStyle){pc=parseInt(b.defaultView.getComputedStyle(i,null)["paddingLeft"],10)||0;qc=parseInt(b.defaultView.getComputedStyle(i,null)["paddingTop"],10)||0;rc=parseInt(b.defaultView.getComputedStyle(i,null)["borderLeftWidth"],10)||0;sc=parseInt(b.defaultView.getComputedStyle(i,null)["borderTopWidth"],10)||0}var tc=0;var uc=0,vc=0,wc=[],xc=[],yc=[],zc=new j(n.SINCOS_LENGTH),Ac=new j(n.SINCOS_LENGTH),Bc,Cc;var Dc,Ec,Fc,Gc,Hc,Ic,Jc,Kc,Lc=false,Mc=false,Nc=60*(c.PI/180),Oc=r.width/2,Pc=r.height/2,Qc=Pc/c.tan(Nc/2),Rc=Qc/10,Sc=Qc*10,Tc=r.width/r.height;var Uc=[],Vc=[],Wc=0,Xc=false,Yc=false,Zc=true;var $c=n.CORNER;var _c=[];var ad=new j([.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5]);var bd=new j([.5,.5,.5,.5,-.5,.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5]);var cd=new j([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]);var dd=new j([0,0,0,0,1,0,1,1,0,1,0,0]);var ed=new j([0,0,1,0,0,1,0,0,1,0,0,1]);var fd="varying vec4 vFrontColor;"+"attribute vec3 aVertex;"+"attribute vec4 aColor;"+"uniform mat4 uView;"+"uniform mat4 uProjection;"+"uniform float uPointSize;"+"void main(void) {"+"  vFrontColor = aColor;"+"  gl_PointSize = uPointSize;"+"  gl_Position = uProjection * uView * vec4(aVertex, 1.0);"+"}";var gd="#ifdef GL_ES\n"+"precision highp float;\n"+"#endif\n"+"varying vec4 vFrontColor;"+"uniform bool uSmooth;"+"void main(void){"+"  if(uSmooth == true){"+"    float dist = distance(gl_PointCoord, vec2(0.5));"+"    if(dist > 0.5){"+"      discard;"+"    }"+"  }"+"  gl_FragColor = vFrontColor;"+"}";var hd="varying vec4 vFrontColor;"+"attribute vec3 aVertex;"+"attribute vec2 aTextureCoord;"+"uniform vec4 uColor;"+"uniform mat4 uModel;"+"uniform mat4 uView;"+"uniform mat4 uProjection;"+"uniform float uPointSize;"+"varying vec2 vTextureCoord;"+"void main(void) {"+"  gl_PointSize = uPointSize;"+"  vFrontColor = uColor;"+"  gl_Position = uProjection * uView * uModel * vec4(aVertex, 1.0);"+"  vTextureCoord = aTextureCoord;"+"}";var id="#ifdef GL_ES\n"+"precision highp float;\n"+"#endif\n"+"varying vec4 vFrontColor;"+"varying vec2 vTextureCoord;"+"uniform sampler2D uSampler;"+"uniform int uIsDrawingText;"+"uniform bool uSmooth;"+"void main(void){"+"  if(uSmooth == true){"+"    float dist = distance(gl_PointCoord, vec2(0.5));"+"    if(dist > 0.5){"+"      discard;"+"    }"+"  }"+"  if(uIsDrawingText == 1){"+"    float alpha = texture2D(uSampler, vTextureCoord).a;"+"    gl_FragColor = vec4(vFrontColor.rgb * alpha, alpha);"+"  }"+"  else{"+"    gl_FragColor = vFrontColor;"+"  }"+"}";var jd=/Windows/.test(navigator.userAgent);var kd="varying vec4 vFrontColor;"+"attribute vec3 aVertex;"+"attribute vec3 aNormal;"+"attribute vec4 aColor;"+"attribute vec2 aTexture;"+"varying   vec2 vTexture;"+"uniform vec4 uColor;"+"uniform bool uUsingMat;"+"uniform vec3 uSpecular;"+"uniform vec3 uMaterialEmissive;"+"uniform vec3 uMaterialAmbient;"+"uniform vec3 uMaterialSpecular;"+"uniform float uShininess;"+"uniform mat4 uModel;"+"uniform mat4 uView;"+"uniform mat4 uProjection;"+"uniform mat4 uNormalTransform;"+"uniform int uLightCount;"+"uniform vec3 uFalloff;"+"struct Light {"+"  int type;"+"  vec3 color;"+"  vec3 position;"+"  vec3 direction;"+"  float angle;"+"  vec3 halfVector;"+"  float concentration;"+"};"+"uniform Light uLights0;"+"uniform Light uLights1;"+"uniform Light uLights2;"+"uniform Light uLights3;"+"uniform Light uLights4;"+"uniform Light uLights5;"+"uniform Light uLights6;"+"uniform Light uLights7;"+"Light getLight(int index){"+"  if(index == 0) return uLights0;"+"  if(index == 1) return uLights1;"+"  if(index == 2) return uLights2;"+"  if(index == 3) return uLights3;"+"  if(index == 4) return uLights4;"+"  if(index == 5) return uLights5;"+"  if(index == 6) return uLights6;"+"  return uLights7;"+"}"+"void AmbientLight( inout vec3 totalAmbient, in vec3 ecPos, in Light light ) {"+"  float d = length( light.position - ecPos );"+"  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));"+"  totalAmbient += light.color * attenuation;"+"}"+"void DirectionalLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {"+"  float powerFactor = 0.0;"+"  float nDotVP = max(0.0, dot( vertNormal, normalize(-light.position) ));"+"  float nDotVH = max(0.0, dot( vertNormal, normalize(-light.position-normalize(ecPos) )));"+"  if( nDotVP != 0.0 ){"+"    powerFactor = pow( nDotVH, uShininess );"+"  }"+"  col += light.color * nDotVP;"+"  spec += uSpecular * powerFactor;"+"}"+"void PointLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {"+"  float powerFactor;"+"   vec3 VP = light.position - ecPos;"+"  float d = length( VP ); "+"  VP = normalize( VP );"+"  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ));"+"  float nDotVP = max( 0.0, dot( vertNormal, VP ));"+"  vec3 halfVector = normalize( VP - normalize(ecPos) );"+"  float nDotHV = max( 0.0, dot( vertNormal, halfVector ));"+"  if( nDotVP == 0.0 ) {"+"    powerFactor = 0.0;"+"  }"+"  else {"+"    powerFactor = pow( nDotHV, uShininess );"+"  }"+"  spec += uSpecular * powerFactor * attenuation;"+"  col += light.color * nDotVP * attenuation;"+"}"+"void SpotLight( inout vec3 col, inout vec3 spec, in vec3 vertNormal, in vec3 ecPos, in Light light ) {"+"  float spotAttenuation;"+"  float powerFactor = 0.0;"+"  vec3 VP = light.position - ecPos;"+"  vec3 ldir = normalize( -light.direction );"+"  float d = length( VP );"+"  VP = normalize( VP );"+"  float attenuation = 1.0 / ( uFalloff[0] + ( uFalloff[1] * d ) + ( uFalloff[2] * d * d ) );"+"  float spotDot = dot( VP, ldir );"+(jd?"  spotAttenuation = 1.0; ":"  if( spotDot > cos( light.angle ) ) {"+"    spotAttenuation = pow( spotDot, light.concentration );"+"  }"+"  else{"+"    spotAttenuation = 0.0;"+"  }"+"  attenuation *= spotAttenuation;"+"")+"  float nDotVP = max( 0.0, dot( vertNormal, VP ) );"+"  vec3 halfVector = normalize( VP - normalize(ecPos) );"+"  float nDotHV = max( 0.0, dot( vertNormal, halfVector ) );"+"  if( nDotVP != 0.0 ) {"+"    powerFactor = pow( nDotHV, uShininess );"+"  }"+"  spec += uSpecular * powerFactor * attenuation;"+"  col += light.color * nDotVP * attenuation;"+"}"+"void main(void) {"+"  vec3 finalAmbient = vec3( 0.0 );"+"  vec3 finalDiffuse = vec3( 0.0 );"+"  vec3 finalSpecular = vec3( 0.0 );"+"  vec4 col = uColor;"+"  if ( uColor[0] == -1.0 ){"+"    col = aColor;"+"  }"+"  vec3 norm = normalize(vec3( uNormalTransform * vec4( aNormal, 0.0 ) ));"+"  vec4 ecPos4 = uView * uModel * vec4(aVertex, 1.0);"+"  vec3 ecPos = (vec3(ecPos4))/ecPos4.w;"+"  if( uLightCount == 0 ) {"+"    vFrontColor = col + vec4(uMaterialSpecular, 1.0);"+"  }"+"  else {"+"    for( int i = 0; i < 8; i++ ) {"+"      Light l = getLight(i);"+"      if( i >= uLightCount ){"+"        break;"+"      }"+"      if( l.type == 0 ) {"+"        AmbientLight( finalAmbient, ecPos, l );"+"      }"+"      else if( l.type == 1 ) {"+"        DirectionalLight( finalDiffuse, finalSpecular, norm, ecPos, l );"+"      }"+"      else if( l.type == 2 ) {"+"        PointLight( finalDiffuse, finalSpecular, norm, ecPos, l );"+"      }"+"      else {"+"        SpotLight( finalDiffuse, finalSpecular, norm, ecPos, l );"+"      }"+"    }"+"   if( uUsingMat == false ) {"+"     vFrontColor = vec4("+"       vec3( col ) * finalAmbient +"+"       vec3( col ) * finalDiffuse +"+"       vec3( col ) * finalSpecular,"+"       col[3] );"+"   }"+"   else{"+"     vFrontColor = vec4( "+"       uMaterialEmissive + "+"       (vec3(col) * uMaterialAmbient * finalAmbient ) + "+"       (vec3(col) * finalDiffuse) + "+"       (uMaterialSpecular * finalSpecular), "+"       col[3] );"+"    }"+"  }"+"  vTexture.xy = aTexture.xy;"+"  gl_Position = uProjection * uView * uModel * vec4( aVertex, 1.0 );"+"}";var ld="#ifdef GL_ES\n"+"precision highp float;\n"+"#endif\n"+"varying vec4 vFrontColor;"+"uniform sampler2D uSampler;"+"uniform bool uUsingTexture;"+"varying vec2 vTexture;"+"void main(void){"+"  if( uUsingTexture ){"+"    gl_FragColor = vec4(texture2D(uSampler, vTexture.xy)) * vFrontColor;"+"  }"+"  else{"+"    gl_FragColor = vFrontColor;"+"  }"+"}";var rd=function(a,b,c){var d=a.createShader(a.VERTEX_SHADER);a.shaderSource(d,b);a.compileShader(d);if(!a.getShaderParameter(d,a.COMPILE_STATUS)){throw a.getShaderInfoLog(d)}var e=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(e,c);a.compileShader(e);if(!a.getShaderParameter(e,a.COMPILE_STATUS)){throw a.getShaderInfoLog(e)}var f=a.createProgram();a.attachShader(f,d);a.attachShader(f,e);a.linkProgram(f);if(!a.getProgramParameter(f,a.LINK_STATUS)){throw"Error linking shaders."}return f};var sd=function(a,b,c,d,e){return{x:a,y:b,w:c,h:d}};var td=sd;var ud=function(a,b,c,d,e){return{x:a,y:b,w:e?c:c-a,h:e?d:d-b}};var vd=function(a,b,c,d,e){return{x:a-c/2,y:b-d/2,w:c,h:d}};var wd=function(){};var xd=function(){};var yd=function(){};var zd=function(){};xd.prototype=new wd;xd.prototype.constructor=xd;yd.prototype=new wd;yd.prototype.constructor=yd;zd.prototype=new wd;zd.prototype.constructor=zd;wd.prototype.a3DOnlyFunction=e;var Ad={};var Bd=r.Character=function(a){if(typeof a==="string"&&a.length===1){this.code=a.charCodeAt(0)}else if(typeof a==="number"){this.code=a}else if(a instanceof Bd){this.code=a}else{this.code=NaN}return Ad[this.code]===d?Ad[this.code]=this:Ad[this.code]};Bd.prototype.toString=function(){return String.fromCharCode(this.code)};Bd.prototype.valueOf=function(){return this.code};var Cd=r.PShape=function(a){this.family=a||n.GROUP;this.visible=true;this.style=true;this.children=[];this.nameTable=[];this.params=[];this.name="";this.image=null;this.matrix=null;this.kind=null;this.close=null;this.width=null;this.height=null;this.parent=null};Cd.prototype={isVisible:function(){return this.visible},setVisible:function(a){this.visible=a},disableStyle:function(){this.style=false;for(var a=0,b=this.children.length;a<b;a++){this.children[a].disableStyle()}},enableStyle:function(){this.style=true;for(var a=0,b=this.children.length;a<b;a++){this.children[a].enableStyle()}},getFamily:function(){return this.family},getWidth:function(){return this.width},getHeight:function(){return this.height},setName:function(a){this.name=a},getName:function(){return this.name},draw:function(){if(this.visible){this.pre();this.drawImpl();this.post()}},drawImpl:function(){if(this.family===n.GROUP){this.drawGroup()}else if(this.family===n.PRIMITIVE){this.drawPrimitive()}else if(this.family===n.GEOMETRY){this.drawGeometry()}else if(this.family===n.PATH){this.drawPath()}},drawPath:function(){var a,b;if(this.vertices.length===0){return}r.beginShape();if(this.vertexCodes.length===0){if(this.vertices[0].length===2){for(a=0,b=this.vertices.length;a<b;a++){r.vertex(this.vertices[a][0],this.vertices[a][1])}}else{for(a=0,b=this.vertices.length;a<b;a++){r.vertex(this.vertices[a][0],this.vertices[a][1],this.vertices[a][2])}}}else{var c=0;if(this.vertices[0].length===2){for(a=0,b=this.vertexCodes.length;a<b;a++){if(this.vertexCodes[a]===n.VERTEX){r.vertex(this.vertices[c][0],this.vertices[c][1]);if(this.vertices[c]["moveTo"]===true){Uc[Uc.length-1]["moveTo"]=true}else if(this.vertices[c]["moveTo"]===false){Uc[Uc.length-1]["moveTo"]=false}r.breakShape=false;c++}else if(this.vertexCodes[a]===n.BEZIER_VERTEX){r.bezierVertex(this.vertices[c+0][0],this.vertices[c+0][1],this.vertices[c+1][0],this.vertices[c+1][1],this.vertices[c+2][0],this.vertices[c+2][1]);c+=3}else if(this.vertexCodes[a]===n.CURVE_VERTEX){r.curveVertex(this.vertices[c][0],this.vertices[c][1]);c++}else if(this.vertexCodes[a]===n.BREAK){r.breakShape=true}}}else{for(a=0,b=this.vertexCodes.length;a<b;a++){if(this.vertexCodes[a]===n.VERTEX){r.vertex(this.vertices[c][0],this.vertices[c][1],this.vertices[c][2]);if(this.vertices[c]["moveTo"]===true){Uc[Uc.length-1]["moveTo"]=true}else if(this.vertices[c]["moveTo"]===false){Uc[Uc.length-1]["moveTo"]=false}r.breakShape=false}else if(this.vertexCodes[a]===n.BEZIER_VERTEX){r.bezierVertex(this.vertices[c+0][0],this.vertices[c+0][1],this.vertices[c+0][2],this.vertices[c+1][0],this.vertices[c+1][1],this.vertices[c+1][2],this.vertices[c+2][0],this.vertices[c+2][1],this.vertices[c+2][2]);c+=3}else if(this.vertexCodes[a]===n.CURVE_VERTEX){r.curveVertex(this.vertices[c][0],this.vertices[c][1],this.vertices[c][2]);c++}else if(this.vertexCodes[a]===n.BREAK){r.breakShape=true}}}}r.endShape(this.close?n.CLOSE:n.OPEN)},drawGeometry:function(){var a,b;r.beginShape(this.kind);if(this.style){for(a=0,b=this.vertices.length;a<b;a++){r.vertex(this.vertices[a])}}else{for(a=0,b=this.vertices.length;a<b;a++){var c=this.vertices[a];if(c[2]===0){r.vertex(c[0],c[1])}else{r.vertex(c[0],c[1],c[2])}}}r.endShape()},drawGroup:function(){for(var a=0,b=this.children.length;a<b;a++){this.children[a].draw()}},drawPrimitive:function(){if(this.kind===n.POINT){r.point(this.params[0],this.params[1])}else if(this.kind===n.LINE){if(this.params.length===4){r.line(this.params[0],this.params[1],this.params[2],this.params[3])}else{r.line(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5])}}else if(this.kind===n.TRIANGLE){r.triangle(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5])}else if(this.kind===n.QUAD){r.quad(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5],this.params[6],this.params[7])}else if(this.kind===n.RECT){if(this.image!==null){var a=td;r.imageMode(n.CORNER);r.image(this.image,this.params[0],this.params[1],this.params[2],this.params[3]);td=a}else{var b=Q;r.rectMode(n.CORNER);r.rect(this.params[0],this.params[1],this.params[2],this.params[3]);Q=b}}else if(this.kind===n.ELLIPSE){var c=R;r.ellipseMode(n.CORNER);r.ellipse(this.params[0],this.params[1],this.params[2],this.params[3]);R=c}else if(this.kind===n.ARC){var d=R;r.ellipseMode(n.CORNER);r.arc(this.params[0],this.params[1],this.params[2],this.params[3],this.params[4],this.params[5]);R=d}else if(this.kind===n.BOX){if(this.params.length===1){r.box(this.params[0])}else{r.box(this.params[0],this.params[1],this.params[2])}}else if(this.kind===n.SPHERE){r.sphere(this.params[0])}},pre:function(){if(this.matrix){r.pushMatrix();s.transform(this.matrix.elements[0],this.matrix.elements[3],this.matrix.elements[1],this.matrix.elements[4],this.matrix.elements[2],this.matrix.elements[5])}if(this.style){r.pushStyle();this.styles()}},post:function(){if(this.matrix){r.popMatrix()}if(this.style){r.popStyle()}},styles:function(){if(this.stroke){r.stroke(this.strokeColor);r.strokeWeight(this.strokeWeight);r.strokeCap(this.strokeCap);r.strokeJoin(this.strokeJoin)}else{r.noStroke()}if(this.fill){r.fill(this.fillColor)}else{r.noFill()}},getChild:function(a){var b,c;if(typeof a==="number"){return this.children[a]}var d;if(a===""||this.name===a){return this}if(this.nameTable.length>0){for(b=0,c=this.nameTable.length;b<c||d;b++){if(this.nameTable[b].getName===a){d=this.nameTable[b];break}}if(d){return d}}for(b=0,c=this.children.length;b<c;b++){d=this.children[b].getChild(a);if(d){return d}}return null},getChildCount:function(){return this.children.length},addChild:function(a){this.children.push(a);a.parent=this;if(a.getName()!==null){this.addName(a.getName(),a)}},addName:function(a,b){if(this.parent!==null){this.parent.addName(a,b)}else{this.nameTable.push([a,b])}},translate:function(){if(arguments.length===2){this.checkMatrix(2);this.matrix.translate(arguments[0],arguments[1])}else{this.checkMatrix(3);this.matrix.translate(arguments[0],arguments[1],0)}},checkMatrix:function(a){if(this.matrix===null){if(a===2){this.matrix=new r.PMatrix2D}else{this.matrix=new r.PMatrix3D}}else if(a===3&&this.matrix instanceof r.PMatrix2D){this.matrix=new r.PMatrix3D}},rotateX:function(a){this.rotate(a,1,0,0)},rotateY:function(a){this.rotate(a,0,1,0)},rotateZ:function(a){this.rotate(a,0,0,1)},rotate:function(){if(arguments.length===1){this.checkMatrix(2);this.matrix.rotate(arguments[0])}else{this.checkMatrix(3);this.matrix.rotate(arguments[0],arguments[1],arguments[2],arguments[3])}},scale:function(){if(arguments.length===2){this.checkMatrix(2);this.matrix.scale(arguments[0],arguments[1])}else if(arguments.length===3){this.checkMatrix(2);this.matrix.scale(arguments[0],arguments[1],arguments[2])}else{this.checkMatrix(2);this.matrix.scale(arguments[0])}},resetMatrix:function(){this.checkMatrix(2);this.matrix.reset()},applyMatrix:function(a){if(arguments.length===1){this.applyMatrix(a.elements[0],a.elements[1],0,a.elements[2],a.elements[3],a.elements[4],0,a.elements[5],0,0,1,0,0,0,0,1)}else if(arguments.length===6){this.checkMatrix(2);this.matrix.apply(arguments[0],arguments[1],arguments[2],0,arguments[3],arguments[4],arguments[5],0,0,0,1,0,0,0,0,1)}else if(arguments.length===16){this.checkMatrix(3);this.matrix.apply(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11],arguments[12],arguments[13],arguments[14],arguments[15])}}};var Dd=r.PShapeSVG=function(){r.PShape.call(this);if(arguments.length===1){this.element=arguments[0];this.vertexCodes=[];this.vertices=[];this.opacity=1;this.stroke=false;this.strokeColor=n.ALPHA_MASK;this.strokeWeight=1;this.strokeCap=n.SQUARE;this.strokeJoin=n.MITER;this.strokeGradient=null;this.strokeGradientPaint=null;this.strokeName=null;this.strokeOpacity=1;this.fill=true;this.fillColor=n.ALPHA_MASK;this.fillGradient=null;this.fillGradientPaint=null;this.fillName=null;this.fillOpacity=1;if(this.element.getName()!=="svg"){throw"root is not <svg>, it's <"+this.element.getName()+">"}}else if(arguments.length===2){if(typeof arguments[1]==="string"){if(arguments[1].indexOf(".svg")>-1){this.element=new r.XMLElement(r,arguments[1]);this.vertexCodes=[];this.vertices=[];this.opacity=1;this.stroke=false;this.strokeColor=n.ALPHA_MASK;this.strokeWeight=1;this.strokeCap=n.SQUARE;this.strokeJoin=n.MITER;this.strokeGradient="";this.strokeGradientPaint="";this.strokeName="";this.strokeOpacity=1;this.fill=true;this.fillColor=n.ALPHA_MASK;this.fillGradient=null;this.fillGradientPaint=null;this.fillOpacity=1}}else{if(arguments[0]){this.element=arguments[1];this.vertexCodes=arguments[0].vertexCodes.slice();this.vertices=arguments[0].vertices.slice();this.stroke=arguments[0].stroke;this.strokeColor=arguments[0].strokeColor;this.strokeWeight=arguments[0].strokeWeight;this.strokeCap=arguments[0].strokeCap;this.strokeJoin=arguments[0].strokeJoin;this.strokeGradient=arguments[0].strokeGradient;this.strokeGradientPaint=arguments[0].strokeGradientPaint;this.strokeName=arguments[0].strokeName;this.fill=arguments[0].fill;this.fillColor=arguments[0].fillColor;this.fillGradient=arguments[0].fillGradient;this.fillGradientPaint=arguments[0].fillGradientPaint;this.fillName=arguments[0].fillName;this.strokeOpacity=arguments[0].strokeOpacity;this.fillOpacity=arguments[0].fillOpacity;this.opacity=arguments[0].opacity}}}this.name=this.element.getStringAttribute("id");var a=this.element.getStringAttribute("display","inline");this.visible=a!=="none";var b=this.element.getAttribute("transform");if(b){this.matrix=this.parseMatrix(b)}var c=this.element.getStringAttribute("viewBox");if(c!==null){var d=c.split(" ");this.width=d[2];this.height=d[3]}var e=this.element.getStringAttribute("width");var f=this.element.getStringAttribute("height");if(e!==null){this.width=this.parseUnitSize(e);this.height=this.parseUnitSize(f)}else{if(this.width===0||this.height===0){this.width=1;this.height=1;throw"The width and/or height is not "+"readable in the <svg> tag of this file."}}this.parseColors(this.element);this.parseChildren(this.element)};Dd.prototype=new Cd;Dd.prototype.parseMatrix=function(){function a(a){var b=[];a.replace(/\((.*?)\)/,function(){return function(a,c){b=c.replace(/,+/g," ").split(/\s+/)}}());return b}return function(b){this.checkMatrix(2);var c=[];b.replace(/\s*(\w+)\((.*?)\)/g,function(a){c.push(r.trim(a))});if(c.length===0){return null}for(var d=0,e=c.length;d<e;d++){var f=a(c[d]);if(c[d].indexOf("matrix")!==-1){this.matrix.set(f[0],f[2],f[4],f[1],f[3],f[5])}else if(c[d].indexOf("translate")!==-1){var g=f[0];var h=f.length===2?f[1]:0;this.matrix.translate(g,h)}else if(c[d].indexOf("scale")!==-1){var i=f[0];var j=f.length===2?f[1]:f[0];this.matrix.scale(i,j)}else if(c[d].indexOf("rotate")!==-1){var k=f[0];if(f.length===1){this.matrix.rotate(r.radians(k))}else if(f.length===3){this.matrix.translate(f[1],f[2]);this.matrix.rotate(r.radians(f[0]));this.matrix.translate(-f[1],-f[2])}}else if(c[d].indexOf("skewX")!==-1){this.matrix.skewX(parseFloat(f[0]))}else if(c[d].indexOf("skewY")!==-1){this.matrix.skewY(f[0])}}return this.matrix}}();Dd.prototype.parseChildren=function(a){var b=a.getChildren();var c=new r.PShape;for(var d=0,e=b.length;d<e;d++){var f=this.parseChild(b[d]);if(f){c.addChild(f)}}this.children.push(c)};Dd.prototype.getName=function(){return this.name};Dd.prototype.parseChild=function(a){var b=a.getName();var c;if(b==="g"){c=new Dd(this,a)}else if(b==="defs"){c=new Dd(this,a)}else if(b==="line"){c=new Dd(this,a);c.parseLine()}else if(b==="circle"){c=new Dd(this,a);c.parseEllipse(true)}else if(b==="ellipse"){c=new Dd(this,a);c.parseEllipse(false)}else if(b==="rect"){c=new Dd(this,a);c.parseRect()}else if(b==="polygon"){c=new Dd(this,a);c.parsePoly(true)}else if(b==="polyline"){c=new Dd(this,a);c.parsePoly(false)}else if(b==="path"){c=new Dd(this,a);c.parsePath()}else if(b==="radialGradient"){q("PShapeSVG.prototype.parseChild, name = radialGradient")}else if(b==="linearGradient"){q("PShapeSVG.prototype.parseChild, name = linearGradient")}else if(b==="text"){q("PShapeSVG.prototype.parseChild, name = text")}else if(b==="filter"){q("PShapeSVG.prototype.parseChild, name = filter")}else if(b==="mask"){q("PShapeSVG.prototype.parseChild, name = mask")}else{e()}return c};Dd.prototype.parsePath=function(){this.family=n.PATH;this.kind=0;var a=[];var b;var c=r.trim(this.element.getStringAttribute("d").replace(/[\s,]+/g," "));if(c===null){return}c=r.__toCharArray(c);var d=0,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,o=0,p=0,q=0,s=0,t=0,u=0;var v="";var w=[];var x=false;var y;var z;var A,B;while(t<c.length){u=c[t].valueOf();if(u>=65&&u<=90||u>=97&&u<=122){A=t;t++;if(t<c.length){w=[];u=c[t].valueOf();while(!(u>=65&&u<=90||u>=97&&u<=100||u>=102&&u<=122)&&x===false){if(u===32){if(v!==""){w.push(parseFloat(v));v=""}t++}else if(u===45){if(c[t-1].valueOf()===101){v+=c[t].toString();t++}else{if(v!==""){w.push(parseFloat(v))}v=c[t].toString();t++}}else{v+=c[t].toString();t++}if(t===c.length){x=true}else{u=c[t].valueOf()}}}if(v!==""){w.push(parseFloat(v));v=""}z=c[A];u=z.valueOf();if(u===77){if(w.length>=2&&w.length%2===0){d=w[0];e=w[1];this.parsePathMoveto(d,e);if(w.length>2){for(A=2,B=w.length;A<B;A+=2){d=w[A];e=w[A+1];this.parsePathLineto(d,e)}}}}else if(u===109){if(w.length>=2&&w.length%2===0){d+=w[0];e+=w[1];this.parsePathMoveto(d,e);if(w.length>2){for(A=2,B=w.length;A<B;A+=2){d+=w[A];e+=w[A+1];this.parsePathLineto(d,e)}}}}else if(u===76){if(w.length>=2&&w.length%2===0){for(A=0,B=w.length;A<B;A+=2){d=w[A];e=w[A+1];this.parsePathLineto(d,e)}}}else if(u===108){if(w.length>=2&&w.length%2===0){for(A=0,B=w.length;A<B;A+=2){d+=w[A];e+=w[A+1];this.parsePathLineto(d,e)}}}else if(u===72){for(A=0,B=w.length;A<B;A++){d=w[A];this.parsePathLineto(d,e)}}else if(u===104){for(A=0,B=w.length;A<B;A++){d+=w[A];this.parsePathLineto(d,e)}}else if(u===86){for(A=0,B=w.length;A<B;A++){e=w[A];this.parsePathLineto(d,e)}}else if(u===118){for(A=0,B=w.length;A<B;A++){e+=w[A];this.parsePathLineto(d,e)}}else if(u===67){if(w.length>=6&&w.length%6===0){for(A=0,B=w.length;A<B;A+=6){h=w[A];j=w[A+1];i=w[A+2];k=w[A+3];l=w[A+4];m=w[A+5];this.parsePathCurveto(h,j,i,k,l,m);d=l;e=m}}}else if(u===99){if(w.length>=6&&w.length%6===0){for(A=0,B=w.length;A<B;A+=6){h=d+w[A];j=e+w[A+1];i=d+w[A+2];k=e+w[A+3];l=d+w[A+4];m=e+w[A+5];this.parsePathCurveto(h,j,i,k,l,m);d=l;e=m}}}else if(u===83){if(w.length>=4&&w.length%4===0){for(A=0,B=w.length;A<B;A+=4){if(y.toLowerCase()==="c"||y.toLowerCase()==="s"){o=this.vertices[this.vertices.length-2][0];p=this.vertices[this.vertices.length-2][1];q=this.vertices[this.vertices.length-1][0];s=this.vertices[this.vertices.length-1][1];h=q+(q-o);j=s+(s-p)}else{h=this.vertices[this.vertices.length-1][0];j=this.vertices[this.vertices.length-1][1]}i=w[A];k=w[A+1];l=w[A+2];m=w[A+3];this.parsePathCurveto(h,j,i,k,l,m);d=l;e=m}}}else if(u===115){if(w.length>=4&&w.length%4===0){for(A=0,B=w.length;A<B;A+=4){if(y.toLowerCase()==="c"||y.toLowerCase()==="s"){o=this.vertices[this.vertices.length-2][0];p=this.vertices[this.vertices.length-2][1];q=this.vertices[this.vertices.length-1][0];s=this.vertices[this.vertices.length-1][1];h=q+(q-o);j=s+(s-p)}else{h=this.vertices[this.vertices.length-1][0];j=this.vertices[this.vertices.length-1][1]}i=d+w[A];k=e+w[A+1];l=d+w[A+2];m=e+w[A+3];this.parsePathCurveto(h,j,i,k,l,m);d=l;e=m}}}else if(u===81){if(w.length>=4&&w.length%4===0){for(A=0,B=w.length;A<B;A+=4){f=w[A];g=w[A+1];l=w[A+2];m=w[A+3];this.parsePathQuadto(d,e,f,g,l,m);d=l;e=m}}}else if(u===113){if(w.length>=4&&w.length%4===0){for(A=0,B=w.length;A<B;A+=4){f=d+w[A];g=e+w[A+1];l=d+w[A+2];m=e+w[A+3];this.parsePathQuadto(d,e,f,g,l,m);d=l;e=m}}}else if(u===84){if(w.length>=2&&w.length%2===0){for(A=0,B=w.length;A<B;A+=2){if(y.toLowerCase()==="q"||y.toLowerCase()==="t"){o=this.vertices[this.vertices.length-2][0];p=this.vertices[this.vertices.length-2][1];q=this.vertices[this.vertices.length-1][0];s=this.vertices[this.vertices.length-1][1];f=q+(q-o);g=s+(s-p)}else{f=d;g=e}l=w[A];m=w[A+1];this.parsePathQuadto(d,e,f,g,l,m);d=l;e=m}}}else if(u===116){if(w.length>=2&&w.length%2===0){for(A=0,B=w.length;A<B;A+=2){if(y.toLowerCase()==="q"||y.toLowerCase()==="t"){o=this.vertices[this.vertices.length-2][0];p=this.vertices[this.vertices.length-2][1];q=this.vertices[this.vertices.length-1][0];s=this.vertices[this.vertices.length-1][1];f=q+(q-o);g=s+(s-p)}else{f=d;g=e}l=d+w[A];m=e+w[A+1];this.parsePathQuadto(d,e,f,g,l,m);d=l;e=m}}}else if(u===90||u===122){this.close=true}y=z.toString()}else{t++}}};Dd.prototype.parsePathQuadto=function(a,b,c,d,e,f){if(this.vertices.length>0){this.parsePathCode(n.BEZIER_VERTEX);this.parsePathVertex(a+(c-a)*2/3,b+(d-b)*2/3);this.parsePathVertex(e+(c-e)*2/3,f+(d-f)*2/3);this.parsePathVertex(e,f)}else{throw"Path must start with M/m"}};Dd.prototype.parsePathCurveto=function(a,b,c,d,e,f){if(this.vertices.length>0){this.parsePathCode(n.BEZIER_VERTEX);this.parsePathVertex(a,b);this.parsePathVertex(c,d);this.parsePathVertex(e,f)}else{throw"Path must start with M/m"}};Dd.prototype.parsePathLineto=function(a,b){if(this.vertices.length>0){this.parsePathCode(n.VERTEX);this.parsePathVertex(a,b);this.vertices[this.vertices.length-1]["moveTo"]=false}else{throw"Path must start with M/m"}};Dd.prototype.parsePathMoveto=function(a,b){if(this.vertices.length>0){this.parsePathCode(n.BREAK)}this.parsePathCode(n.VERTEX);this.parsePathVertex(a,b);this.vertices[this.vertices.length-1]["moveTo"]=true};Dd.prototype.parsePathVertex=function(a,b){var c=[];c[0]=a;c[1]=b;this.vertices.push(c)};Dd.prototype.parsePathCode=function(a){this.vertexCodes.push(a)};Dd.prototype.parsePoly=function(a){this.family=n.PATH;this.close=a;var b=r.trim(this.element.getStringAttribute("points").replace(/[,\s]+/g," "));if(b!==null){var c=b.split(" ");if(c.length%2===0){for(var d=0,e=c.length;d<e;d++){var f=[];f[0]=c[d];f[1]=c[++d];this.vertices.push(f)}}else{throw"Error parsing polygon points: odd number of coordinates provided"}}};Dd.prototype.parseRect=function(){this.kind=n.RECT;this.family=n.PRIMITIVE;this.params=[];this.params[0]=this.element.getFloatAttribute("x");this.params[1]=this.element.getFloatAttribute("y");this.params[2]=this.element.getFloatAttribute("width");this.params[3]=this.element.getFloatAttribute("height");if(this.params[2]<0||this.params[3]<0){throw"svg error: negative width or height found while parsing <rect>"}};Dd.prototype.parseEllipse=function(a){this.kind=n.ELLIPSE;this.family=n.PRIMITIVE;this.params=[];this.params[0]=this.element.getFloatAttribute("cx")|0;this.params[1]=this.element.getFloatAttribute("cy")|0;var b,c;if(a){b=c=this.element.getFloatAttribute("r");if(b<0){throw"svg error: negative radius found while parsing <circle>"}}else{b=this.element.getFloatAttribute("rx");c=this.element.getFloatAttribute("ry");if(b<0||c<0){throw"svg error: negative x-axis radius or y-axis radius found while parsing <ellipse>"}}this.params[0]-=b;this.params[1]-=c;this.params[2]=b*2;this.params[3]=c*2};Dd.prototype.parseLine=function(){this.kind=n.LINE;this.family=n.PRIMITIVE;this.params=[];this.params[0]=this.element.getFloatAttribute("x1");this.params[1]=this.element.getFloatAttribute("y1");this.params[2]=this.element.getFloatAttribute("x2");this.params[3]=this.element.getFloatAttribute("y2")};Dd.prototype.parseColors=function(a){if(a.hasAttribute("opacity")){this.setOpacity(a.getAttribute("opacity"))}if(a.hasAttribute("stroke")){this.setStroke(a.getAttribute("stroke"))}if(a.hasAttribute("stroke-width")){this.setStrokeWeight(a.getAttribute("stroke-width"))}if(a.hasAttribute("stroke-linejoin")){this.setStrokeJoin(a.getAttribute("stroke-linejoin"))}if(a.hasAttribute("stroke-linecap")){this.setStrokeCap(a.getStringAttribute("stroke-linecap"))}if(a.hasAttribute("fill")){this.setFill(a.getStringAttribute("fill"))}if(a.hasAttribute("style")){var b=a.getStringAttribute("style");var c=b.toString().split(";");for(var d=0,e=c.length;d<e;d++){var f=r.trim(c[d].split(":"));if(f[0]==="fill"){this.setFill(f[1])}else if(f[0]==="fill-opacity"){this.setFillOpacity(f[1])}else if(f[0]==="stroke"){this.setStroke(f[1])}else if(f[0]==="stroke-width"){this.setStrokeWeight(f[1])}else if(f[0]==="stroke-linecap"){this.setStrokeCap(f[1])}else if(f[0]==="stroke-linejoin"){this.setStrokeJoin(f[1])}else if(f[0]==="stroke-opacity"){this.setStrokeOpacity(f[1])}else if(f[0]==="opacity"){this.setOpacity(f[1])}}}};Dd.prototype.setFillOpacity=function(a){this.fillOpacity=parseFloat(a);this.fillColor=this.fillOpacity*255<<24|this.fillColor&16777215};Dd.prototype.setFill=function(a){var b=this.fillColor&4278190080;if(a==="none"){this.fill=false}else if(a.indexOf("#")===0){this.fill=true;if(a.length===4){a=a.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")}this.fillColor=b|parseInt(a.substring(1),16)&16777215}else if(a.indexOf("rgb")===0){this.fill=true;this.fillColor=b|this.parseRGB(a)}else if(a.indexOf("url(#")===0){this.fillName=a.substring(5,a.length-1)}else if(y[a]){this.fill=true;this.fillColor=b|parseInt(y[a].substring(1),16)&16777215}};Dd.prototype.setOpacity=function(a){this.strokeColor=parseFloat(a)*255<<24|this.strokeColor&16777215;this.fillColor=parseFloat(a)*255<<24|this.fillColor&16777215};Dd.prototype.setStroke=function(a){var b=this.strokeColor&4278190080;if(a==="none"){this.stroke=false}else if(a.charAt(0)==="#"){this.stroke=true;if(a.length===4){a=a.replace(/#(.)(.)(.)/,"#$1$1$2$2$3$3")}this.strokeColor=b|parseInt(a.substring(1),16)&16777215}else if(a.indexOf("rgb")===0){this.stroke=true;this.strokeColor=b|this.parseRGB(a)}else if(a.indexOf("url(#")===0){this.strokeName=a.substring(5,a.length-1)}else if(y[a]){this.stroke=true;this.strokeColor=b|parseInt(y[a].substring(1),16)&16777215}};Dd.prototype.setStrokeWeight=function(a){this.strokeWeight=this.parseUnitSize(a)};Dd.prototype.setStrokeJoin=function(a){if(a==="miter"){this.strokeJoin=n.MITER}else if(a==="round"){this.strokeJoin=n.ROUND}else if(a==="bevel"){this.strokeJoin=n.BEVEL}};Dd.prototype.setStrokeCap=function(a){if(a==="butt"){this.strokeCap=n.SQUARE}else if(a==="round"){this.strokeCap=n.ROUND}else if(a==="square"){this.strokeCap=n.PROJECT}};Dd.prototype.setStrokeOpacity=function(a){this.strokeOpacity=parseFloat(a);this.strokeColor=this.strokeOpacity*255<<24|this.strokeColor&16777215};Dd.prototype.parseRGB=function(a){var b=a.substring(a.indexOf("(")+1,a.indexOf(")"));var c=b.split(", ");return c[0]<<16|c[1]<<8|c[2]};Dd.prototype.parseUnitSize=function(a){var b=a.length-2;if(b<0){return a}if(a.indexOf("pt")===b){return parseFloat(a.substring(0,b))*1.25}if(a.indexOf("pc")===b){return parseFloat(a.substring(0,b))*15}if(a.indexOf("mm")===b){return parseFloat(a.substring(0,b))*3.543307}if(a.indexOf("cm")===b){return parseFloat(a.substring(0,b))*35.43307}if(a.indexOf("in")===b){return parseFloat(a.substring(0,b))*90}if(a.indexOf("px")===b){return parseFloat(a.substring(0,b))}return parseFloat(a)};r.shape=function(a,b,c,d,e){if(arguments.length>=1&&arguments[0]!==null){if(a.isVisible()){r.pushMatrix();if($c===n.CENTER){if(arguments.length===5){r.translate(b-d/2,c-e/2);r.scale(d/a.getWidth(),e/a.getHeight())}else if(arguments.length===3){r.translate(b-a.getWidth()/2,-a.getHeight()/2)}else{r.translate(-a.getWidth()/2,-a.getHeight()/2)}}else if($c===n.CORNER){if(arguments.length===5){r.translate(b,c);r.scale(d/a.getWidth(),e/a.getHeight())}else if(arguments.length===3){r.translate(b,c)}}else if($c===n.CORNERS){if(arguments.length===5){d-=b;e-=c;r.translate(b,c);r.scale(d/a.getWidth(),e/a.getHeight())}else if(arguments.length===3){r.translate(b,c)}}a.draw();if(arguments.length===1&&$c===n.CENTER||arguments.length>1){r.popMatrix()}}}};r.shapeMode=function(a){$c=a};r.loadShape=function(a){if(arguments.length===1){if(a.indexOf(".svg")>-1){return new Dd(null,a)}}return null};var Ed=function(a,b,c,d,e){this.fullName=a||"";this.name=b||"";this.namespace=c||"";this.value=d;this.type=e};Ed.prototype={getName:function(){return this.name},getFullName:function(){return this.fullName},getNamespace:function(){return this.namespace},getValue:function(){return this.value},getType:function(){return this.type},setValue:function(a){this.value=a}};var Fd=r.XMLElement=function(a,b,c,e){this.attributes=[];this.children=[];this.fullName=null;this.name=null;this.namespace="";this.content=null;this.parent=null;this.lineNr="";this.systemID="";this.type="ELEMENT";if(a){if(typeof a==="string"){if(b===d&&a.indexOf("<")>-1){this.parse(a)}else{this.fullName=a;this.namespace=b;this.systemId=c;this.lineNr=e}}else{this.parse(b)}}};Fd.prototype={parse:function(a){var b;try{var c=a.substring(a.length-4);if(c===".xml"||c===".svg"){a=g(a)}b=(new DOMParser).parseFromString(a,"text/xml");var d=b.documentElement;if(d){this.parseChildrenRecursive(null,d)}else{throw"Error loading document"}return this}catch(e){throw e}},parseChildrenRecursive:function(a,b){var c,d,e,f,g,h;if(!a){this.fullName=b.localName;this.name=b.nodeName;c=this}else{c=new Fd(b.nodeName);c.parent=a}if(b.nodeType===3&&b.textContent!==""){return this.createPCDataElement(b.textContent)}for(f=0,g=b.attributes.length;f<g;f++){e=b.attributes[f];d=new Ed(e.getname,e.nodeName,e.namespaceURI,e.nodeValue,e.nodeType);c.attributes.push(d)}for(f=0,g=b.childNodes.length;f<g;f++){var i=b.childNodes[f];if(i.nodeType===1||i.nodeType===3){h=c.parseChildrenRecursive(c,i);if(h!==null){c.children.push(h)}}}return c},createElement:function(a,b,c,e){if(c===d){return new Fd(a,b)}return new Fd(a,b,c,e)},createPCDataElement:function(a){if(a.replace(/^\s+$/g,"")===""){return null}var b=new Fd;b.content=a;b.type="TEXT";return b},hasAttribute:function(){if(arguments.length===1){return this.getAttribute(arguments[0])!==null}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])!==null}},equals:function(a){if(!(a instanceof Fd)){return false}var b,c;if(this.fullName!==a.fullName){return false}if(this.attributes.length!==a.getAttributeCount()){return false}if(this.attributes.length!==a.attributes.length){return false}var d,e,f,g,h;for(b=0,c=this.attributes.length;b<c;b++){d=this.attributes[b].getName();e=this.attributes[b].getNamespace();h=a.findAttribute(d,e);if(h===null){return false}if(this.attributes[b].getValue()!==h.getValue()){return false}if(this.attributes[b].getType()!==h.getType()){return false}}if(this.children.length!==a.getChildCount()){return false}if(this.children.length>0){var i,j;for(b=0,c=this.children.length;b<c;b++){i=this.getChild(b);j=a.getChild(b);if(!i.equals(j)){return false}}return true}return this.content===a.content},getContent:function(){if(this.type==="TEXT"){return this.content}var a=this.children;if(a.length===1&&a[0].type==="TEXT"){return a[0].content}return null},getAttribute:function(){var a;if(arguments.length===2){a=this.findAttribute(arguments[0]);if(a){return a.getValue()}return arguments[1]}else if(arguments.length===1){a=this.findAttribute(arguments[0]);if(a){return a.getValue()}return null}else if(arguments.length===3){a=this.findAttribute(arguments[0],arguments[1]);if(a){return a.getValue()}return arguments[2]}},getStringAttribute:function(){if(arguments.length===1){return this.getAttribute(arguments[0])}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])}return this.getAttribute(arguments[0],arguments[1],arguments[2])},getString:function(a){return this.getStringAttribute(a)},getFloatAttribute:function(){if(arguments.length===1){return parseFloat(this.getAttribute(arguments[0],0))}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])}return this.getAttribute(arguments[0],arguments[1],arguments[2])},getFloat:function(a){return this.getFloatAttribute(a)},getIntAttribute:function(){if(arguments.length===1){return this.getAttribute(arguments[0],0)}if(arguments.length===2){return this.getAttribute(arguments[0],arguments[1])}return this.getAttribute(arguments[0],arguments[1],arguments[2])},getInt:function(a){return this.getIntAttribute(a)},hasChildren:function(){return this.children.length>0},addChild:function(a){if(a!==null){a.parent=this;this.children.push(a)}},insertChild:function(a,b){if(a){if(a.getLocalName()===null&&!this.hasChildren()){var c=this.children[this.children.length-1];if(c.getLocalName()===null){c.setContent(c.getContent()+a.getContent());return}}a.parent=this;this.children.splice(b,0,a)}},getChild:function(a){if(typeof a==="number"){return this.children[a]}if(a.indexOf("/")!==-1){return this.getChildRecursive(a.split("/"),0)}var b,c;for(var d=0,e=this.getChildCount();d<e;d++){b=this.getChild(d);c=b.getName();if(c!==null&&c===a){return b}}return null},getChildren:function(){if(arguments.length===1){if(typeof arguments[0]==="number"){return this.getChild(arguments[0])}if(arguments[0].indexOf("/")!==-1){return this.getChildrenRecursive(arguments[0].split("/"),0)}var a=[];var b,c;for(var d=0,e=this.getChildCount();d<e;d++){b=this.getChild(d);c=b.getName();if(c!==null&&c===arguments[0]){a.push(b)}}return a}return this.children},getChildCount:function(){return this.children.length},getChildRecursive:function(a,b){if(b===a.length){return this}var c,d,e=a[b];for(var f=0,g=this.getChildCount();f<g;f++){c=this.getChild(f);d=c.getName();if(d!==null&&d===e){return c.getChildRecursive(a,b+1)}}return null},getChildrenRecursive:function(a,b){if(b===a.length-1){return this.getChildren(a[b])}var c=this.getChildren(a[b]);var d=[];for(var e=0;e<c.length;e++){d=d.concat(c[e].getChildrenRecursive(a,b+1))}return d},isLeaf:function(){return!this.hasChildren()},listChildren:function(){var a=[];for(var b=0,c=this.children.length;b<c;b++){a.push(this.getChild(b).getName())}return a},removeAttribute:function(a,b){this.namespace=b||"";for(var c=0,d=this.attributes.length;c<d;c++){if(this.attributes[c].getName()===a&&this.attributes[c].getNamespace()===this.namespace){this.attributes.splice(c,1);break}}},removeChild:function(a){if(a){for(var b=0,c=this.children.length;b<c;b++){if(this.children[b].equals(a)){this.children.splice(b,1);break}}}},removeChildAtIndex:function(a){if(this.children.length>a){this.children.splice(a,1)}},findAttribute:function(a,b){this.namespace=b||"";for(var c=0,d=this.attributes.length;c<d;c++){if(this.attributes[c].getName()===a&&this.attributes[c].getNamespace()===this.namespace){return this.attributes[c]}}return null},setAttribute:function(){var a;if(arguments.length===3){var b=arguments[0].indexOf(":");var c=arguments[0].substring(b+1);a=this.findAttribute(c,arguments[1]);if(a){a.setValue(arguments[2])}else{a=new Ed(arguments[0],c,arguments[1],arguments[2],"CDATA");this.attributes.push(a)}}else{a=this.findAttribute(arguments[0]);if(a){a.setValue(arguments[1])}else{a=new Ed(arguments[0],arguments[0],null,arguments[1],"CDATA");this.attributes.push(a)}}},setString:function(a,b){this.setAttribute(a,b)},setInt:function(a,b){this.setAttribute(a,b)},setFloat:function(a,b){this.setAttribute(a,b)},setContent:function(a){if(this.children.length>0){F.debug("Tried to set content for XMLElement with children")}this.content=a},setName:function(){if(arguments.length===1){this.name=arguments[0];this.fullName=arguments[0];this.namespace=null}else{var a=arguments[0].indexOf(":");if(arguments[1]===null||a<0){this.name=arguments[0]}else{this.name=arguments[0].substring(a+1)}this.fullName=arguments[0];this.namespace=arguments[1]}},getName:function(){return this.fullName},getLocalName:function(){return this.name},getAttributeCount:function(){return this.attributes.length},toString:function(){if(this.type==="TEXT"){return this.content}var a=this.fullName;var b="<"+a;var c,d;for(c=0;c<this.attributes.length;c++){var e=this.attributes[c];b+=" "+e.getName()+"="+'"'+e.getValue()+'"'}if(this.children.length===0){if(this.content===""){b+="/>"}else{b+=">"+this.content+"</"+a+">"}}else{b+=">";for(d=0;d<this.children.length;d++){b+=this.children[d].toString()}b+="</"+a+">"}return b}};Fd.parse=function(a){var b=new Fd;b.parse(a);return b};var Gd=function(a){var b=0;for(var d=0;d<a.length;d++){if(d!==0){b=c.max(b,c.abs(a[d]))}else{b=c.abs(a[d])}}var e=(b+"").indexOf(".");if(e===0){e=1}else if(e===-1){e=(b+"").length}return e};var Hd=r.PMatrix2D=function(){if(arguments.length===0){this.reset()}else if(arguments.length===1&&arguments[0]instanceof Hd){this.set(arguments[0].array())}else if(arguments.length===6){this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}};Hd.prototype={set:function(){if(arguments.length===6){var a=arguments;this.set([a[0],a[1],a[2],a[3],a[4],a[5]])}else if(arguments.length===1&&arguments[0]instanceof Hd){this.elements=arguments[0].array()}else if(arguments.length===1&&arguments[0]instanceof Array){this.elements=arguments[0].slice()}},get:function(){var a=new Hd;a.set(this.elements);return a},reset:function(){this.set([1,0,0,0,1,0])},array:function(){return this.elements.slice()},translate:function(a,b){this.elements[2]=a*this.elements[0]+b*this.elements[1]+this.elements[2];this.elements[5]=a*this.elements[3]+b*this.elements[4]+this.elements[5]},invTranslate:function(a,b){this.translate(-a,-b)},transpose:function(){},mult:function(a,b){var c,d;if(a instanceof t){c=a.x;d=a.y;if(!b){b=new t}}else if(a instanceof Array){c=a[0];d=a[1];if(!b){b=[]}}if(b instanceof Array){b[0]=this.elements[0]*c+this.elements[1]*d+this.elements[2];b[1]=this.elements[3]*c+this.elements[4]*d+this.elements[5]}else if(b instanceof t){b.x=this.elements[0]*c+this.elements[1]*d+this.elements[2];b.y=this.elements[3]*c+this.elements[4]*d+this.elements[5];b.z=0}return b},multX:function(a,b){return a*this.elements[0]+b*this.elements[1]+this.elements[2]},multY:function(a,b){return a*this.elements[3]+b*this.elements[4]+this.elements[5]},skewX:function(a){this.apply(1,0,1,a,0,0)},skewY:function(a){this.apply(1,0,1,0,a,0)},determinant:function(){return this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3]},invert:function(){var a=this.determinant();if(c.abs(a)>n.MIN_INT){var b=this.elements[0];var d=this.elements[1];var e=this.elements[2];var f=this.elements[3];var g=this.elements[4];var h=this.elements[5];this.elements[0]=g/a;this.elements[3]=-f/a;this.elements[1]=-d/a;this.elements[4]=b/a;this.elements[2]=(d*h-g*e)/a;this.elements[5]=(f*e-b*h)/a;return true}return false},scale:function(a,b){if(a&&!b){b=a}if(a&&b){this.elements[0]*=a;this.elements[1]*=b;this.elements[3]*=a;this.elements[4]*=b}},invScale:function(a,b){if(a&&!b){b=a}this.scale(1/a,1/b)},apply:function(){var a;if(arguments.length===1&&arguments[0]instanceof Hd){a=arguments[0].array()}else if(arguments.length===6){a=Array.prototype.slice.call(arguments)}else if(arguments.length===1&&arguments[0]instanceof Array){a=arguments[0]}var b=[0,0,this.elements[2],0,0,this.elements[5]];var c=0;for(var d=0;d<2;d++){for(var e=0;e<3;e++,c++){b[c]+=this.elements[d*3+0]*a[e+0]+this.elements[d*3+1]*a[e+3]}}this.elements=b.slice()},preApply:function(){var a;if(arguments.length===1&&arguments[0]instanceof Hd){a=arguments[0].array()}else if(arguments.length===6){a=Array.prototype.slice.call(arguments)}else if(arguments.length===1&&arguments[0]instanceof Array){a=arguments[0]}var b=[0,0,a[2],0,0,a[5]];b[2]=a[2]+this.elements[2]*a[0]+this.elements[5]*a[1];b[5]=a[5]+this.elements[2]*a[3]+this.elements[5]*a[4];b[0]=this.elements[0]*a[0]+this.elements[3]*a[1];b[3]=this.elements[0]*a[3]+this.elements[3]*a[4];b[1]=this.elements[1]*a[0]+this.elements[4]*a[1];b[4]=this.elements[1]*a[3]+this.elements[4]*a[4];this.elements=b.slice()},rotate:function(a){var b=c.cos(a);var d=c.sin(a);var e=this.elements[0];var f=this.elements[1];this.elements[0]=b*e+d*f;this.elements[1]=-d*e+b*f;e=this.elements[3];f=this.elements[4];this.elements[3]=b*e+d*f;this.elements[4]=-d*e+b*f},rotateZ:function(a){this.rotate(a)},invRotateZ:function(a){this.rotateZ(a-c.PI)},print:function(){var a=Gd(this.elements);var b=""+r.nfs(this.elements[0],a,4)+" "+r.nfs(this.elements[1],a,4)+" "+r.nfs(this.elements[2],a,4)+"\n"+r.nfs(this.elements[3],a,4)+" "+r.nfs(this.elements[4],a,4)+" "+r.nfs(this.elements[5],a,4)+"\n\n";r.println(b)}};var Id=r.PMatrix3D=function(){this.reset()};Id.prototype={set:function(){if(arguments.length===16){this.elements=Array.prototype.slice.call(arguments)}else if(arguments.length===1&&arguments[0]instanceof Id){this.elements=arguments[0].array()}else if(arguments.length===1&&arguments[0]instanceof Array){this.elements=arguments[0].slice()}},get:function(){var a=new Id;a.set(this.elements);return a},reset:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},array:function(){return this.elements.slice()},translate:function(a,b,c){if(c===d){c=0}this.elements[3]+=a*this.elements[0]+b*this.elements[1]+c*this.elements[2];this.elements[7]+=a*this.elements[4]+b*this.elements[5]+c*this.elements[6];this.elements[11]+=a*this.elements[8]+b*this.elements[9]+c*this.elements[10];this.elements[15]+=a*this.elements[12]+b*this.elements[13]+c*this.elements[14]},transpose:function(){var a=this.elements[4];this.elements[4]=this.elements[1];this.elements[1]=a;a=this.elements[8];this.elements[8]=this.elements[2];this.elements[2]=a;a=this.elements[6];this.elements[6]=this.elements[9];this.elements[9]=a;a=this.elements[3];this.elements[3]=this.elements[12];this.elements[12]=a;a=this.elements[7];this.elements[7]=this.elements[13];this.elements[13]=a;a=this.elements[11];this.elements[11]=this.elements[14];this.elements[14]=a},mult:function(a,b){var c,d,e,f;if(a instanceof t){c=a.x;d=a.y;e=a.z;f=1;if(!b){b=new t}}else if(a instanceof Array){c=a[0];d=a[1];e=a[2];f=a[3]||1;if(!b||b.length!==3&&b.length!==4){b=[0,0,0]}}if(b instanceof Array){if(b.length===3){b[0]=this.elements[0]*c+this.elements[1]*d+this.elements[2]*e+this.elements[3];b[1]=this.elements[4]*c+this.elements[5]*d+this.elements[6]*e+this.elements[7];b[2]=this.elements[8]*c+this.elements[9]*d+this.elements[10]*e+this.elements[11]}else if(b.length===4){b[0]=this.elements[0]*c+this.elements[1]*d+this.elements[2]*e+this.elements[3]*f;b[1]=this.elements[4]*c+this.elements[5]*d+this.elements[6]*e+this.elements[7]*f;b[2]=this.elements[8]*c+this.elements[9]*d+this.elements[10]*e+this.elements[11]*f;b[3]=this.elements[12]*c+this.elements[13]*d+this.elements[14]*e+this.elements[15]*f}}if(b instanceof t){b.x=this.elements[0]*c+this.elements[1]*d+this.elements[2]*e+this.elements[3];b.y=this.elements[4]*c+this.elements[5]*d+this.elements[6]*e+this.elements[7];b.z=this.elements[8]*c+this.elements[9]*d+this.elements[10]*e+this.elements[11]}return b},preApply:function(){var a;if(arguments.length===1&&arguments[0]instanceof Id){a=arguments[0].array()}else if(arguments.length===16){a=Array.prototype.slice.call(arguments)}else if(arguments.length===1&&arguments[0]instanceof Array){a=arguments[0]}var b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var c=0;for(var d=0;d<4;d++){for(var e=0;e<4;e++,c++){b[c]+=this.elements[e+0]*a[d*4+0]+this.elements[e+4]*a[d*4+1]+this.elements[e+8]*a[d*4+2]+this.elements[e+12]*a[d*4+3]}}this.elements=b.slice()},apply:function(){var a;if(arguments.length===1&&arguments[0]instanceof Id){a=arguments[0].array()}else if(arguments.length===16){a=Array.prototype.slice.call(arguments)}else if(arguments.length===1&&arguments[0]instanceof Array){a=arguments[0]}var b=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var c=0;for(var d=0;d<4;d++){for(var e=0;e<4;e++,c++){b[c]+=this.elements[d*4+0]*a[e+0]+this.elements[d*4+1]*a[e+4]+this.elements[d*4+2]*a[e+8]+this.elements[d*4+3]*a[e+12]}}this.elements=b.slice()},rotate:function(a,b,c,d){if(!c){this.rotateZ(a)}else{var e=r.cos(a);var f=r.sin(a);var g=1-e;this.apply(g*b*b+e,g*b*c-f*d,g*b*d+f*c,0,g*b*c+f*d,g*c*c+e,g*c*d-f*b,0,g*b*d-f*c,g*c*d+f*b,g*d*d+e,0,0,0,0,1)}},invApply:function(){if(Jc===d){Jc=new Id}var a=arguments;Jc.set(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]);if(!Jc.invert()){return false}this.preApply(Jc);return true},rotateX:function(a){var b=r.cos(a);var c=r.sin(a);this.apply([1,0,0,0,0,b,-c,0,0,c,b,0,0,0,0,1])},rotateY:function(a){var b=r.cos(a);var c=r.sin(a);this.apply([b,0,c,0,0,1,0,0,-c,0,b,0,0,0,0,1])},rotateZ:function(a){var b=c.cos(a);var d=c.sin(a);this.apply([b,-d,0,0,d,b,0,0,0,0,1,0,0,0,0,1])},scale:function(a,b,c){if(a&&!b&&!c){b=c=a}else if(a&&b&&!c){c=1}if(a&&b&&c){this.elements[0]*=a;this.elements[1]*=b;this.elements[2]*=c;this.elements[4]*=a;this.elements[5]*=b;this.elements[6]*=c;this.elements[8]*=a;this.elements[9]*=b;this.elements[10]*=c;this.elements[12]*=a;this.elements[13]*=b;this.elements[14]*=c}},skewX:function(a){var b=c.tan(a);this.apply(1,b,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},skewY:function(a){var b=c.tan(a);this.apply(1,0,0,0,b,1,0,0,0,0,1,0,0,0,0,1)},multX:function(a,b,c,d){if(!c){return this.elements[0]*a+this.elements[1]*b+this.elements[3]}if(!d){return this.elements[0]*a+this.elements[1]*b+this.elements[2]*c+this.elements[3]}return this.elements[0]*a+this.elements[1]*b+this.elements[2]*c+this.elements[3]*d},multY:function(a,b,c,d){if(!c){return this.elements[4]*a+this.elements[5]*b+this.elements[7]}if(!d){return this.elements[4]*a+this.elements[5]*b+this.elements[6]*c+this.elements[7]}return this.elements[4]*a+this.elements[5]*b+this.elements[6]*c+this.elements[7]*d},multZ:function(a,b,c,d){if(!d){return this.elements[8]*a+this.elements[9]*b+this.elements[10]*c+this.elements[11]}return this.elements[8]*a+this.elements[9]*b+this.elements[10]*c+this.elements[11]*d},multW:function(a,b,c,d){if(!d){return this.elements[12]*a+this.elements[13]*b+this.elements[14]*c+this.elements[15]}return this.elements[12]*a+this.elements[13]*b+this.elements[14]*c+this.elements[15]*d},invert:function(){var a=this.elements[0]*this.elements[5]-this.elements[1]*this.elements[4];var b=this.elements[0]*this.elements[6]-this.elements[2]*this.elements[4];var d=this.elements[0]*this.elements[7]-this.elements[3]*this.elements[4];var e=this.elements[1]*this.elements[6]-this.elements[2]*this.elements[5];var f=this.elements[1]*this.elements[7]-this.elements[3]*this.elements[5];var g=this.elements[2]*this.elements[7]-this.elements[3]*this.elements[6];var h=this.elements[8]*this.elements[13]-this.elements[9]*this.elements[12];var i=this.elements[8]*this.elements[14]-this.elements[10]*this.elements[12];var j=this.elements[8]*this.elements[15]-this.elements[11]*this.elements[12];var k=this.elements[9]*this.elements[14]-this.elements[10]*this.elements[13];var l=this.elements[9]*this.elements[15]-this.elements[11]*this.elements[13];var m=this.elements[10]*this.elements[15]-this.elements[11]*this.elements[14];var n=a*m-b*l+d*k+e*j-f*i+g*h;if(c.abs(n)<=1e-9){return false}var o=[];o[0]=+this.elements[5]*m-this.elements[6]*l+this.elements[7]*k;o[4]=-this.elements[4]*m+this.elements[6]*j-this.elements[7]*i;o[8]=+this.elements[4]*l-this.elements[5]*j+this.elements[7]*h;o[12]=-this.elements[4]*k+this.elements[5]*i-this.elements[6]*h;o[1]=-this.elements[1]*m+this.elements[2]*l-this.elements[3]*k;o[5]=+this.elements[0]*m-this.elements[2]*j+this.elements[3]*i;o[9]=-this.elements[0]*l+this.elements[1]*j-this.elements[3]*h;o[13]=+this.elements[0]*k-this.elements[1]*i+this.elements[2]*h;o[2]=+this.elements[13]*g-this.elements[14]*f+this.elements[15]*e;o[6]=-this.elements[12]*g+this.elements[14]*d-this.elements[15]*b;o[10]=+this.elements[12]*f-this.elements[13]*d+this.elements[15]*a;o[14]=-this.elements[12]*e+this.elements[13]*b-this.elements[14]*a;o[3]=-this.elements[9]*g+this.elements[10]*f-this.elements[11]*e;o[7]=+this.elements[8]*g-this.elements[10]*d+this.elements[11]*b;o[11]=-this.elements[8]*f+this.elements[9]*d-this.elements[11]*a;o[15]=+this.elements[8]*e-this.elements[9]*b+this.elements[10]*a;var p=1/n;o[0]*=p;o[1]*=p;o[2]*=p;o[3]*=p;o[4]*=p;o[5]*=p;o[6]*=p;o[7]*=p;o[8]*=p;o[9]*=p;o[10]*=p;o[11]*=p;o[12]*=p;o[13]*=p;o[14]*=p;o[15]*=p;this.elements=o.slice();return true},toString:function(){var a="";for(var b=0;b<15;b++){a+=this.elements[b]+", "}a+=this.elements[15];return a},print:function(){var a=Gd(this.elements);var b=""+r.nfs(this.elements[0],a,4)+" "+r.nfs(this.elements[1],a,4)+" "+r.nfs(this.elements[2],a,4)+" "+r.nfs(this.elements[3],a,4)+"\n"+r.nfs(this.elements[4],a,4)+" "+r.nfs(this.elements[5],a,4)+" "+r.nfs(this.elements[6],a,4)+" "+r.nfs(this.elements[7],a,4)+"\n"+r.nfs(this.elements[8],a,4)+" "+r.nfs(this.elements[9],a,4)+" "+r.nfs(this.elements[10],a,4)+" "+r.nfs(this.elements[11],a,4)+"\n"+r.nfs(this.elements[12],a,4)+" "+r.nfs(this.elements[13],a,4)+" "+r.nfs(this.elements[14],a,4)+" "+r.nfs(this.elements[15],a,4)+"\n\n";r.println(b)},invTranslate:function(a,b,c){this.preApply(1,0,0,-a,0,1,0,-b,0,0,1,-c,0,0,0,1)},invRotateX:function(a){var b=c.cos(-a);var d=c.sin(-a);this.preApply([1,0,0,0,0,b,-d,0,0,d,b,0,0,0,0,1])},invRotateY:function(a){var b=c.cos(-a);var d=c.sin(-a);this.preApply([b,0,d,0,0,1,0,0,-d,0,b,0,0,0,0,1])},invRotateZ:function(a){var b=c.cos(-a);var d=c.sin(-a);this.preApply([b,-d,0,0,d,b,0,0,0,0,1,0,0,0,0,1])},invScale:function(a,b,c){this.preApply([1/a,0,0,0,0,1/b,0,0,0,0,1/c,0,0,0,0,1])}};var Jd=r.PMatrixStack=function(){this.matrixStack=[]};Jd.prototype.load=function(){var a=w.$newPMatrix();if(arguments.length===1){a.set(arguments[0])}else{a.set(arguments)}this.matrixStack.push(a)};xd.prototype.$newPMatrix=function(){return new Hd};yd.prototype.$newPMatrix=function(){return new Id};Jd.prototype.push=function(){this.matrixStack.push(this.peek())};Jd.prototype.pop=function(){return this.matrixStack.pop()};Jd.prototype.peek=function(){var a=w.$newPMatrix();a.set(this.matrixStack[this.matrixStack.length-1]);return a};Jd.prototype.mult=function(a){this.matrixStack[this.matrixStack.length-1].apply(a)};r.split=function(a,b){return a.split(b)};r.splitTokens=function(a,b){if(b===d){return a.split(/\s+/g)}var c=b.split(/()/g),e="",f=a.length,g,h,i=[];for(g=0;g<f;g++){h=a[g];if(c.indexOf(h)>-1){if(e!==""){i.push(e)}e=""}else{e+=h}}if(e!==""){i.push(e)}return i};r.append=function(a,b){a[a.length]=b;return a};r.concat=function(a,b){return a.concat(b)};r.sort=function(a,b){var c=[];if(a.length>0){var d=b>0?b:a.length;for(var e=0;e<d;e++){c.push(a[e])}if(typeof a[0]==="string"){c.sort()}else{c.sort(function(a,b){return a-b})}if(b>0){for(var f=c.length;f<a.length;f++){c.push(a[f])}}}return c};r.splice=function(a,b,c){if(b.length===0){return a}if(b instanceof Array){for(var d=0,e=c;d<b.length;e++,d++){a.splice(e,0,b[d])}}else{a.splice(c,0,b)}return a};r.subset=function(a,b,c){var e=c!==d?b+c:a.length;return a.slice(b,e)};r.join=function(a,b){return a.join(b)};r.shorten=function(a){var b=[];var c=a.length;for(var d=0;d<c;d++){b[d]=a[d]}b.pop();return b};r.expand=function(a,b){var c=a.slice(0),d=b||a.length*2;c.length=d;return c};r.arrayCopy=function(){var a,b=0,c,e=0,f;if(arguments.length===2){a=arguments[0];c=arguments[1];f=a.length}else if(arguments.length===3){a=arguments[0];c=arguments[1];f=arguments[2]}else if(arguments.length===5){a=arguments[0];b=arguments[1];c=arguments[2];e=arguments[3];f=arguments[4]}for(var g=b,h=e;g<f+b;g++,h++){if(c[h]!==d){c[h]=a[g]}else{throw"array index out of bounds exception"}}};r.reverse=function(a){return a.reverse()};r.mix=function(a,b,c){return a+((b-a)*c>>8)};r.peg=function(a){return a<0?0:a>255?255:a};r.modes=function(){function h(a,b,c,d,e,g,h,i,j,k,l){var m=f(((a&4278190080)>>>24)+b,255)<<24;var n=c+((j-c)*b>>8);n=(n<0?0:n>255?255:n)<<16;var o=d+((k-d)*b>>8);o=(o<0?0:o>255?255:o)<<8;var p=e+((l-e)*b>>8);p=p<0?0:p>255?255:p;return m|n|o|p}var a=n.ALPHA_MASK,b=n.RED_MASK,d=n.GREEN_MASK,e=n.BLUE_MASK,f=c.min,g=c.max;return{replace:function(a,b){return b},blend:function(c,g){var h=(g&a)>>>24,i=c&b,j=c&d,k=c&e,l=g&b,m=g&d,n=g&e;return f(((c&a)>>>24)+h,255)<<24|i+((l-i)*h>>8)&b|j+((m-j)*h>>8)&d|k+((n-k)*h>>8)&e},add:function(c,g){var h=(g&a)>>>24;return f(((c&a)>>>24)+h,255)<<24|f((c&b)+((g&b)>>8)*h,b)&b|f((c&d)+((g&d)>>8)*h,d)&d|f((c&e)+((g&e)*h>>8),e)},subtract:function(c,h){var i=(h&a)>>>24;return f(((c&a)>>>24)+i,255)<<24|g((c&b)-((h&b)>>8)*i,d)&b|g((c&d)-((h&d)>>8)*i,e)&d|g((c&e)-((h&e)*i>>8),0)},lightest:function(c,h){var i=(h&a)>>>24;return f(((c&a)>>>24)+i,255)<<24|g(c&b,((h&b)>>8)*i)&b|g(c&d,((h&d)>>8)*i)&d|g(c&e,(h&e)*i>>8)},darkest:function(c,g){var h=(g&a)>>>24,i=c&b,j=c&d,k=c&e,l=f(c&b,((g&b)>>8)*h),m=f(c&d,((g&d)>>8)*h),n=f(c&e,(g&e)*h>>8);return f(((c&a)>>>24)+h,255)<<24|i+((l-i)*h>>8)&b|j+((m-j)*h>>8)&d|k+((n-k)*h>>8)&e},difference:function(c,f){var g=(f&a)>>>24,i=(c&b)>>16,j=(c&d)>>8,k=c&e,l=(f&b)>>16,m=(f&d)>>8,n=f&e,o=i>l?i-l:l-i,p=j>m?j-m:m-j,q=k>n?k-n:n-k;return h(c,g,i,j,k,l,m,n,o,p,q)},exclusion:function(c,f){var g=(f&a)>>>24,i=(c&b)>>16,j=(c&d)>>8,k=c&e,l=(f&b)>>16,m=(f&d)>>8,n=f&e,o=i+l-(i*l>>7),p=j+m-(j*m>>7),q=k+n-(k*n>>7);return h(c,g,i,j,k,l,m,n,o,p,q)},multiply:function(c,f){var g=(f&a)>>>24,i=(c&b)>>16,j=(c&d)>>8,k=c&e,l=(f&b)>>16,m=(f&d)>>8,n=f&e,o=i*l>>8,p=j*m>>8,q=k*n>>8;return h(c,g,i,j,k,l,m,n,o,p,q)},screen:function(c,f){var g=(f&a)>>>24,i=(c&b)>>16,j=(c&d)>>8,k=c&e,l=(f&b)>>16,m=(f&d)>>8,n=f&e,o=255-((255-i)*(255-l)>>8),p=255-((255-j)*(255-m)>>8),q=255-((255-k)*(255-n)>>8);return h(c,g,i,j,k,l,m,n,o,p,q)},hard_light:function(c,f){var g=(f&a)>>>24,i=(c&b)>>16,j=(c&d)>>8,k=c&e,l=(f&b)>>16,m=(f&d)>>8,n=f&e,o=l<128?i*l>>7:255-((255-i)*(255-l)>>7),p=m<128?j*m>>7:255-((255-j)*(255-m)>>7),q=n<128?k*n>>7:255-((255-k)*(255-n)>>7);return h(c,g,i,j,k,l,m,n,o,p,q)},soft_light:function(c,f){var g=(f&a)>>>24,i=(c&b)>>16,j=(c&d)>>8,k=c&e,l=(f&b)>>16,m=(f&d)>>8,n=f&e,o=(i*l>>7)+(i*i>>8)-(i*i*l>>15),p=(j*m>>7)+(j*j>>8)-(j*j*m>>15),q=(k*n>>7)+(k*k>>8)-(k*k*n>>15);return h(c,g,i,j,k,l,m,n,o,p,q)},overlay:function(c,f){var g=(f&a)>>>24,i=(c&b)>>16,j=(c&d)>>8,k=c&e,l=(f&b)>>16,m=(f&d)>>8,n=f&e,o=i<128?i*l>>7:255-((255-i)*(255-l)>>7),p=j<128?j*m>>7:255-((255-j)*(255-m)>>7),q=k<128?k*n>>7:255-((255-k)*(255-n)>>7);return h(c,g,i,j,k,l,m,n,o,p,q)},dodge:function(c,f){var g=(f&a)>>>24,i=(c&b)>>16,j=(c&d)>>8,k=c&e,l=(f&b)>>16,m=(f&d)>>8,n=f&e;var o=255;if(l!==255){o=(i<<8)/(255-l);o=o<0?0:o>255?255:o}var p=255;if(m!==255){p=(j<<8)/(255-m);p=p<0?0:p>255?255:p}var q=255;if(n!==255){q=(k<<8)/(255-n);q=q<0?0:q>255?255:q}return h(c,g,i,j,k,l,m,n,o,p,q)},burn:function(c,f){var g=(f&a)>>>24,i=(c&b)>>16,j=(c&d)>>8,k=c&e,l=(f&b)>>16,m=(f&d)>>8,n=f&e;var o=0;if(l!==0){o=(255-i<<8)/l;o=255-(o<0?0:o>255?255:o)}var p=0;if(m!==0){p=(255-j<<8)/m;p=255-(p<0?0:p>255?255:p)}var q=0;if(n!==0){q=(255-k<<8)/n;q=255-(q<0?0:q>255?255:q)}return h(c,g,i,j,k,l,m,n,o,p,q)}}}();r.color=function(a,b,c,e){if(a!==d&&b!==d&&c!==d&&e!==d){return Kd(a,b,c,e)}if(a!==d&&b!==d&&c!==d){return Kd(a,b,c,gb)}if(a!==d&&b!==d){return Ld(a,b)}if(typeof a==="number"){return Md(a)}return Kd(hb,ib,jb,gb)};r.color.toString=function(a){return"rgba("+((a&n.RED_MASK)>>>16)+","+((a&n.GREEN_MASK)>>>8)+","+(a&n.BLUE_MASK)+","+((a&n.ALPHA_MASK)>>>24)/255+")"};r.color.toInt=function(a,b,c,d){return d<<24&n.ALPHA_MASK|a<<16&n.RED_MASK|b<<8&n.GREEN_MASK|c&n.BLUE_MASK};r.color.toArray=function(a){return[(a&n.RED_MASK)>>>16,(a&n.GREEN_MASK)>>>8,a&n.BLUE_MASK,(a&n.ALPHA_MASK)>>>24]};r.color.toGLArray=function(a){return[((a&n.RED_MASK)>>>16)/255,((a&n.GREEN_MASK)>>>8)/255,(a&n.BLUE_MASK)/255,((a&n.ALPHA_MASK)>>>24)/255]};r.color.toRGB=function(a,b,d){a=a>hb?hb:a;b=b>ib?ib:b;d=d>jb?jb:d;a=a/hb*360;b=b/ib*100;d=d/jb*100;var e=c.round(d/100*255);if(b===0){return[e,e,e]}var f=a%360;var g=f%60;var h=c.round(d*(100-b)/1e4*255);var i=c.round(d*(6e3-b*g)/6e5*255);var j=c.round(d*(6e3-b*(60-g))/6e5*255);switch(c.floor(f/60)){case 0:return[e,j,h];case 1:return[i,e,h];case 2:return[h,e,j];case 3:return[h,i,e];case 4:return[j,h,e];case 5:return[e,h,i]}};r.brightness=function(a){return Nd(a)[2]};r.saturation=function(a){return Nd(a)[1]};r.hue=function(a){return Nd(a)[0]};r.red=function(a){return((a&n.RED_MASK)>>>16)/255*hb};r.green=function(a){return((a&n.GREEN_MASK)>>>8)/255*ib};r.blue=function(a){return(a&n.BLUE_MASK)/255*jb};r.alpha=function(a){return((a&n.ALPHA_MASK)>>>24)/255*gb};r.lerpColor=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,o,p;var q,s,t,u,v;var w=r.color(a);var x=r.color(b);if(ob===n.HSB){q=Nd(w);k=((w&n.ALPHA_MASK)>>>24)/gb;s=Nd(x);p=((x&n.ALPHA_MASK)>>>24)/gb;u=r.lerp(q[0],s[0],c);v=r.lerp(q[1],s[1],c);f=r.lerp(q[2],s[2],c);t=r.color.toRGB(u,v,f);g=r.lerp(k,p,c)*gb;return g<<24&n.ALPHA_MASK|t[0]<<16&n.RED_MASK|t[1]<<8&n.GREEN_MASK|t[2]&n.BLUE_MASK}h=(w&n.RED_MASK)>>>16;i=(w&n.GREEN_MASK)>>>8;j=w&n.BLUE_MASK;k=((w&n.ALPHA_MASK)>>>24)/gb;l=(x&n.RED_MASK)>>>16;m=(x&n.GREEN_MASK)>>>8;o=x&n.BLUE_MASK;p=((x&n.ALPHA_MASK)>>>24)/gb;d=r.lerp(h,l,c)|0;e=r.lerp(i,m,c)|0;f=r.lerp(j,o,c)|0;g=r.lerp(k,p,c)*gb;return g<<24&n.ALPHA_MASK|d<<16&n.RED_MASK|e<<8&n.GREEN_MASK|f&n.BLUE_MASK};r.colorMode=function(){ob=arguments[0];if(arguments.length>1){hb=arguments[1];ib=arguments[2]||arguments[1];jb=arguments[3]||arguments[1];gb=arguments[4]||arguments[1]}};r.blendColor=function(a,b,c){if(c===n.REPLACE){return r.modes.replace(a,b)}else if(c===n.BLEND){return r.modes.blend(a,b)}else if(c===n.ADD){return r.modes.add(a,b)}else if(c===n.SUBTRACT){return r.modes.subtract(a,b)}else if(c===n.LIGHTEST){return r.modes.lightest(a,b)}else if(c===n.DARKEST){return r.modes.darkest(a,b)}else if(c===n.DIFFERENCE){return r.modes.difference(a,b)}else if(c===n.EXCLUSION){return r.modes.exclusion(a,b)}else if(c===n.MULTIPLY){return r.modes.multiply(a,b)}else if(c===n.SCREEN){return r.modes.screen(a,b)}else if(c===n.HARD_LIGHT){return r.modes.hard_light(a,b)}else if(c===n.SOFT_LIGHT){return r.modes.soft_light(a,b)}else if(c===n.OVERLAY){return r.modes.overlay(a,b)}else if(c===n.DODGE){return r.modes.dodge(a,b)}else if(c===n.BURN){return r.modes.burn(a,b)}};r.printMatrix=function(){Fc.print()};xd.prototype.translate=function(a,b){Fc.translate(a,b);Gc.invTranslate(a,b);s.translate(a,b)};yd.prototype.translate=function(a,b,c){Fc.translate(a,b,c);Gc.invTranslate(a,b,c)};xd.prototype.scale=function(a,b){Fc.scale(a,b);Gc.invScale(a,b);s.scale(a,b||a)};yd.prototype.scale=function(a,b,c){Fc.scale(a,b,c);Gc.invScale(a,b,c)};xd.prototype.pushMatrix=function(){Hc.load(Fc);Ic.load(Gc);Od()};yd.prototype.pushMatrix=function(){Hc.load(Fc);Ic.load(Gc)};xd.prototype.popMatrix=function(){Fc.set(Hc.pop());Gc.set(Ic.pop());Pd()};yd.prototype.popMatrix=function(){Fc.set(Hc.pop());Gc.set(Ic.pop())};xd.prototype.resetMatrix=function(){Fc.reset();Gc.reset();s.setTransform(1,0,0,1,0,0)};yd.prototype.resetMatrix=function(){Fc.reset();Gc.reset()};wd.prototype.applyMatrix=function(){var a=arguments;Fc.apply(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]);Gc.invApply(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15])};xd.prototype.applyMatrix=function(){var a=arguments;for(var b=a.length;b<16;b++){a[b]=0}a[10]=a[15]=1;wd.prototype.applyMatrix.apply(this,a)};r.rotateX=function(a){Fc.rotateX(a);Gc.invRotateX(a)};xd.prototype.rotateZ=function(){throw"rotateZ() is not supported in 2D mode. Use rotate(float) instead."};yd.prototype.rotateZ=function(a){Fc.rotateZ(a);Gc.invRotateZ(a)};r.rotateY=function(a){Fc.rotateY(a);Gc.invRotateY(a)};xd.prototype.rotate=function(a){Fc.rotateZ(a);Gc.invRotateZ(a);s.rotate(a)};yd.prototype.rotate=function(a){r.rotateZ(a)};r.pushStyle=function(){Od();r.pushMatrix();var a={doFill:z,currentFillColor:D,doStroke:H,currentStrokeColor:J,curTint:pb,curRectMode:Q,curColorMode:ob,colorModeX:hb,colorModeZ:jb,colorModeY:ib,colorModeA:gb,curTextFont:gc,horizontalTextAlignment:$b,verticalTextAlignment:_b,textMode:ac,curFontName:bc,curTextSize:cc,curTextAscent:dc,curTextDescent:ec,curTextLeading:fc};_c.push(a)};r.popStyle=function(){var a=_c.pop();if(a){Pd();r.popMatrix();z=a.doFill;D=a.currentFillColor;H=a.doStroke;J=a.currentStrokeColor;pb=a.curTint;Q=a.curRectMode;ob=a.curColorMode;hb=a.colorModeX;jb=a.colorModeZ;ib=a.colorModeY;gb=a.colorModeA;gc=a.curTextFont;bc=a.curFontName;cc=a.curTextSize;$b=a.horizontalTextAlignment;_b=a.verticalTextAlignment;ac=a.textMode;dc=a.curTextAscent;ec=a.curTextDescent;fc=a.curTextLeading}else{throw"Too many popStyle() without enough pushStyle()"}};r.year=function(){return(new Date).getFullYear()};r.month=function(){return(new Date).getMonth()+1};r.day=function(){return(new Date).getDate()};r.hour=function(){return(new Date).getHours()};r.minute=function(){return(new Date).getMinutes()};r.second=function(){return(new Date).getSeconds()};r.millis=function(){return Date.now()-sb};xd.prototype.redraw=function(){Qd();s.lineWidth=L;var a=r.pmouseX,b=r.pmouseY;r.pmouseX=mb;r.pmouseY=nb;Od();r.draw();Pd();mb=r.mouseX;nb=r.mouseY;r.pmouseX=a;r.pmouseY=b};yd.prototype.redraw=function(){Qd();var a=r.pmouseX,b=r.pmouseY;r.pmouseX=mb;r.pmouseY=nb;s.clear(s.DEPTH_BUFFER_BIT);Cb={attributes:{},locations:{}};r.noLights();r.lightFalloff(1,0,0);r.shininess(1);r.ambient(255,255,255);r.specular(0,0,0);r.emissive(0,0,0);r.camera();r.draw();mb=r.mouseX;nb=r.mouseY;r.pmouseX=a;r.pmouseY=b};r.noLoop=function(){O=false;M=false;clearInterval(P);u.onPause()};r.loop=function(){if(M){return}tb=Date.now();ub=0;P=a.setInterval(function(){try{u.onFrameStart();r.redraw();u.onFrameEnd()}catch(b){a.clearInterval(P);throw b}},X);O=true;M=true;u.onLoop()};r.frameRate=function(a){W=a;X=1e3/W;if(O){r.noLoop();r.loop()}};var Rd=[];r.exit=function(){a.clearInterval(P);B(r.externals.canvas.id);for(var b in F.lib){if(F.lib.hasOwnProperty(b)){if(F.lib[b].hasOwnProperty("detach")){F.lib[b].detach(r)}}}var c=Rd.length;while(c--){Td(Rd[c])}u.onExit()};r.cursor=function(){if(arguments.length>1||arguments.length===1&&arguments[0]instanceof r.PImage){var a=arguments[0],b,c;if(arguments.length>=3){b=arguments[1];c=arguments[2];if(b<0||c<0||c>=a.height||b>=a.width){throw"x and y must be non-negative and less than the dimensions of the image"}}else{b=a.width>>>1;c=a.height>>>1}var d=a.toDataURL();var e='url("'+d+'") '+b+" "+c+", default";Y=i.style.cursor=e}else if(arguments.length===1){var f=arguments[0];Y=i.style.cursor=f}else{Y=i.style.cursor=Z}};r.noCursor=function(){Y=i.style.cursor=n.NOCURSOR};r.link=function(b,c){if(c!==d){a.open(b,c)}else{a.location=b}};r.beginDraw=e;r.endDraw=e;xd.prototype.toImageData=function(a,b,c,e){a=a!==d?a:0;b=b!==d?b:0;c=c!==d?c:r.width;e=e!==d?e:r.height;return s.getImageData(a,b,c,e)};yd.prototype.toImageData=function(a,e,f,g){a=a!==d?a:0;e=e!==d?e:0;f=f!==d?f:r.width;g=g!==d?g:r.height;var h=b.createElement("canvas"),i=h.getContext("2d"),j=i.createImageData(f,g),k=new m(f*g*4);s.readPixels(a,e,f,g,s.RGBA,s.UNSIGNED_BYTE,k);for(var l=0,n=k.length,o=j.data;l<n;l++){o[l]=k[(g-1-c.floor(l/4/f))*f*4+l%(f*4)]}return j};r.status=function(b){a.status=b};r.binary=function(a,b){var c;if(b>0){c=b}else if(a instanceof Bd){c=16;a|=0}else{c=32;while(c>1&&!(a>>>c-1&1)){c--}}var d="";while(c>0){d+=a>>>--c&1?"1":"0"}return d};r.unbinary=function(a){var b=a.length-1,c=1,d=0;while(b>=0){var e=a[b--];if(e!=="0"&&e!=="1"){throw"the value passed into unbinary was not an 8 bit binary number"}if(e==="1"){d+=c}c<<=1}return d};r.nf=function(a,b,c){return Vd(a,"","-",b,c)};r.nfs=function(a,b,c){return Vd(a," ","-",b,c)};r.nfp=function(a,b,c){return Vd(a,"+","-",b,c)};r.nfc=function(a,b,c){return Vd(a,"","-",b,c,",")};var Wd=function(a,b){b=b===d||b===null?b=8:b;if(a<0){a=4294967295+a+1}var c=Number(a).toString(16).toUpperCase();while(c.length<b){c="0"+c}if(c.length>=b){c=c.substring(c.length-b,c.length)}return c};r.hex=function(a,b){if(arguments.length===1){if(a instanceof Bd){b=4}else{b=8}}return Wd(a,b)};r.unhex=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++){b.push(Xd(a[c]))}return b}return Xd(a)};r.loadStrings=function(a){if(localStorage[a]){return localStorage[a].split("\n")}var b=g(a);if(typeof b!=="string"||b===""){return[]}b=b.replace(/(\r\n?)/g,"\n").replace(/\n$/,"");return b.split("\n")};r.saveStrings=function(a,b){localStorage[a]=b.join("\n")};r.loadBytes=function(a){var b=g(a);var c=[];for(var d=0;d<b.length;d++){c.push(b.charCodeAt(d))}return c};r.matchAll=function(a,b){var c=[],d;var e=new RegExp(b,"g");while((d=e.exec(a))!==null){c.push(d);if(d[0].length===0){++e.lastIndex}}return c.length>0?c:null};r.__contains=function(a,b){if(typeof a!=="string"){return a.contains.apply(a,Yd(arguments))}return a!==null&&b!==null&&typeof b==="string"&&a.indexOf(b)>-1};r.__replaceAll=function(a,b,c){if(typeof a!=="string"){return a.replaceAll.apply(a,Yd(arguments))}return a.replace(new RegExp(b,"g"),c)};r.__replaceFirst=function(a,b,c){if(typeof a!=="string"){return a.replaceFirst.apply(a,Yd(arguments))}return a.replace(new RegExp(b,""),c)};r.__replace=function(a,b,c){if(typeof a!=="string"){return a.replace.apply(a,Yd(arguments))}if(b instanceof RegExp){return a.replace(b,c)}if(typeof b!=="string"){b=b.toString()}if(b===""){return a}var d=a.indexOf(b);if(d<0){return a}var e=0,f="";do{f+=a.substring(e,d)+c;e=d+b.length}while((d=a.indexOf(b,e))>=0);return f+a.substring(e)};r.__equals=function(a,b){if(a.equals instanceof Function){return a.equals.apply(a,Yd(arguments))}return a.valueOf()===b.valueOf()};r.__equalsIgnoreCase=function(a,b){if(typeof a!=="string"){return a.equalsIgnoreCase.apply(a,Yd(arguments))}return a.toLowerCase()===b.toLowerCase()};r.__toCharArray=function(a){if(typeof a!=="string"){return a.toCharArray.apply(a,Yd(arguments))}var b=[];for(var c=0,d=a.length;c<d;++c){b[c]=new Bd(a.charAt(c))}return b};r.__split=function(a,b,c){if(typeof a!=="string"){return a.split.apply(a,Yd(arguments))}var e=new RegExp(b);if(c===d||c<1){return a.split(e)}var f=[],g=a,h;while((h=g.search(e))!==-1&&f.length<c-1){var i=e.exec(g).toString();f.push(g.substring(0,h));g=g.substring(h+i.length)}if(h!==-1||g!==""){f.push(g)}return f};r.__codePointAt=function(a,b){var c=a.charCodeAt(b),d,e;if(55296<=c&&c<=56319){d=c;e=a.charCodeAt(b+1);return(d-55296)*1024+(e-56320)+65536}return c};r.match=function(a,b){return a.match(b)};r.__startsWith=function(a,b,c){if(typeof a!=="string"){return a.startsWith.apply(a,Yd(arguments))}c=c||0;if(c<0||c>a.length){return false}return b===""||b===a?true:a.indexOf(b)===c};r.__endsWith=function(a,b){if(typeof a!=="string"){return a.endsWith.apply(a,Yd(arguments))}var c=b?b.length:0;return b===""||b===a?true:a.indexOf(b)===a.length-c};r.__hashCode=function(a){if(a.hashCode instanceof Function){return a.hashCode.apply(a,Yd(arguments))}return o(a)};r.__printStackTrace=function(a){r.println("Exception: "+a.toString())};var Zd=[];r.println=function(a){var b=Zd.length;if(b){F.logger.log(Zd.join(""));Zd.length=0}if(arguments.length===0&&b===0){F.logger.log("")}else if(arguments.length!==0){F.logger.log(a)}};r.print=function(a){Zd.push(a)};r.str=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++){b.push(a[c].toString()+"")}return b}return a.toString()+""};r.trim=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++){b.push(a[c].replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,""))}return b}return a.replace(/^\s*/,"").replace(/\s*$/,"").replace(/\r*$/,"")};r.parseBoolean=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++){b.push($d(a[c]))}return b}return $d(a)};r.parseByte=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++){b.push(0-(a[c]&128)|a[c]&127)}return b}return 0-(a&128)|a&127};r.parseChar=function(a){if(typeof a==="number"){return new Bd(String.fromCharCode(a&65535))}if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++){b.push(new Bd(String.fromCharCode(a[c]&65535)))}return b}throw"char() may receive only one argument of type int, byte, int[], or byte[]."};r.parseFloat=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++){b.push(_d(a[c]))}return b}return _d(a)};r.parseInt=function(a,b){if(a instanceof Array){var c=[];for(var d=0;d<a.length;d++){if(typeof a[d]==="string"&&!/^\s*[+\-]?\d+\s*$/.test(a[d])){c.push(0)}else{c.push(ae(a[d],b))}}return c}return ae(a,b)};r.__int_cast=function(a){return 0|a};r.__instanceof=function(a,b){if(typeof b!=="function"){throw"Function is expected as type argument for instanceof operator"}if(typeof a==="string"){return b===Object||b===String}if(a instanceof b){return true}if(typeof a!=="object"||a===null){return false}var c=a.constructor;if(b.$isInterface){var d=[];while(c){if(c.$interfaces){d=d.concat(c.$interfaces)}c=c.$base}while(d.length>0){var e=d.shift();if(e===b){return true}if(e.$interfaces){d=d.concat(e.$interfaces)}}return false}while(c.hasOwnProperty("$base")){c=c.$base;if(c===b){return true}}return false};r.abs=c.abs;r.ceil=c.ceil;r.constrain=function(a,b,c){return a>c?c:a<b?b:a};r.dist=function(){var a,b,d;if(arguments.length===4){a=arguments[0]-arguments[2];b=arguments[1]-arguments[3];return c.sqrt(a*a+b*b)}if(arguments.length===6){a=arguments[0]-arguments[3];b=arguments[1]-arguments[4];d=arguments[2]-arguments[5];return c.sqrt(a*a+b*b+d*d)}};r.exp=c.exp;r.floor=c.floor;r.lerp=function(a,b,c){return(b-a)*c+a};r.log=c.log;r.mag=function(a,b,d){if(d){return c.sqrt(a*a+b*b+d*d)}return c.sqrt(a*a+b*b)};r.map=function(a,b,c,d,e){return d+(e-d)*((a-b)/(c-b))};r.max=function(){if(arguments.length===2){return arguments[0]<arguments[1]?arguments[1]:arguments[0]}var a=arguments.length===1?arguments[0]:arguments;if(!("length"in a&&a.length>0)){throw"Non-empty array is expected"}var b=a[0],c=a.length;for(var d=1;d<c;++d){if(b<a[d]){b=a[d]}}return b};r.min=function(){if(arguments.length===2){return arguments[0]<arguments[1]?arguments[0]:arguments[1]}var a=arguments.length===1?arguments[0]:arguments;if(!("length"in a&&a.length>0)){throw"Non-empty array is expected"}var b=a[0],c=a.length;for(var d=1;d<c;++d){if(b>a[d]){b=a[d]}}return b};r.norm=function(a,b,c){return(a-b)/(c-b)};r.pow=c.pow;r.round=c.round;r.sq=function(a){return a*a};r.sqrt=c.sqrt;r.acos=c.acos;r.asin=c.asin;r.atan=c.atan;r.atan2=c.atan2;r.cos=c.cos;r.degrees=function(a){return a*180/c.PI};r.radians=function(a){return a/180*c.PI};r.sin=c.sin;r.tan=c.tan;var be=c.random;r.random=function(){if(arguments.length===0){return be()}if(arguments.length===1){return be()*arguments[0]}var a=arguments[0],b=arguments[1];return be()*(b-a)+a};ce.createRandomized=function(){var a=new Date;return new ce(a/6e4&4294967295,a&4294967295)};r.randomSeed=function(a){be=(new ce(a)).nextDouble};r.Random=function(a){var b=false,e,f;this.nextGaussian=function(){if(b){b=false;return e}var a,d,g;do{a=2*f()-1;d=2*f()-1;g=a*a+d*d}while(g>=1||g===0);var h=c.sqrt(-2*c.log(g)/g);e=d*h;b=true;return a*h};f=a===d?c.random:(new ce(a)).nextDouble};var ee={generator:d,octaves:4,fallout:.5,seed:d};r.noise=function(a,b,c){if(ee.generator===d){ee.generator=new de(ee.seed)}var e=ee.generator;var f=1,g=1,h=0;for(var i=0;i<ee.octaves;++i){f*=ee.fallout;switch(arguments.length){case 1:h+=f*(1+e.noise1d(g*a))/2;break;case 2:h+=f*(1+e.noise2d(g*a,g*b))/2;break;case 3:h+=f*(1+e.noise3d(g*a,g*b,g*c))/2;break}g*=2}return h};r.noiseDetail=function(a,b){ee.octaves=a;if(b!==d){ee.fallout=b}};r.noiseSeed=function(a){ee.seed=a;ee.generator=d};wd.prototype.size=function(a,b,d){if(H){r.stroke(0)}if(z){r.fill(255)}var e={fillStyle:s.fillStyle,strokeStyle:s.strokeStyle,lineCap:s.lineCap,lineJoin:s.lineJoin};if(i.style.length>0){i.style.removeProperty("width");i.style.removeProperty("height")}i.width=r.width=a||100;i.height=r.height=b||100;for(var f in e){if(e.hasOwnProperty(f)){s[f]=e[f]}}r.textFont(gc);r.background();lc=c.max(1e3,a*b*.05);r.externals.context=s;for(var g=0;g<n.SINCOS_LENGTH;g++){zc[g]=r.sin(g*(n.PI/180)*.5);Ac[g]=r.cos(g*(n.PI/180)*.5)}};xd.prototype.size=function(a,b,c){if(s===d){s=i.getContext("2d");Hc=new Jd;Ic=new Jd;Fc=new Hd;Gc=new Hd}wd.prototype.size.apply(this,arguments)};yd.prototype.size=function(){var a=false;return function(c,d,e){function f(a){var b=["experimental-webgl","webgl","webkit-3d"],c;for(var d=0,e=b.length;d<e;d++){c=a.getContext(b[d],{antialias:false});if(c){break}}return c}if(a){throw"Multiple calls to size() for 3D renders are not allowed."}a=true;try{i.width=r.width=c||100;i.height=r.height=d||100;s=f(i);Sb=s.createTexture();Tb=s.createTexture()}catch(g){F.debug(g)}if(!s){throw"WebGL context is not supported on this browser."}s.viewport(0,0,i.width,i.height);s.enable(s.DEPTH_TEST);s.enable(s.BLEND);s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA);Eb=rd(s,hd,id);Fb=rd(s,fd,gd);r.strokeWeight(1);Db=rd(s,kd,ld);s.useProgram(Db);nd("usingTexture3d",Db,"usingTexture",Wb);r.lightFalloff(1,0,0);r.shininess(1);r.ambient(255,255,255);r.specular(0,0,0);r.emissive(0,0,0);Gb=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,Gb);s.bufferData(s.ARRAY_BUFFER,ad,s.STATIC_DRAW);Hb=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,Hb);s.bufferData(s.ARRAY_BUFFER,cd,s.STATIC_DRAW);Ib=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,Ib);s.bufferData(s.ARRAY_BUFFER,bd,s.STATIC_DRAW);Jb=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,Jb);s.bufferData(s.ARRAY_BUFFER,dd,s.STATIC_DRAW);Kb=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,Kb);s.bufferData(s.ARRAY_BUFFER,ed,s.STATIC_DRAW);Lb=s.createBuffer();Mb=s.createBuffer();Nb=s.createBuffer();Ob=s.createBuffer();Pb=s.createBuffer();Rb=s.createBuffer();Qb=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,Qb);s.bufferData(s.ARRAY_BUFFER,new j([0,0,0]),s.STATIC_DRAW);Xb=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,Xb);s.bufferData(s.ARRAY_BUFFER,new j([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),s.STATIC_DRAW);Yb=s.createBuffer();s.bindBuffer(s.ARRAY_BUFFER,Yb);s.bufferData(s.ARRAY_BUFFER,new j([0,0,1,0,1,1,0,1]),s.STATIC_DRAW);Zb=s.createBuffer();s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,Zb);s.bufferData(s.ELEMENT_ARRAY_BUFFER,new l([0,1,2,2,3,0]),s.STATIC_DRAW);Dc=new Id;Ec=new Id;Fc=new Id;Gc=new Id;Kc=new Id;r.camera();r.perspective();Hc=new Jd;Ic=new Jd;wb=new Id;xb=new Id;yb=new Id;zb=new Id;Ab=new Id;Bb=new Id;Bb.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0);wd.prototype.size.apply(this,arguments)}}();xd.prototype.ambientLight=wd.prototype.a3DOnlyFunction;yd.prototype.ambientLight=function(a,b,c,d,e,f){if(tc===n.MAX_LIGHTS){throw"can only create "+n.MAX_LIGHTS+" lights"}var g=new t(d,e,f);var h=new Id;h.scale(1,-1,1);h.apply(Fc.array());h.mult(g,g);var i=Kd(a,b,c,0);var j=[((i&n.RED_MASK)>>>16)/255,((i&n.GREEN_MASK)>>>8)/255,(i&n.BLUE_MASK)/255];s.useProgram(Db);md("uLights.color.3d."+tc,Db,"uLights"+tc+".color",j);md("uLights.position.3d."+tc,Db,"uLights"+tc+".position",g.array());nd("uLights.type.3d."+tc,Db,"uLights"+tc+".type",0);nd("uLightCount3d",Db,"uLightCount",++tc)};xd.prototype.directionalLight=wd.prototype.a3DOnlyFunction;yd.prototype.directionalLight=function(a,b,c,d,e,f){if(tc===n.MAX_LIGHTS){throw"can only create "+n.MAX_LIGHTS+" lights"}s.useProgram(Db);var g=new Id;g.scale(1,-1,1);g.apply(Fc.array());g=g.array();var h=[g[0]*d+g[4]*e+g[8]*f,g[1]*d+g[5]*e+g[9]*f,g[2]*d+g[6]*e+g[10]*f];var i=Kd(a,b,c,0);var j=[((i&n.RED_MASK)>>>16)/255,((i&n.GREEN_MASK)>>>8)/255,(i&n.BLUE_MASK)/255];md("uLights.color.3d."+tc,Db,"uLights"+tc+".color",j);md("uLights.position.3d."+tc,Db,"uLights"+tc+".position",h);nd("uLights.type.3d."+tc,Db,"uLights"+tc+".type",1);nd("uLightCount3d",Db,"uLightCount",++tc)};xd.prototype.lightFalloff=wd.prototype.a3DOnlyFunction;yd.prototype.lightFalloff=function(a,b,c){s.useProgram(Db);md("uFalloff3d",Db,"uFalloff",[a,b,c])};xd.prototype.lightSpecular=wd.prototype.a3DOnlyFunction;yd.prototype.lightSpecular=function(a,b,c){var d=Kd(a,b,c,0);var e=[((d&n.RED_MASK)>>>16)/255,((d&n.GREEN_MASK)>>>8)/255,(d&n.BLUE_MASK)/255];s.useProgram(Db);md("uSpecular3d",Db,"uSpecular",e)};r.lights=function(){r.ambientLight(128,128,128);r.directionalLight(128,128,128,0,0,-1);r.lightFalloff(1,0,0);r.lightSpecular(0,0,0)};xd.prototype.pointLight=wd.prototype.a3DOnlyFunction;yd.prototype.pointLight=function(a,b,c,d,e,f){if(tc===n.MAX_LIGHTS){throw"can only create "+n.MAX_LIGHTS+" lights"}var g=new t(d,e,f);var h=new Id;h.scale(1,-1,1);h.apply(Fc.array());h.mult(g,g);var i=Kd(a,b,c,0);var j=[((i&n.RED_MASK)>>>16)/255,((i&n.GREEN_MASK)>>>8)/255,(i&n.BLUE_MASK)/255];s.useProgram(Db);md("uLights.color.3d."+tc,Db,"uLights"+tc+".color",j);md("uLights.position.3d."+tc,Db,"uLights"+tc+".position",g.array());nd("uLights.type.3d."+tc,Db,"uLights"+tc+".type",2);nd("uLightCount3d",Db,"uLightCount",++tc)};xd.prototype.noLights=wd.prototype.a3DOnlyFunction;yd.prototype.noLights=function(){tc=0;s.useProgram(Db);nd("uLightCount3d",Db,"uLightCount",tc)};xd.prototype.spotLight=wd.prototype.a3DOnlyFunction;yd.prototype.spotLight=function(a,b,c,d,e,f,g,h,i,j,k){if(tc===n.MAX_LIGHTS){throw"can only create "+n.MAX_LIGHTS+" lights"}s.useProgram(Db);var l=new t(d,e,f);var m=new Id;m.scale(1,-1,1);m.apply(Fc.array());m.mult(l,l);m=m.array();var o=[m[0]*g+m[4]*h+m[8]*i,m[1]*g+m[5]*h+m[9]*i,m[2]*g+m[6]*h+m[10]*i];var p=Kd(a,b,c,0);var q=[((p&n.RED_MASK)>>>16)/255,((p&n.GREEN_MASK)>>>8)/255,(p&n.BLUE_MASK)/255];md("uLights.color.3d."+tc,Db,"uLights"+tc+".color",q);md("uLights.position.3d."+tc,Db,"uLights"+tc+".position",l.array());md("uLights.direction.3d."+tc,Db,"uLights"+tc+".direction",o);md("uLights.concentration.3d."+tc,Db,"uLights"+tc+".concentration",k);md("uLights.angle.3d."+tc,Db,"uLights"+tc+".angle",j);nd("uLights.type.3d."+tc,Db,"uLights"+tc+".type",3);nd("uLightCount3d",Db,"uLightCount",++tc)};xd.prototype.beginCamera=function(){throw"beginCamera() is not available in 2D mode"};yd.prototype.beginCamera=function(){if(Lc){throw"You cannot call beginCamera() again before calling endCamera()"}Lc=true;Fc=Ec;Gc=Dc};xd.prototype.endCamera=function(){throw"endCamera() is not available in 2D mode"};yd.prototype.endCamera=function(){if(!Lc){throw"You cannot call endCamera() before calling beginCamera()"}Fc.set(Dc);Gc.set(Ec);Lc=false};r.camera=function(a,b,e,f,g,h,i,j,k){if(a===d){Oc=r.width/2;Pc=r.height/2;Qc=Pc/c.tan(Nc/2);a=Oc;b=Pc;e=Qc;f=Oc;g=Pc;h=0;i=0;j=1;k=0}var l=new t(a-f,b-g,e-h);var m=new t(i,j,k);l.normalize();var n=t.cross(m,l);m=t.cross(l,n);n.normalize();m.normalize();var o=n.x,p=n.y,q=n.z;var s=m.x,u=m.y,v=m.z;var w=l.x,x=l.y,y=l.z;Dc.set(o,p,q,0,s,u,v,0,w,x,y,0,0,0,0,1);Dc.translate(-a,-b,-e);Ec.reset();Ec.invApply(o,p,q,0,s,u,v,0,w,x,y,0,0,0,0,1);Ec.translate(a,b,e);Fc.set(Dc);Gc.set(Ec)};r.perspective=function(a,b,d,e){if(arguments.length===0){Pc=i.height/2;Qc=Pc/c.tan(Nc/2);Rc=Qc/10;Sc=Qc*10;Tc=r.width/r.height;a=Nc;b=Tc;d=Rc;e=Sc}var f,g,h,j;f=d*c.tan(a/2);g=-f;h=f*b;j=g*b;r.frustum(j,h,g,f,d,e)};xd.prototype.frustum=function(){throw"Processing.js: frustum() is not supported in 2D mode"};yd.prototype.frustum=function(a,b,c,d,e,f){Mc=true;Kc=new Id;Kc.set(2*e/(b-a),0,(b+a)/(b-a),0,0,2*e/(d-c),(d+c)/(d-c),0,0,0,-(f+e)/(f-e),-(2*f*e)/(f-e),0,0,-1,0);var g=new Id;g.set(Kc);g.transpose();s.useProgram(Eb);od("projection2d",Eb,"uProjection",false,g.array());s.useProgram(Db);od("projection3d",Db,"uProjection",false,g.array());s.useProgram(Fb);od("uProjectionUS",Fb,"uProjection",false,g.array())};r.ortho=function(a,b,c,d,e,f){if(arguments.length===0){a=0;b=r.width;c=0;d=r.height;e=-10;f=10}var g=2/(b-a);var h=2/(d-c);var i=-2/(f-e);var j=-(b+a)/(b-a);var k=-(d+c)/(d-c);var l=-(f+e)/(f-e);Kc=new Id;Kc.set(g,0,0,j,0,h,0,k,0,0,i,l,0,0,0,1);var m=new Id;m.set(Kc);m.transpose();s.useProgram(Eb);od("projection2d",Eb,"uProjection",false,m.array());s.useProgram(Db);od("projection3d",Db,"uProjection",false,m.array());s.useProgram(Fb);od("uProjectionUS",Fb,"uProjection",false,m.array());Mc=false};r.printProjection=function(){Kc.print()};r.printCamera=function(){Dc.print()};xd.prototype.box=wd.prototype.a3DOnlyFunction;yd.prototype.box=function(a,b,c){if(!b||!c){b=c=a}var d=new Id;d.scale(a,b,c);var e=new Id;e.scale(1,-1,1);e.apply(Fc.array());e.transpose();if(z){s.useProgram(Db);od("model3d",Db,"uModel",false,d.array());od("view3d",Db,"uView",false,e.array());s.enable(s.POLYGON_OFFSET_FILL);s.polygonOffset(1,1);md("color3d",Db,"uColor",A);if(tc>0){var f=new Id;f.set(e);var g=new Id;g.set(d);f.mult(g);var h=new Id;h.set(f);h.invert();h.transpose();od("uNormalTransform3d",Db,"uNormalTransform",false,h.array());pd("aNormal3d",Db,"aNormal",3,Hb)}else{qd("aNormal3d",Db,"aNormal")}pd("aVertex3d",Db,"aVertex",3,Gb);qd("aColor3d",Db,"aColor");qd("aTexture3d",Db,"aTexture");s.drawArrays(s.TRIANGLES,0,ad.length/3);s.disable(s.POLYGON_OFFSET_FILL)}if(L>0&&H){s.useProgram(Eb);od("uModel2d",Eb,"uModel",false,d.array());od("uView2d",Eb,"uView",false,e.array());md("uColor2d",Eb,"uColor",I);nd("uIsDrawingText2d",Eb,"uIsDrawingText",false);pd("vertex2d",Eb,"aVertex",3,Ib);qd("aTextureCoord2d",Eb,"aTextureCoord");s.drawArrays(s.LINES,0,bd.length/3)}};var fe=function(){var a;Bc=[];for(a=0;a<vc;a++){Bc.push(0);Bc.push(-1);Bc.push(0);Bc.push(wc[a]);Bc.push(xc[a]);Bc.push(yc[a])}Bc.push(0);Bc.push(-1);Bc.push(0);Bc.push(wc[0]);Bc.push(xc[0]);Bc.push(yc[0]);var b,c,d;var e=0;for(a=2;a<uc;a++){b=c=e;e+=vc;d=e;for(var f=0;f<vc;f++){Bc.push(wc[b]);Bc.push(xc[b]);Bc.push(yc[b++]);Bc.push(wc[d]);Bc.push(xc[d]);Bc.push(yc[d++])}b=c;d=e;Bc.push(wc[b]);Bc.push(xc[b]);Bc.push(yc[b]);Bc.push(wc[d]);Bc.push(xc[d]);Bc.push(yc[d])}for(a=0;a<vc;a++){d=e+a;Bc.push(wc[d]);Bc.push(xc[d]);Bc.push(yc[d]);Bc.push(0);Bc.push(1);Bc.push(0)}Bc.push(wc[e]);Bc.push(xc[e]);Bc.push(yc[e]);Bc.push(0);Bc.push(1);Bc.push(0);s.bindBuffer(s.ARRAY_BUFFER,Lb);s.bufferData(s.ARRAY_BUFFER,new j(Bc),s.STATIC_DRAW)};r.sphereDetail=function(a,b){var c;if(arguments.length===1){a=b=arguments[0]}if(a<3){a=3}if(b<2){b=2}if(a===vc&&b===uc){return}var d=n.SINCOS_LENGTH/a;var e=new j(a);var f=new j(a);for(c=0;c<a;c++){e[c]=Ac[c*d%n.SINCOS_LENGTH|0];f[c]=zc[c*d%n.SINCOS_LENGTH|0]}var g=a*(b-1)+2;var h=0;wc=new j(g);xc=new j(g);yc=new j(g);var i=n.SINCOS_LENGTH*.5/b;var k=i;for(c=1;c<b;c++){var l=zc[k%n.SINCOS_LENGTH|0];var m=-Ac[k%n.SINCOS_LENGTH|0];for(var o=0;o<a;o++){wc[h]=e[o]*l;xc[h]=m;yc[h++]=f[o]*l}k+=i}vc=a;uc=b;fe()};xd.prototype.sphere=wd.prototype.a3DOnlyFunction;yd.prototype.sphere=function(){var a=arguments[0];if(vc<3||uc<2){r.sphereDetail(30)}var b=new Id;b.scale(a,a,a);var c=new Id;c.scale(1,-1,1);c.apply(Fc.array());c.transpose();if(z){if(tc>0){var d=new Id;d.set(c);var e=new Id;e.set(b);d.mult(e);var f=new Id;f.set(d);f.invert();f.transpose();od("uNormalTransform3d",Db,"uNormalTransform",false,f.array());pd("aNormal3d",Db,"aNormal",3,Lb)}else{qd("aNormal3d",Db,"aNormal")}s.useProgram(Db);qd("aTexture3d",Db,"aTexture");od("uModel3d",Db,"uModel",false,b.array());od("uView3d",Db,"uView",false,c.array());pd("aVertex3d",Db,"aVertex",3,Lb);qd("aColor3d",Db,"aColor");s.enable(s.POLYGON_OFFSET_FILL);s.polygonOffset(1,1);md("uColor3d",Db,"uColor",A);s.drawArrays(s.TRIANGLE_STRIP,0,Bc.length/3);s.disable(s.POLYGON_OFFSET_FILL)}if(L>0&&H){s.useProgram(Eb);od("uModel2d",Eb,"uModel",false,b.array());od("uView2d",Eb,"uView",false,c.array());pd("aVertex2d",Eb,"aVertex",3,Lb);qd("aTextureCoord2d",Eb,"aTextureCoord");md("uColor2d",Eb,"uColor",I);nd("uIsDrawingText",Eb,"uIsDrawingText",false);s.drawArrays(s.LINE_STRIP,0,Bc.length/3)}};r.modelX=function(a,b,c){var d=Fc.array();var e=Ec.array();var f=d[0]*a+d[1]*b+d[2]*c+d[3];var g=d[4]*a+d[5]*b+d[6]*c+d[7];var h=d[8]*a+d[9]*b+d[10]*c+d[11];var i=d[12]*a+d[13]*b+d[14]*c+d[15];var j=e[0]*f+e[1]*g+e[2]*h+e[3]*i;var k=e[12]*f+e[13]*g+e[14]*h+e[15]*i;return k!==0?j/k:j};r.modelY=function(a,b,c){var d=Fc.array();var e=Ec.array();var f=d[0]*a+d[1]*b+d[2]*c+d[3];var g=d[4]*a+d[5]*b+d[6]*c+d[7];var h=d[8]*a+d[9]*b+d[10]*c+d[11];var i=d[12]*a+d[13]*b+d[14]*c+d[15];var j=e[4]*f+e[5]*g+e[6]*h+e[7]*i;var k=e[12]*f+e[13]*g+e[14]*h+e[15]*i;return k!==0?j/k:j};r.modelZ=function(a,b,c){var d=Fc.array();var e=Ec.array();var f=d[0]*a+d[1]*b+d[2]*c+d[3];var g=d[4]*a+d[5]*b+d[6]*c+d[7];var h=d[8]*a+d[9]*b+d[10]*c+d[11];var i=d[12]*a+d[13]*b+d[14]*c+d[15];var j=e[8]*f+e[9]*g+e[10]*h+e[11]*i;var k=e[12]*f+e[13]*g+e[14]*h+e[15]*i;return k!==0?j/k:j};xd.prototype.ambient=wd.prototype.a3DOnlyFunction;yd.prototype.ambient=function(a,b,c){s.useProgram(Db);nd("uUsingMat3d",Db,"uUsingMat",true);var d=r.color(a,b,c);md("uMaterialAmbient3d",Db,"uMaterialAmbient",r.color.toGLArray(d).slice(0,3))};xd.prototype.emissive=wd.prototype.a3DOnlyFunction;yd.prototype.emissive=function(a,b,c){s.useProgram(Db);nd("uUsingMat3d",Db,"uUsingMat",true);var d=r.color(a,b,c);md("uMaterialEmissive3d",Db,"uMaterialEmissive",r.color.toGLArray(d).slice(0,3))};xd.prototype.shininess=wd.prototype.a3DOnlyFunction;yd.prototype.shininess=function(a){s.useProgram(Db);nd("uUsingMat3d",Db,"uUsingMat",true);md("uShininess3d",Db,"uShininess",a)};xd.prototype.specular=wd.prototype.a3DOnlyFunction;yd.prototype.specular=function(a,b,c){s.useProgram(Db);nd("uUsingMat3d",Db,"uUsingMat",true);var d=r.color(a,b,c);md("uMaterialSpecular3d",Db,"uMaterialSpecular",r.color.toGLArray(d).slice(0,3))};r.screenX=function(a,b,c){var d=Fc.array();if(d.length===16){var e=d[0]*a+d[1]*b+d[2]*c+d[3];var f=d[4]*a+d[5]*b+d[6]*c+d[7];var g=d[8]*a+d[9]*b+d[10]*c+d[11];var h=d[12]*a+d[13]*b+d[14]*c+d[15];var i=Kc.array();var j=i[0]*e+i[1]*f+i[2]*g+i[3]*h;var k=i[12]*e+i[13]*f+i[14]*g+i[15]*h;if(k!==0){j/=k}return r.width*(1+j)/2}return Fc.multX(a,b)};r.screenY=function(b,c,d){var e=Fc.array();if(e.length===16){var f=e[0]*b+e[1]*c+e[2]*d+e[3];var g=e[4]*b+e[5]*c+e[6]*d+e[7];var h=e[8]*b+e[9]*c+e[10]*d+e[11];var i=e[12]*b+e[13]*c+e[14]*d+e[15];var j=Kc.array();var k=j[4]*f+j[5]*g+j[6]*h+j[7]*i;var l=j[12]*f+j[13]*g+j[14]*h+j[15]*i;if(l!==0){k/=l}return r.height*(1+k)/2}return Fc.multY(b,c)};r.screenZ=function(b,c,d){var e=Fc.array();if(e.length!==16){return 0}var f=Kc.array();var g=e[0]*b+e[1]*c+e[2]*d+e[3];var h=e[4]*b+e[5]*c+e[6]*d+e[7];var i=e[8]*b+e[9]*c+e[10]*d+e[11];var j=e[12]*b+e[13]*c+e[14]*d+e[15];var k=f[8]*g+f[9]*h+f[10]*i+f[11]*j;var l=f[12]*g+f[13]*h+f[14]*i+f[15]*j;if(l!==0){k/=l}return(k+1)/2};wd.prototype.fill=function(){var a=r.color(arguments[0],arguments[1],arguments[2],arguments[3]);if(a===D&&z){return}z=true;D=a};xd.prototype.fill=function(){wd.prototype.fill.apply(this,arguments);G=true};yd.prototype.fill=function(){wd.prototype.fill.apply(this,arguments);A=r.color.toGLArray(D)};r.noFill=function(){z=false};wd.prototype.stroke=function(){var a=r.color(arguments[0],arguments[1],arguments[2],arguments[3]);if(a===J&&H){return}H=true;J=a};xd.prototype.stroke=function(){wd.prototype.stroke.apply(this,arguments);K=true};yd.prototype.stroke=function(){wd.prototype.stroke.apply(this,arguments);I=r.color.toGLArray(J)};r.noStroke=function(){H=false};wd.prototype.strokeWeight=function(a){L=a};xd.prototype.strokeWeight=function(a){wd.prototype.strokeWeight.apply(this,arguments);s.lineWidth=a};yd.prototype.strokeWeight=function(a){wd.prototype.strokeWeight.apply(this,arguments);s.useProgram(Eb);md("pointSize2d",Eb,"uPointSize",a);s.useProgram(Fb);md("pointSizeUnlitShape",Fb,"uPointSize",a);s.lineWidth(a)};r.strokeCap=function(a){w.$ensureContext().lineCap=a};r.strokeJoin=function(a){w.$ensureContext().lineJoin=a};xd.prototype.smooth=function(){N=true;var a=i.style;a.setProperty("image-rendering","optimizeQuality","important");a.setProperty("-ms-interpolation-mode","bicubic","important");if(s.hasOwnProperty("mozImageSmoothingEnabled")){s.mozImageSmoothingEnabled=true}};yd.prototype.smooth=function(){N=true};xd.prototype.noSmooth=function(){N=false;var a=i.style;a.setProperty("image-rendering","optimizeSpeed","important");a.setProperty("image-rendering","-moz-crisp-edges","important");a.setProperty("image-rendering","-webkit-optimize-contrast","important");a.setProperty("image-rendering","optimize-contrast","important");a.setProperty("-ms-interpolation-mode","nearest-neighbor","important");if(s.hasOwnProperty("mozImageSmoothingEnabled")){s.mozImageSmoothingEnabled=false}};yd.prototype.noSmooth=function(){N=false};xd.prototype.point=function(a,b){if(!H){return}a=c.round(a);b=c.round(b);s.fillStyle=r.color.toString(J);G=true;if(L>1){s.beginPath();s.arc(a,b,L/2,0,n.TWO_PI,false);s.fill()}else{s.fillRect(a,b,1,1)}};yd.prototype.point=function(a,b,c){var d=new Id;d.translate(a,b,c||0);d.transpose();var e=new Id;e.scale(1,-1,1);e.apply(Fc.array());e.transpose();s.useProgram(Eb);od("uModel2d",Eb,"uModel",false,d.array());od("uView2d",Eb,"uView",false,e.array());if(L>0&&H){md("uColor2d",Eb,"uColor",I);nd("uIsDrawingText2d",Eb,"uIsDrawingText",false);nd("uSmooth2d",Eb,"uSmooth",N);pd("aVertex2d",Eb,"aVertex",3,Qb);qd("aTextureCoord2d",Eb,"aTextureCoord");s.drawArrays(s.POINTS,0,1)}};r.beginShape=function(a){$=a;ab=[];Uc=[]};xd.prototype.vertex=function(a,b,c,d){var e=[];if(Zc){Zc=false}e["isVert"]=true;e[0]=a;e[1]=b;e[2]=0;e[3]=c;e[4]=d;e[5]=D;e[6]=J;Uc.push(e)};yd.prototype.vertex=function(a,b,c,e,f){var g=[];if(Zc){Zc=false}g["isVert"]=true;if(f===d&&Wb){f=e;e=c;c=0}if(e!==d&&f!==d){if(Vb===n.IMAGE){e/=Ub.width;f/=Ub.height}e=e>1?1:e;e=e<0?0:e;f=f>1?1:f;f=f<0?0:f}g[0]=a;g[1]=b;g[2]=c||0;g[3]=e||0;g[4]=f||0;g[5]=A[0];g[6]=A[1];g[7]=A[2];g[8]=A[3];g[9]=I[0];g[10]=I[1];g[11]=I[2];g[12]=I[3];g[13]=S;g[14]=T;g[15]=U;Uc.push(g)};var ie=function(a,b){var c=new Id;c.scale(1,-1,1);c.apply(Fc.array());c.transpose();s.useProgram(Fb);od("uViewUS",Fb,"uView",false,c.array());nd("uSmoothUS",Fb,"uSmooth",N);pd("aVertexUS",Fb,"aVertex",3,Qb);s.bufferData(s.ARRAY_BUFFER,new j(a),s.STREAM_DRAW);pd("aColorUS",Fb,"aColor",4,Ob);s.bufferData(s.ARRAY_BUFFER,new j(b),s.STREAM_DRAW);s.drawArrays(s.POINTS,0,a.length/3)};var je=function(a,b,c){var d;if(b==="LINES"){d=s.LINES}else if(b==="LINE_LOOP"){d=s.LINE_LOOP}else{d=s.LINE_STRIP}var e=new Id;e.scale(1,-1,1);e.apply(Fc.array());e.transpose();s.useProgram(Fb);od("uViewUS",Fb,"uView",false,e.array());pd("aVertexUS",Fb,"aVertex",3,Mb);s.bufferData(s.ARRAY_BUFFER,new j(a),s.STREAM_DRAW);pd("aColorUS",Fb,"aColor",4,Pb);s.bufferData(s.ARRAY_BUFFER,new j(c),s.STREAM_DRAW);s.drawArrays(d,0,a.length/3)};var ke=function(a,b,c,d){var e;if(b==="TRIANGLES"){e=s.TRIANGLES}else if(b==="TRIANGLE_FAN"){e=s.TRIANGLE_FAN}else{e=s.TRIANGLE_STRIP}var f=new Id;f.scale(1,-1,1);f.apply(Fc.array());f.transpose();s.useProgram(Db);od("model3d",Db,"uModel",false,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);od("view3d",Db,"uView",false,f.array());s.enable(s.POLYGON_OFFSET_FILL);s.polygonOffset(1,1);md("color3d",Db,"uColor",[-1,0,0,0]);pd("vertex3d",Db,"aVertex",3,Nb);s.bufferData(s.ARRAY_BUFFER,new j(a),s.STREAM_DRAW);if(Wb&&pb!==null){qb(c)}pd("aColor3d",Db,"aColor",4,Ob);s.bufferData(s.ARRAY_BUFFER,new j(c),s.STREAM_DRAW);qd("aNormal3d",Db,"aNormal");if(Wb){nd("uUsingTexture3d",Db,"uUsingTexture",Wb);pd("aTexture3d",Db,"aTexture",2,Rb);s.bufferData(s.ARRAY_BUFFER,new j(d),s.STREAM_DRAW)}s.drawArrays(e,0,a.length/3);s.disable(s.POLYGON_OFFSET_FILL)};xd.prototype.endShape=function(a){if(Uc.length===0){return}var b=a===n.CLOSE;if(b){Uc.push(Uc[0])}var c=[];var e=[];var f=[];var g=[];var h=[];var i;Zc=true;var j,k,l;var m=Uc.length;for(j=0;j<m;j++){i=Uc[j];for(k=0;k<3;k++){e.push(i[k])}}for(j=0;j<m;j++){i=Uc[j];for(k=5;k<9;k++){f.push(i[k])}}for(j=0;j<m;j++){i=Uc[j];for(k=9;k<13;k++){g.push(i[k])}}for(j=0;j<m;j++){i=Uc[j];h.push(i[3]);h.push(i[4])}if(Xc&&($===n.POLYGON||$===d)){if(m>3){var o=[],p=1-bb;s.beginPath();s.moveTo(Uc[1][0],Uc[1][1]);for(j=1;j+2<m;j++){i=Uc[j];o[0]=[i[0],i[1]];o[1]=[i[0]+(p*Uc[j+1][0]-p*Uc[j-1][0])/6,i[1]+(p*Uc[j+1][1]-p*Uc[j-1][1])/6];o[2]=[Uc[j+1][0]+(p*Uc[j][0]-p*Uc[j+2][0])/6,Uc[j+1][1]+(p*Uc[j][1]-p*Uc[j+2][1])/6];o[3]=[Uc[j+1][0],Uc[j+1][1]];s.bezierCurveTo(o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1])}le()}}else if(Yc&&($===n.POLYGON||$===d)){s.beginPath();for(j=0;j<m;j++){i=Uc[j];if(Uc[j]["isVert"]){if(Uc[j]["moveTo"]){s.moveTo(i[0],i[1])}else{s.lineTo(i[0],i[1])}}else{s.bezierCurveTo(Uc[j][0],Uc[j][1],Uc[j][2],Uc[j][3],Uc[j][4],Uc[j][5])}}le()}else{if($===n.POINTS){for(j=0;j<m;j++){i=Uc[j];if(H){r.stroke(i[6])}r.point(i[0],i[1])}}else if($===n.LINES){for(j=0;j+1<m;j+=2){i=Uc[j];if(H){r.stroke(Uc[j+1][6])}r.line(i[0],i[1],Uc[j+1][0],Uc[j+1][1])}}else if($===n.TRIANGLES){for(j=0;j+2<m;j+=3){i=Uc[j];s.beginPath();s.moveTo(i[0],i[1]);s.lineTo(Uc[j+1][0],Uc[j+1][1]);s.lineTo(Uc[j+2][0],Uc[j+2][1]);s.lineTo(i[0],i[1]);if(z){r.fill(Uc[j+2][5]);ge()}if(H){r.stroke(Uc[j+2][6]);he()}s.closePath()}}else if($===n.TRIANGLE_STRIP){for(j=0;j+1<m;j++){i=Uc[j];s.beginPath();s.moveTo(Uc[j+1][0],Uc[j+1][1]);s.lineTo(i[0],i[1]);if(H){r.stroke(Uc[j+1][6])}if(z){r.fill(Uc[j+1][5])}if(j+2<m){s.lineTo(Uc[j+2][0],Uc[j+2][1]);if(H){r.stroke(Uc[j+2][6])}if(z){r.fill(Uc[j+2][5])}}le()}}else if($===n.TRIANGLE_FAN){if(m>2){s.beginPath();s.moveTo(Uc[0][0],Uc[0][1]);s.lineTo(Uc[1][0],Uc[1][1]);s.lineTo(Uc[2][0],Uc[2][1]);if(z){r.fill(Uc[2][5]);ge()}if(H){r.stroke(Uc[2][6]);he()}s.closePath();for(j=3;j<m;j++){i=Uc[j];s.beginPath();s.moveTo(Uc[0][0],Uc[0][1]);s.lineTo(Uc[j-1][0],Uc[j-1][1]);s.lineTo(i[0],i[1]);if(z){r.fill(i[5]);ge()}if(H){r.stroke(i[6]);he()}s.closePath()}}}else if($===n.QUADS){for(j=0;j+3<m;j+=4){i=Uc[j];s.beginPath();s.moveTo(i[0],i[1]);for(k=1;k<4;k++){s.lineTo(Uc[j+k][0],Uc[j+k][1])}s.lineTo(i[0],i[1]);if(z){r.fill(Uc[j+3][5]);ge()}if(H){r.stroke(Uc[j+3][6]);he()}s.closePath()}}else if($===n.QUAD_STRIP){if(m>3){for(j=0;j+1<m;j+=2){i=Uc[j];s.beginPath();if(j+3<m){s.moveTo(Uc[j+2][0],Uc[j+2][1]);s.lineTo(i[0],i[1]);s.lineTo(Uc[j+1][0],Uc[j+1][1]);s.lineTo(Uc[j+3][0],Uc[j+3][1]);if(z){r.fill(Uc[j+3][5])}if(H){r.stroke(Uc[j+3][6])}}else{s.moveTo(i[0],i[1]);s.lineTo(Uc[j+1][0],Uc[j+1][1])}le()}}}else{s.beginPath();s.moveTo(Uc[0][0],Uc[0][1]);for(j=1;j<m;j++){i=Uc[j];if(i["isVert"]){if(i["moveTo"]){s.moveTo(i[0],i[1])}else{s.lineTo(i[0],i[1])}}}le()}}Xc=false;Yc=false;Vc=[];Wc=0;if(b){Uc.pop()}};yd.prototype.endShape=function(a){if(Uc.length===0){return}var b=a===n.CLOSE;var c=[];var e=[];var f=[];var g=[];var h=[];var i;Zc=true;var j,k,l;var m=Uc.length;for(j=0;j<m;j++){i=Uc[j];for(k=0;k<3;k++){e.push(i[k])}}for(j=0;j<m;j++){i=Uc[j];for(k=5;k<9;k++){f.push(i[k])}}for(j=0;j<m;j++){i=Uc[j];for(k=9;k<13;k++){g.push(i[k])}}for(j=0;j<m;j++){i=Uc[j];h.push(i[3]);h.push(i[4])}if(b){e.push(Uc[0][0]);e.push(Uc[0][1]);e.push(Uc[0][2]);for(j=5;j<9;j++){f.push(Uc[0][j])}for(j=9;j<13;j++){g.push(Uc[0][j])}h.push(Uc[0][3]);h.push(Uc[0][4])}if(Xc&&($===n.POLYGON||$===d)){c=e;if(H){je(c,null,g)}if(z){ke(e,null,f)}}else if(Yc&&($===n.POLYGON||$===d)){c=e;c.splice(c.length-3);g.splice(g.length-4);if(H){je(c,null,g)}if(z){ke(e,"TRIANGLES",f)}}else{if($===n.POINTS){for(j=0;j<m;j++){i=Uc[j];for(k=0;k<3;k++){c.push(i[k])}}ie(c,g)}else if($===n.LINES){for(j=0;j<m;j++){i=Uc[j];for(k=0;k<3;k++){c.push(i[k])}}for(j=0;j<m;j++){i=Uc[j];for(k=5;k<9;k++){f.push(i[k])}}je(c,"LINES",g)}else if($===n.TRIANGLES){if(m>2){for(j=0;j+2<m;j+=3){e=[];h=[];c=[];f=[];g=[];for(k=0;k<3;k++){for(l=0;l<3;l++){c.push(Uc[j+k][l]);e.push(Uc[j+k][l])}}for(k=0;k<3;k++){for(l=3;l<5;l++){h.push(Uc[j+k][l])}}for(k=0;k<3;k++){for(l=5;l<9;l++){f.push(Uc[j+k][l]);g.push(Uc[j+k][l+4])}}if(H){je(c,"LINE_LOOP",g)}if(z||Wb){ke(e,"TRIANGLES",f,h)}}}}else if($===n.TRIANGLE_STRIP){if(m>2){for(j=0;j+2<m;j++){c=[];e=[];g=[];f=[];h=[];for(k=0;k<3;k++){for(l=0;l<3;l++){c.push(Uc[j+k][l]);e.push(Uc[j+k][l])}}for(k=0;k<3;k++){for(l=3;l<5;l++){h.push(Uc[j+k][l])}}for(k=0;k<3;k++){for(l=5;l<9;l++){g.push(Uc[j+k][l+4]);f.push(Uc[j+k][l])}}if(z||Wb){ke(e,"TRIANGLE_STRIP",f,h)}if(H){je(c,"LINE_LOOP",g)}}}}else if($===n.TRIANGLE_FAN){if(m>2){for(j=0;j<3;j++){i=Uc[j];for(k=0;k<3;k++){c.push(i[k])}}for(j=0;j<3;j++){i=Uc[j];for(k=9;k<13;k++){g.push(i[k])}}if(H){je(c,"LINE_LOOP",g)}for(j=2;j+1<m;j++){c=[];g=[];c.push(Uc[0][0]);c.push(Uc[0][1]);c.push(Uc[0][2]);g.push(Uc[0][9]);g.push(Uc[0][10]);g.push(Uc[0][11]);g.push(Uc[0][12]);for(k=0;k<2;k++){for(l=0;l<3;l++){c.push(Uc[j+k][l])}}for(k=0;k<2;k++){for(l=9;l<13;l++){g.push(Uc[j+k][l])}}if(H){je(c,"LINE_STRIP",g)}}if(z||Wb){ke(e,"TRIANGLE_FAN",f,h)}}}else if($===n.QUADS){for(j=0;j+3<m;j+=4){c=[];for(k=0;k<4;k++){i=Uc[j+k];for(l=0;l<3;l++){c.push(i[l])}}if(H){je(c,"LINE_LOOP",g)}if(z){e=[];f=[];h=[];for(k=0;k<3;k++){e.push(Uc[j][k])}for(k=5;k<9;k++){f.push(Uc[j][k])}for(k=0;k<3;k++){e.push(Uc[j+1][k])}for(k=5;k<9;k++){f.push(Uc[j+1][k])}for(k=0;k<3;k++){e.push(Uc[j+3][k])}for(k=5;k<9;k++){f.push(Uc[j+3][k])}for(k=0;k<3;k++){e.push(Uc[j+2][k])}for(k=5;k<9;k++){f.push(Uc[j+2][k])}if(Wb){h.push(Uc[j+0][3]);h.push(Uc[j+0][4]);h.push(Uc[j+1][3]);h.push(Uc[j+1][4]);h.push(Uc[j+3][3]);h.push(Uc[j+3][4]);h.push(Uc[j+2][3]);h.push(Uc[j+2][4])}ke(e,"TRIANGLE_STRIP",f,h)}}}else if($===n.QUAD_STRIP){var o=[];if(m>3){for(j=0;j<2;j++){i=Uc[j];for(k=0;k<3;k++){c.push(i[k])}}for(j=0;j<2;j++){i=Uc[j];for(k=9;k<13;k++){g.push(i[k])}}je(c,"LINE_STRIP",g);if(m>4&&m%2>0){o=e.splice(e.length-3);Uc.pop()}for(j=0;j+3<m;j+=2){c=[];g=[];for(k=0;k<3;k++){c.push(Uc[j+1][k])}for(k=0;k<3;k++){c.push(Uc[j+3][k])}for(k=0;k<3;k++){c.push(Uc[j+2][k])}for(k=0;k<3;k++){c.push(Uc[j+0][k])}for(k=9;k<13;k++){g.push(Uc[j+1][k])}for(k=9;k<13;k++){g.push(Uc[j+3][k])}for(k=9;k<13;k++){g.push(Uc[j+2][k])}for(k=9;k<13;k++){g.push(Uc[j+0][k])}if(H){je(c,"LINE_STRIP",g)}}if(z||Wb){ke(e,"TRIANGLE_LIST",f,h)}}}else{if(m===1){for(k=0;k<3;k++){c.push(Uc[0][k])}for(k=9;k<13;k++){g.push(Uc[0][k])}ie(c,g)}else{for(j=0;j<m;j++){i=Uc[j];for(k=0;k<3;k++){c.push(i[k])}for(k=5;k<9;k++){g.push(i[k])}}if(H&&b){je(c,"LINE_LOOP",g)}else if(H&&!b){je(c,"LINE_STRIP",g)}if(z||Wb){ke(e,"TRIANGLE_FAN",f,h)}}}Wb=false;s.useProgram(Db);nd("usingTexture3d",Db,"uUsingTexture",Wb)}Xc=false;Yc=false;Vc=[];Wc=0};var me=function(a,b){var c=1/a;var d=c*c;var e=d*c;b.set(0,0,0,1,e,d,c,0,6*e,2*d,0,0,6*e,0,0,0)};var ne=function(){if(!yb){wb=new Id;yb=new Id;db=true}var a=bb;wb.set((a-1)/2,(a+3)/2,(-3-a)/2,(1-a)/2,1-a,(-5-a)/2,a+2,(a-1)/2,(a-1)/2,0,(1-a)/2,0,0,1,0,0);me(cb,yb);if(!Ab){xb=new Id}xb.set(wb);xb.preApply(Ab);yb.apply(wb)};xd.prototype.bezierVertex=function(){Yc=true;var a=[];if(Zc){throw"vertex() must be used at least once before calling bezierVertex()"}for(var b=0;b<arguments.length;b++){a[b]=arguments[b]}Uc.push(a);Uc[Uc.length-1]["isVert"]=false};yd.prototype.bezierVertex=function(){Yc=true;var a=[];if(Zc){throw"vertex() must be used at least once before calling bezierVertex()"}if(arguments.length===9){if(zb===d){zb=new Id}var b=Uc.length-1;me(fb,zb);zb.apply(Bb);var c=zb.array();var e=Uc[b][0],f=Uc[b][1],g=Uc[b][2];var h=c[4]*e+c[5]*arguments[0]+c[6]*arguments[3]+c[7]*arguments[6];var i=c[8]*e+c[9]*arguments[0]+c[10]*arguments[3]+c[11]*arguments[6];var j=c[12]*e+c[13]*arguments[0]+c[14]*arguments[3]+c[15]*arguments[6];var k=c[4]*f+c[5]*arguments[1]+c[6]*arguments[4]+c[7]*arguments[7];var l=c[8]*f+c[9]*arguments[1]+c[10]*arguments[4]+c[11]*arguments[7];var m=c[12]*f+c[13]*arguments[1]+c[14]*arguments[4]+c[15]*arguments[7];var n=c[4]*g+c[5]*arguments[2]+c[6]*arguments[5]+c[7]*arguments[8];var o=c[8]*g+c[9]*arguments[2]+c[10]*arguments[5]+c[11]*arguments[8];var p=c[12]*g+c[13]*arguments[2]+c[14]*arguments[5]+c[15]*arguments[8];for(var q=0;q<fb;q++){e+=h;h+=i;i+=j;f+=k;k+=l;l+=m;g+=n;n+=o;o+=p;r.vertex(e,f,g)}r.vertex(arguments[6],arguments[7],arguments[8])}};r.texture=function(a){var c=w.$ensureContext();if(a.__texture){c.bindTexture(c.TEXTURE_2D,a.__texture)}else if(a.localName==="canvas"){c.bindTexture(c.TEXTURE_2D,Sb);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,a);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.generateMipmap(c.TEXTURE_2D);Ub.width=a.width;Ub.height=a.height}else{var d=c.createTexture(),e=b.createElement("canvas"),f=e.getContext("2d"),g;if(a.width&a.width-1===0){e.width=a.width}else{g=1;while(g<a.width){g*=2}e.width=g}if(a.height&a.height-1===0){e.height=a.height}else{g=1;while(g<a.height){g*=2}e.height=g}f.drawImage(a.sourceImg,0,0,a.width,a.height,0,0,e.width,e.height);c.bindTexture(c.TEXTURE_2D,d);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR_MIPMAP_LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e);c.generateMipmap(c.TEXTURE_2D);a.__texture=d;Ub.width=a.width;Ub.height=a.height}Wb=true;c.useProgram(Db);nd("usingTexture3d",Db,"uUsingTexture",Wb)};r.textureMode=function(a){Vb=a};var oe=function(a,b,c,d,e,f,g,h,i,j,k,l){var m=d;var n=e;var o=f;var p=yb.array();var q=p[4]*a+p[5]*d+p[6]*g+p[7]*j;var s=p[8]*a+p[9]*d+p[10]*g+p[11]*j;var t=p[12]*a+p[13]*d+p[14]*g+p[15]*j;var u=p[4]*b+p[5]*e+p[6]*h+p[7]*k;var v=p[8]*b+p[9]*e+p[10]*h+p[11]*k;var w=p[12]*b+p[13]*e+p[14]*h+p[15]*k;var x=p[4]*c+p[5]*f+p[6]*i+p[7]*l;var y=p[8]*c+p[9]*f+p[10]*i+p[11]*l;var z=p[12]*c+p[13]*f+p[14]*i+p[15]*l;r.vertex(m,n,o);for(var A=0;A<cb;A++){m+=q;q+=s;s+=t;n+=u;u+=v;v+=w;o+=x;x+=y;y+=z;r.vertex(m,n,o)}};xd.prototype.curveVertex=function(a,b){Xc=true;r.vertex(a,b)};yd.prototype.curveVertex=function(a,b,c){Xc=true;if(!db){ne()}var d=[];d[0]=a;d[1]=b;d[2]=c;Vc.push(d);Wc++;if(Wc>3){oe(Vc[Wc-4][0],Vc[Wc-4][1],Vc[Wc-4][2],Vc[Wc-3][0],Vc[Wc-3][1],Vc[Wc-3][2],Vc[Wc-2][0],Vc[Wc-2][1],Vc[Wc-2][2],Vc[Wc-1][0],Vc[Wc-1][1],Vc[Wc-1][2])}};xd.prototype.curve=function(){if(arguments.length===8){r.beginShape();r.curveVertex(arguments[0],arguments[1]);r.curveVertex(arguments[2],arguments[3]);r.curveVertex(arguments[4],arguments[5]);r.curveVertex(arguments[6],arguments[7]);r.endShape()}};yd.prototype.curve=function(){if(arguments.length===12){r.beginShape();r.curveVertex(arguments[0],arguments[1],arguments[2]);r.curveVertex(arguments[3],arguments[4],arguments[5]);r.curveVertex(arguments[6],arguments[7],arguments[8]);r.curveVertex(arguments[9],arguments[10],arguments[11]);r.endShape()}};r.curveTightness=function(a){bb=a};r.curveDetail=function(a){cb=a;ne()};r.rectMode=function(a){Q=a};r.imageMode=function(a){switch(a){case n.CORNER:td=sd;break;case n.CORNERS:td=ud;break;case n.CENTER:td=vd;break;default:throw"Invalid imageMode"}};r.ellipseMode=function(a){R=a};r.arc=function(a,b,c,d,e,f){if(c<=0||f<e){return}if(R===n.CORNERS){c=c-a;d=d-b}else if(R===n.RADIUS){a=a-c;b=b-d;c=c*2;d=d*2}else if(R===n.CENTER){a=a-c/2;b=b-d/2}while(e<0){e+=n.TWO_PI;f+=n.TWO_PI}if(f-e>n.TWO_PI){e=0;f=n.TWO_PI}var g=c/2,h=d/2,i=a+g,j=b+h,k=0|.5+e*r.RAD_TO_DEG*2,l=0|.5+f*r.RAD_TO_DEG*2,m,o;if(z){var p=H;H=false;r.beginShape();r.vertex(i,j);for(m=k;m<=l;m++){o=m%n.SINCOS_LENGTH;r.vertex(i+Ac[o]*g,j+zc[o]*h)}r.endShape(n.CLOSE);H=p}if(H){var q=z;z=false;r.beginShape();for(m=k;m<=l;m++){o=m%n.SINCOS_LENGTH;r.vertex(i+Ac[o]*g,j+zc[o]*h)}r.endShape();z=q}};xd.prototype.line=function(a,b,e,f){if(!H){return}a=c.round(a);e=c.round(e);b=c.round(b);f=c.round(f);if(a===e&&b===f){r.point(a,b);return}var g=d,h=d,i=true,j=Fc.array(),k=[1,0,0,0,1,0];for(var l=0;l<6&&i;l++){i=j[l]===k[l]}if(i){if(a===e){if(b>f){g=b;b=f;f=g}f++;if(L%2===1){s.translate(.5,0)}}else if(b===f){if(a>e){g=a;a=e;e=g}e++;if(L%2===1){s.translate(0,.5)}}if(L===1){h=s.lineCap;s.lineCap="butt"}}s.beginPath();s.moveTo(a||0,b||0);s.lineTo(e||0,f||0);he();if(i){if(a===e&&L%2===1){s.translate(-.5,0)}else if(b===f&&L%2===1){s.translate(0,-.5)}if(L===1){s.lineCap=h}}};yd.prototype.line=function(a,b,c,e,f,g){if(f===d||g===d){g=0;f=e;e=c;c=0}if(a===e&&b===f&&c===g){r.point(a,b,c);return}var h=[a,b,c,e,f,g];var i=new Id;i.scale(1,-1,1);i.apply(Fc.array());i.transpose();if(L>0&&H){s.useProgram(Eb);od("uModel2d",Eb,"uModel",false,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);od("uView2d",Eb,"uView",false,i.array());md("uColor2d",Eb,"uColor",I);nd("uIsDrawingText",Eb,"uIsDrawingText",false);pd("aVertex2d",Eb,"aVertex",3,Mb);qd("aTextureCoord2d",Eb,"aTextureCoord");s.bufferData(s.ARRAY_BUFFER,new j(h),s.STREAM_DRAW);s.drawArrays(s.LINES,0,2)}};xd.prototype.bezier=function(){if(arguments.length!==8){throw"You must use 8 parameters for bezier() in 2D mode"}r.beginShape();r.vertex(arguments[0],arguments[1]);r.bezierVertex(arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);r.endShape()};yd.prototype.bezier=function(){if(arguments.length!==12){throw"You must use 12 parameters for bezier() in 3D mode"}r.beginShape();r.vertex(arguments[0],arguments[1],arguments[2]);r.bezierVertex(arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9],arguments[10],arguments[11]);r.endShape()};r.bezierDetail=function(a){fb=a};r.bezierPoint=function(a,b,c,d,e){return(1-e)*(1-e)*(1-e)*a+3*(1-e)*(1-e)*e*b+3*(1-e)*e*e*c+e*e*e*d};r.bezierTangent=function(a,b,c,d,e){return 3*e*e*(-a+3*b-3*c+d)+6*e*(a-2*b+c)+3*(-a+b)};r.curvePoint=function(a,b,c,d,e){return.5*(2*b+(-a+c)*e+(2*a-5*b+4*c-d)*e*e+(-a+3*b-3*c+d)*e*e*e)};r.curveTangent=function(a,b,c,d,e){return.5*(-a+c+2*(2*a-5*b+4*c-d)*e+3*(-a+3*b-3*c+d)*e*e)};r.triangle=function(a,b,c,d,e,f){r.beginShape(n.TRIANGLES);r.vertex(a,b,0);r.vertex(c,d,0);r.vertex(e,f,0);r.endShape()};r.quad=function(a,b,c,d,e,f,g,h){r.beginShape(n.QUADS);r.vertex(a,b,0);r.vertex(c,d,0);r.vertex(e,f,0);r.vertex(g,h,0);r.endShape()};var pe=function(a,b,e,f,g,h,i,j){if(j===d){h=g;i=g;j=g}var k=e/2,l=f/2;if(g>k||g>l){g=c.min(k,l)}if(h>k||h>l){h=c.min(k,l)}if(i>k||i>l){i=c.min(k,l)}if(j>k||j>l){j=c.min(k,l)}if(!z||H){s.translate(.5,.5)}s.beginPath();s.moveTo(a+g,b);s.lineTo(a+e-h,b);s.quadraticCurveTo(a+e,b,a+e,b+h);s.lineTo(a+e,b+f-i);s.quadraticCurveTo(a+e,b+f,a+e-i,b+f);s.lineTo(a+j,b+f);s.quadraticCurveTo(a,b+f,a,b+f-j);s.lineTo(a,b+g);s.quadraticCurveTo(a,b,a+g,b);if(!z||H){s.translate(-.5,-.5)}ge();he()};xd.prototype.rect=function(a,b,e,f,g,h,i,j){if(!e&&!f){return}if(Q===n.CORNERS){e-=a;f-=b}else if(Q===n.RADIUS){e*=2;f*=2;a-=e/2;b-=f/2}else if(Q===n.CENTER){a-=e/2;b-=f/2}a=c.round(a);b=c.round(b);e=c.round(e);f=c.round(f);if(g!==d){pe(a,b,e,f,g,h,i,j);return}if(H&&L%2===1){s.translate(.5,.5)}s.beginPath();s.rect(a,b,e,f);ge();he();if(H&&L%2===1){s.translate(-.5,-.5)}};yd.prototype.rect=function(a,b,c,e,f,g,h,i){if(f!==d){throw"rect() with rounded corners is not supported in 3D mode"}if(Q===n.CORNERS){c-=a;e-=b}else if(Q===n.RADIUS){c*=2;e*=2;a-=c/2;b-=e/2}else if(Q===n.CENTER){a-=c/2;b-=e/2}var j=new Id;j.translate(a,b,0);j.scale(c,e,1);j.transpose();var k=new Id;k.scale(1,-1,1);k.apply(Fc.array());k.transpose();if(L>0&&H){s.useProgram(Eb);od("uModel2d",Eb,"uModel",false,j.array());od("uView2d",Eb,"uView",false,k.array());md("uColor2d",Eb,"uColor",I);nd("uIsDrawingText2d",Eb,"uIsDrawingText",false);pd("aVertex2d",Eb,"aVertex",3,Jb);qd("aTextureCoord2d",Eb,"aTextureCoord");s.drawArrays(s.LINE_LOOP,0,dd.length/3)}if(z){s.useProgram(Db);od("uModel3d",Db,"uModel",false,j.array());od("uView3d",Db,"uView",false,k.array());s.enable(s.POLYGON_OFFSET_FILL);s.polygonOffset(1,1);md("color3d",Db,"uColor",A);if(tc>0){var l=new Id;l.set(k);var m=new Id;m.set(j);l.mult(m);var o=new Id;o.set(l);o.invert();o.transpose();od("uNormalTransform3d",Db,"uNormalTransform",false,o.array());pd("aNormal3d",Db,"aNormal",3,Kb)}else{qd("normal3d",Db,"aNormal")}pd("vertex3d",Db,"aVertex",3,Jb);s.drawArrays(s.TRIANGLE_FAN,0,dd.length/3);s.disable(s.POLYGON_OFFSET_FILL)}};xd.prototype.ellipse=function(a,b,c,d){a=a||0;b=b||0;if(c<=0&&d<=0){return}if(R===n.RADIUS){c*=2;d*=2}else if(R===n.CORNERS){c=c-a;d=d-b;a+=c/2;b+=d/2}else if(R===n.CORNER){a+=c/2;b+=d/2}if(c===d){s.beginPath();s.arc(a,b,c/2,0,n.TWO_PI,false);ge();he()}else{var e=c/2,f=d/2,g=.5522847498307933,h=g*e,i=g*f;r.beginShape();r.vertex(a+e,b);r.bezierVertex(a+e,b-i,a+h,b-f,a,b-f);r.bezierVertex(a-h,b-f,a-e,b-i,a-e,b);r.bezierVertex(a-e,b+i,a-h,b+f,a,b+f);r.bezierVertex(a+h,b+f,a+e,b+i,a+e,b);r.endShape()}};yd.prototype.ellipse=function(a,b,c,d){a=a||0;b=b||0;if(c<=0&&d<=0){return}if(R===n.RADIUS){c*=2;d*=2}else if(R===n.CORNERS){c=c-a;d=d-b;a+=c/2;b+=d/2}else if(R===n.CORNER){a+=c/2;b+=d/2}var e=c/2,f=d/2,g=.5522847498307933,h=g*e,i=g*f;r.beginShape();r.vertex(a+e,b);r.bezierVertex(a+e,b-i,0,a+h,b-f,0,a,b-f,0);r.bezierVertex(a-h,b-f,0,a-e,b-i,0,a-e,b,0);r.bezierVertex(a-e,b+i,0,a-h,b+f,0,a,b+f,0);r.bezierVertex(a+h,b+f,0,a+e,b+i,0,a+e,b,0);r.endShape();if(z){var j=0,k=0,l,m;for(l=0;l<Uc.length;l++){j+=Uc[l][0];k+=Uc[l][1]}j/=Uc.length;k/=Uc.length;var o=[],p=[],q=[];o[0]=j;o[1]=k;o[2]=0;o[3]=0;o[4]=0;o[5]=A[0];o[6]=A[1];o[7]=A[2];o[8]=A[3];o[9]=I[0];o[10]=I[1];o[11]=I[2];o[12]=I[3];o[13]=S;o[14]=T;o[15]=U;Uc.unshift(o);for(l=0;l<Uc.length;l++){for(m=0;m<3;m++){p.push(Uc[l][m])}for(m=5;m<9;m++){q.push(Uc[l][m])}}ke(p,"TRIANGLE_FAN",q)}};r.normal=function(a,b,c){if(arguments.length!==3||!(typeof a==="number"&&typeof b==="number"&&typeof c==="number")){throw"normal() requires three numeric arguments."}S=a;T=b;U=c;if($!==0){if(V===n.NORMAL_MODE_AUTO){V=n.NORMAL_MODE_SHAPE}else if(V===n.NORMAL_MODE_SHAPE){V=n.NORMAL_MODE_VERTEX}}};r.save=function(b,c){if(c!==d){return a.open(c.toDataURL(),"_blank")}return a.open(r.externals.canvas.toDataURL(),"_blank")};var qe=0;r.saveFrame=function(a){if(a===d){a="screen-####.png"}var b=a.replace(/#+/,function(a){var b=""+qe++;while(b.length<a.length){b="0"+b}return b});r.save(b)};var re=b.createElement("canvas").getContext("2d");var se=[d,d,d];var ve=function(a,c,d){this.__isDirty=false;if(a instanceof HTMLImageElement){this.fromHTMLImageData(a)}else if(c||d){this.width=a||1;this.height=c||1;var e=this.sourceImg=b.createElement("canvas");e.width=this.width;e.height=this.height;var f=this.imageData=e.getContext("2d").createImageData(this.width,this.height);this.format=d===n.ARGB||d===n.ALPHA?d:n.RGB;if(this.format===n.RGB){for(var g=3,h=this.imageData.data,i=h.length;g<i;g+=4){h[g]=255}}this.__isDirty=true;this.updatePixels()}else{this.width=0;this.height=0;this.imageData=re.createImageData(1,1);this.format=n.ARGB}this.pixels=ue(this)};ve.prototype={__isPImage:true,updatePixels:function(){var a=this.sourceImg;if(a&&a instanceof HTMLCanvasElement&&this.__isDirty){a.getContext("2d").putImageData(this.imageData,0,0)}this.__isDirty=false},fromHTMLImageData:function(a){var b=te(a);try{var c=b.context.getImageData(0,0,a.width,a.height);this.fromImageData(c)}catch(d){if(a.width&&a.height){this.isRemote=true;this.width=a.width;this.height=a.height}}this.sourceImg=a},get:function(a,b,c,d){if(!arguments.length){return r.get(this)}if(arguments.length===2){return r.get(a,b,this)}if(arguments.length===4){return r.get(a,b,c,d,this)}},set:function(a,b,c){r.set(a,b,c,this);this.__isDirty=true},blend:function(a,b,c,d,e,f,g,h,i,j){if(arguments.length===9){r.blend(this,a,b,c,d,e,f,g,h,i,this)}else if(arguments.length===10){r.blend(a,b,c,d,e,f,g,h,i,j,this)}delete this.sourceImg},copy:function(a,b,c,d,e,f,g,h,i){if(arguments.length===8){r.blend(this,a,b,c,d,e,f,g,h,n.REPLACE,this)}else if(arguments.length===9){r.blend(a,b,c,d,e,f,g,h,i,n.REPLACE,this)}delete this.sourceImg},filter:function(a,b){if(arguments.length===2){r.filter(a,b,this)}else if(arguments.length===1){r.filter(a,null,this)}delete this.sourceImg},save:function(a){r.save(a,this)},resize:function(a,b){if(this.isRemote){throw"Image is loaded remotely. Cannot resize."}if(this.width!==0||this.height!==0){if(a===0&&b!==0){a=c.floor(this.width/this.height*b)}else if(b===0&&a!==0){b=c.floor(this.height/this.width*a)}var d=te(this.imageData).canvas;var e=te(d,a,b).context.getImageData(0,0,a,b);this.fromImageData(e)}},mask:function(a){var b=this.toImageData(),c,d;if(a instanceof ve||a.__isPImage){if(a.width===this.width&&a.height===this.height){a=a.toImageData();for(c=2,d=this.width*this.height*4;c<d;c+=4){b.data[c+1]=a.data[c]}}else{throw"mask must have the same dimensions as PImage."}}else if(a instanceof Array){if(this.width*this.height===a.length){for(c=0,d=a.length;c<d;++c){b.data[c*4+3]=a[c]}}else{throw"mask array must be the same length as PImage pixels array."}}this.fromImageData(b)},loadPixels:e,toImageData:function(){if(this.isRemote){return this.sourceImg}if(!this.__isDirty){return this.imageData}var a=te(this.sourceImg);return a.context.getImageData(0,0,this.width,this.height)},toDataURL:function(){if(this.isRemote){throw"Image is loaded remotely. Cannot create dataURI."}var a=te(this.imageData);return a.canvas.toDataURL()},fromImageData:function(a){var c=a.width,d=a.height,e=b.createElement("canvas"),f=e.getContext("2d");this.width=e.width=c;this.height=e.height=d;f.putImageData(a,0,0);this.format=n.ARGB;this.imageData=a;this.sourceImg=e}};r.PImage=ve;r.createImage=function(a,b,c){return new ve(a,b,c)};r.loadImage=function(a,c,d){if(c){a=a+"."+c}var e;if(u.imageCache.images[a]){e=new ve(u.imageCache.images[a]);e.loaded=true;return e}e=new ve;var f=b.createElement("img");e.sourceImg=f;f.onload=function(a,b,c){var d=a;var e=b;var f=c;return function(){e.fromHTMLImageData(d);e.loaded=true;if(f){f()}}}(f,e,d);f.src=a;return e};r.requestImage=r.loadImage;r.get=function(a,b,c,d,e){if(e!==undefined){return ze(a,b,c,d,e)}if(d!==undefined){return ye(a,b,c,d)}if(c!==undefined){return xe(a,b,c)}if(b!==undefined){return we(a,b)}if(a!==undefined){return ze(0,0,a.width,a.height,a)}return ye(0,0,r.width,r.height)};r.createGraphics=function(a,b,c){var d=new F;d.size(a,b,c);return d};r.set=function(a,b,c,d){var e,f;if(arguments.length===3){if(typeof c==="number"){De(a,b,c)}else if(c instanceof ve||c.__isPImage){r.image(c,a,b)}}else if(arguments.length===4){Ee(a,b,c,d)}};r.imageData={};r.pixels={getLength:function(){return r.imageData.data.length?r.imageData.data.length/4:0},getPixel:function(a){var b=a*4,c=r.imageData.data;return c[b+3]<<24&4278190080|c[b+0]<<16&16711680|c[b+1]<<8&65280|c[b+2]&255},setPixel:function(a,b){var c=a*4,d=r.imageData.data;d[c+0]=(b&16711680)>>>16;d[c+1]=(b&65280)>>>8;d[c+2]=b&255;d[c+3]=(b&4278190080)>>>24},toArray:function(){var a=[],b=r.imageData.width*r.imageData.height,c=r.imageData.data;for(var d=0,e=0;d<b;d++,e+=4){a.push(c[e+3]<<24&4278190080|c[e+0]<<16&16711680|c[e+1]<<8&65280|c[e+2]&255)}return a},set:function(a){for(var b=0,c=a.length;b<c;b++){this.setPixel(b,a[b])}}};r.loadPixels=function(){r.imageData=w.$ensureContext().getImageData(0,0,r.width,r.height)};r.updatePixels=function(){if(r.imageData){w.$ensureContext().putImageData(r.imageData,0,0)}};r.hint=function(a){var b=w.$ensureContext();if(a===n.DISABLE_DEPTH_TEST){b.disable(b.DEPTH_TEST);b.depthMask(false);b.clear(b.DEPTH_BUFFER_BIT)}else if(a===n.ENABLE_DEPTH_TEST){b.enable(b.DEPTH_TEST);b.depthMask(true)}else if(a===n.ENABLE_OPENGL_2X_SMOOTH||a===n.ENABLE_OPENGL_4X_SMOOTH){N=true}else if(a===n.DISABLE_OPENGL_2X_SMOOTH){N=false}};var Fe=function(a,b,c,d){var e;if(a instanceof ve||a.__isPImage){e=a;if(!e.loaded){throw"Error using image in background(): PImage not loaded."}if(e.width!==r.width||e.height!==r.height){throw"Background image must be the same dimensions as the canvas."}}else{e=r.color(a,b,c,d)}eb=e};xd.prototype.background=function(a,b,c,e){if(a!==d){Fe(a,b,c,e)}if(eb instanceof ve||eb.__isPImage){Od();s.setTransform(1,0,0,1,0,0);r.image(eb,0,0);Pd()}else{Od();s.setTransform(1,0,0,1,0,0);if(r.alpha(eb)!==gb){s.clearRect(0,0,r.width,r.height)}s.fillStyle=r.color.toString(eb);s.fillRect(0,0,r.width,r.height);G=true;Pd()}};yd.prototype.background=function(a,b,c,d){if(arguments.length>0){Fe(a,b,c,d)}var e=r.color.toGLArray(eb);s.clearColor(e[0],e[1],e[2],e[3]);s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT)};xd.prototype.image=function(a,b,d,e,f){b=c.round(b);d=c.round(d);if(a.width>0){var g=e||a.width;var h=f||a.height;var i=td(b||0,d||0,e||a.width,f||a.height,arguments.length<4);var j=!!a.sourceImg&&pb===null;if(j){var k=a.sourceImg;if(a.__isDirty){a.updatePixels()}s.drawImage(k,0,0,k.width,k.height,i.x,i.y,i.w,i.h)}else{var l=a.toImageData();if(pb!==null){pb(l);a.__isDirty=true}s.drawImage(te(l).canvas,0,0,a.width,a.height,i.x,i.y,i.w,i.h)}}};yd.prototype.image=function(a,b,d,e,f){if(a.width>0){b=c.round(b);d=c.round(d);e=e||a.width;f=f||a.height;r.beginShape(r.QUADS);r.texture(a);r.vertex(b,d,0,0,0);r.vertex(b,d+f,0,0,f);r.vertex(b+e,d+f,0,e,f);r.vertex(b+e,d,0,e,0);r.endShape()}};r.tint=function(a,b,c,d){var e=r.color(a,b,c,d);var f=r.red(e)/hb;var g=r.green(e)/ib;var h=r.blue(e)/jb;var i=r.alpha(e)/gb;pb=function(a){var b=a.data,c=4*a.width*a.height;for(var d=0;d<c;){b[d++]*=f;b[d++]*=g;b[d++]*=h;b[d++]*=i}};qb=function(a){for(var b=0;b<a.length;){a[b++]=f;a[b++]=g;a[b++]=h;a[b++]=i}}};r.noTint=function(){pb=null;qb=null};r.copy=function(a,b,c,e,f,g,h,i,j){if(j===d){j=i;i=h;h=g;g=f;f=e;e=c;c=b;b=a;a=r}r.blend(a,b,c,e,f,g,h,i,j,n.REPLACE)};r.blend=function(a,b,c,e,f,g,h,i,j,k,l){if(a.isRemote){throw"Image is loaded remotely. Cannot blend image."}if(k===d){k=j;j=i;i=h;h=g;g=f;f=e;e=c;c=b;b=a;a=r}var m=b+e,n=c+f,o=g+i,p=h+j,q=l||r;if(l===d||k===d){r.loadPixels()}a.loadPixels();if(a===r&&r.intersect(b,c,m,n,g,h,o,p)){r.blit_resize(r.get(b,c,m-b,n-c),0,0,m-b-1,n-c-1,q.imageData.data,q.width,q.height,g,h,o,p,k)}else{r.blit_resize(a,b,c,m,n,q.imageData.data,q.width,q.height,g,h,o,p,k)}if(l===d){r.updatePixels()}};var Ge=function(a){var b=r.floor(a*3.5),c,d;b=b<1?1:b<248?b:248;if(r.shared.blurRadius!==b){r.shared.blurRadius=b;r.shared.blurKernelSize=1+(r.shared.blurRadius<<1);r.shared.blurKernel=new j(r.shared.blurKernelSize);var e=r.shared.blurKernel;var f=r.shared.blurKernelSize;var g=r.shared.blurRadius;for(c=0;c<f;c++){e[c]=0}var h=(b-1)*(b-1);for(c=1;c<b;c++){e[b+c]=e[d]=h}e[b]=b*b}};var He=function(a,b){var c,d,e,f,g,h,i;var k,l,m,n,o;var p=b.pixels.getLength();var q=new j(p);var s=new j(p);var t=new j(p);var u=new j(p);var v=0;var w,x,y,z;Ge(a);var A=b.height;var B=b.width;var C=r.shared.blurKernelSize;var D=r.shared.blurRadius;var E=r.shared.blurKernel;var F=b.imageData.data;for(x=0;x<A;x++){for(w=0;w<B;w++){f=e=d=g=c=0;k=w-D;if(k<0){o=-k;k=0}else{if(k>=B){break}o=0}for(y=o;y<C;y++){if(k>=B){break}z=(k+v)*4;i=E[y];g+=i*F[z+3];d+=i*F[z];e+=i*F[z+1];f+=i*F[z+2];c+=i;k++}l=v+w;u[l]=g/c;q[l]=d/c;s[l]=e/c;t[l]=f/c}v+=B}v=0;m=-D;n=m*B;for(x=0;x<A;x++){for(w=0;w<B;w++){f=e=d=g=c=0;if(m<0){o=l=-m;k=w}else{if(m>=A){break}o=0;l=m;k=w+n}for(y=o;y<C;y++){if(l>=A){break}i=E[y];g+=i*u[k];d+=i*q[k];e+=i*s[k];f+=i*t[k];c+=i;l++;k+=B}z=(w+v)*4;F[z]=d/c;F[z+1]=e/c;F[z+2]=f/c;F[z+3]=g/c}v+=B;n+=B;m++}};var Ie=function(a,b){var c=0;var d=b.pixels.getLength();var e=new k(d);var f,g,h,i,j;var l,m,n,o,p,q,r,s,t,u,v,w;if(!a){while(c<d){f=c;g=c+b.width;while(c<g){h=i=b.pixels.getPixel(c);m=c-1;l=c+1;n=c-b.width;o=c+b.width;if(m<f){m=c}if(l>=g){l=c}if(n<0){n=0}if(o>=d){o=c}r=b.pixels.getPixel(n);q=b.pixels.getPixel(m);s=b.pixels.getPixel(o);p=b.pixels.getPixel(l);j=77*(h>>16&255)+151*(h>>8&255)+28*(h&255);u=77*(q>>16&255)+151*(q>>8&255)+28*(q&255);t=77*(p>>16&255)+151*(p>>8&255)+28*(p&255);v=77*(r>>16&255)+151*(r>>8&255)+28*(r&255);w=77*(s>>16&255)+151*(s>>8&255)+28*(s&255);if(u>j){i=q;j=u}if(t>j){i=p;j=t}if(v>j){i=r;j=v}if(w>j){i=s;j=w}e[c++]=i}}}else{while(c<d){f=c;g=c+b.width;while(c<g){h=i=b.pixels.getPixel(c);m=c-1;l=c+1;n=c-b.width;o=c+b.width;if(m<f){m=c}if(l>=g){l=c}if(n<0){n=0}if(o>=d){o=c}r=b.pixels.getPixel(n);q=b.pixels.getPixel(m);s=b.pixels.getPixel(o);p=b.pixels.getPixel(l);j=77*(h>>16&255)+151*(h>>8&255)+28*(h&255);u=77*(q>>16&255)+151*(q>>8&255)+28*(q&255);t=77*(p>>16&255)+151*(p>>8&255)+28*(p&255);v=77*(r>>16&255)+151*(r>>8&255)+28*(r&255);w=77*(s>>16&255)+151*(s>>8&255)+28*(s&255);if(u<j){i=q;j=u}if(t<j){i=p;j=t}if(v<j){i=r;j=v}if(w<j){i=s;j=w}e[c++]=i}}}b.pixels.set(e)};r.filter=function(a,b,c){var e,f,g,h;if(arguments.length===3){c.loadPixels();e=c}else{r.loadPixels();e=r}if(b===d){b=null}if(e.isRemote){throw"Image is loaded remotely. Cannot filter image."}var i=e.pixels.getLength();switch(a){case n.BLUR:var j=b||1;He(j,e);break;case n.GRAY:if(e.format===n.ALPHA){for(h=0;h<i;h++){f=255-e.pixels.getPixel(h);e.pixels.setPixel(h,4278190080|f<<16|f<<8|f)}e.format=n.RGB}else{for(h=0;h<i;h++){f=e.pixels.getPixel(h);g=77*(f>>16&255)+151*(f>>8&255)+28*(f&255)>>8;e.pixels.setPixel(h,f&n.ALPHA_MASK|g<<16|g<<8|g)}}break;case n.INVERT:for(h=0;h<i;h++){e.pixels.setPixel(h,e.pixels.getPixel(h)^16777215)}break;case n.POSTERIZE:if(b===null){throw"Use filter(POSTERIZE, int levels) instead of filter(POSTERIZE)"}var k=r.floor(b);if(k<2||k>255){throw"Levels must be between 2 and 255 for filter(POSTERIZE, levels)"}var l=k-1;for(h=0;h<i;h++){var m=e.pixels.getPixel(h)>>16&255;var o=e.pixels.getPixel(h)>>8&255;var p=e.pixels.getPixel(h)&255;m=(m*k>>8)*255/l;o=(o*k>>8)*255/l;p=(p*k>>8)*255/l;e.pixels.setPixel(h,4278190080&e.pixels.getPixel(h)|m<<16|o<<8|p)}break;case n.OPAQUE:for(h=0;h<i;h++){e.pixels.setPixel(h,e.pixels.getPixel(h)|4278190080)}e.format=n.RGB;break;case n.THRESHOLD:if(b===null){b=.5}if(b<0||b>1){throw"Level must be between 0 and 1 for filter(THRESHOLD, level)"}var q=r.floor(b*255);for(h=0;h<i;h++){var s=r.max((e.pixels.getPixel(h)&n.RED_MASK)>>16,r.max((e.pixels.getPixel(h)&n.GREEN_MASK)>>8,e.pixels.getPixel(h)&n.BLUE_MASK));e.pixels.setPixel(h,e.pixels.getPixel(h)&n.ALPHA_MASK|(s<q?0:16777215))}break;case n.ERODE:Ie(true,e);break;case n.DILATE:Ie(false,e);break}e.updatePixels()};r.shared={fracU:0,ifU:0,fracV:0,ifV:0,u1:0,u2:0,v1:0,v2:0,sX:0,sY:0,iw:0,iw1:0,ih1:0,ul:0,ll:0,ur:0,lr:0,cUL:0,cLL:0,cUR:0,cLR:0,srcXOffset:0,srcYOffset:0,r:0,g:0,b:0,a:0,srcBuffer:null,blurRadius:0,blurKernelSize:0,blurKernel:null};r.intersect=function(a,b,c,d,e,f,g,h){var i=c-a+1;var j=d-b+1;var k=g-e+1;var l=h-f+1;if(e<a){k+=e-a;if(k>i){k=i}}else{var m=i+a-e;if(k>m){k=m}}if(f<b){l+=f-b;if(l>j){l=j}}else{var n=j+b-f;if(l>n){l=n}}return!(k<=0||l<=0)};var Je={};Je[n.BLEND]=r.modes.blend;Je[n.ADD]=r.modes.add;Je[n.SUBTRACT]=r.modes.subtract;Je[n.LIGHTEST]=r.modes.lightest;Je[n.DARKEST]=r.modes.darkest;Je[n.REPLACE]=r.modes.replace;Je[n.DIFFERENCE]=r.modes.difference;Je[n.EXCLUSION]=r.modes.exclusion;Je[n.MULTIPLY]=r.modes.multiply;Je[n.SCREEN]=r.modes.screen;Je[n.OVERLAY]=r.modes.overlay;Je[n.HARD_LIGHT]=r.modes.hard_light;Je[n.SOFT_LIGHT]=r.modes.soft_light;Je[n.DODGE]=r.modes.dodge;Je[n.BURN]=r.modes.burn;r.blit_resize=function(a,b,d,e,f,g,h,i,j,k,l,m,o){var p,q;if(b<0){b=0}if(d<0){d=0}if(e>=a.width){e=a.width-1}if(f>=a.height){f=a.height-1}var s=e-b;var t=f-d;var u=l-j;var v=m-k;if(u<=0||v<=0||s<=0||t<=0||j>=h||k>=i||b>=a.width||d>=a.height){return}var w=c.floor(s/u*n.PRECISIONF);var x=c.floor(t/v*n.PRECISIONF);var y=r.shared;y.srcXOffset=c.floor(j<0?-j*w:b*n.PRECISIONF);y.srcYOffset=c.floor(k<0?-k*x:d*n.PRECISIONF);if(j<0){u+=j;j=0}if(k<0){v+=k;k=0}u=c.min(u,h-j);v=c.min(v,i-k);var z=k*h+j;var A;y.srcBuffer=a.imageData.data;y.iw=a.width;y.iw1=a.width-1;y.ih1=a.height-1;var B=r.filter_bilinear,C=r.filter_new_scanline,D=Je[o],E,F,G,H,I,J,K=n.ALPHA_MASK,L=n.RED_MASK,M=n.GREEN_MASK,N=n.BLUE_MASK,O=n.PREC_MAXVAL,P=n.PRECISIONB,Q=n.PREC_RED_SHIFT,R=n.PREC_ALPHA_SHIFT,S=y.srcBuffer,T=c.min;for(q=0;q<v;q++){y.sX=y.srcXOffset;y.fracV=y.srcYOffset&O;y.ifV=O-y.fracV;y.v1=(y.srcYOffset>>P)*y.iw;y.v2=T((y.srcYOffset>>P)+1,y.ih1)*y.iw;for(p=0;p<u;p++){F=(z+p)*4;A=g[F+3]<<24&K|g[F]<<16&L|g[F+1]<<8&M|g[F+2]&N;y.fracU=y.sX&O;y.ifU=O-y.fracU;y.ul=y.ifU*y.ifV>>P;y.ll=y.ifU*y.fracV>>P;y.ur=y.fracU*y.ifV>>P;y.lr=y.fracU*y.fracV>>P;y.u1=y.sX>>P;y.u2=T(y.u1+1,y.iw1);G=(y.v1+y.u1)*4;H=(y.v1+y.u2)*4;I=(y.v2+y.u1)*4;J=(y.v2+y.u2)*4;y.cUL=S[G+3]<<24&K|S[G]<<16&L|S[G+1]<<8&M|S[G+2]&N;y.cUR=S[H+3]<<24&K|S[H]<<16&L|S[H+1]<<8&M|S[H+2]&N;y.cLL=S[I+3]<<24&K|S[I]<<16&L|S[I+1]<<8&M|S[I+2]&N;y.cLR=S[J+3]<<24&K|S[J]<<16&L|S[J+1]<<8&M|S[J+2]&N;y.r=y.ul*((y.cUL&L)>>16)+y.ll*((y.cLL&L)>>16)+y.ur*((y.cUR&L)>>16)+y.lr*((y.cLR&L)>>16)<<Q&L;y.g=y.ul*(y.cUL&M)+y.ll*(y.cLL&M)+y.ur*(y.cUR&M)+y.lr*(y.cLR&M)>>>P&M;y.b=y.ul*(y.cUL&N)+y.ll*(y.cLL&N)+y.ur*(y.cUR&N)+y.lr*(y.cLR&N)>>>P;y.a=y.ul*((y.cUL&K)>>>24)+y.ll*((y.cLL&K)>>>24)+y.ur*((y.cUR&K)>>>24)+y.lr*((y.cLR&K)>>>24)<<R&K;E=D(A,y.a|y.r|y.g|y.b);g[F]=(E&L)>>>16;g[F+1]=(E&M)>>>8;g[F+2]=E&N;g[F+3]=(E&K)>>>24;y.sX+=w}z+=h;y.srcYOffset+=x}};r.loadFont=function(a,b){if(a===d){throw"font name required in loadFont."}if(a.indexOf(".svg")===-1){if(b===d){b=gc.size}return E.get(a,b)}var c=r.loadGlyphs(a);return{name:a,css:"12px sans-serif",glyph:true,units_per_em:c.units_per_em,horiz_adv_x:1/c.units_per_em*c.horiz_adv_x,ascent:c.ascent,descent:c.descent,width:function(b){var c=0;var d=b.length;for(var e=0;e<d;e++){try{c+=parseFloat(r.glyphLook(r.glyphTable[a],b[e]).horiz_adv_x)}catch(f){F.debug(f)}}return c/r.glyphTable[a].units_per_em}}};r.createFont=function(a,b){return r.loadFont(a,b)};r.textFont=function(a,b){if(b!==d){if(!a.glyph){a=E.get(a.name,b)}cc=b}gc=a;bc=gc.name;dc=gc.ascent;ec=gc.descent;fc=gc.leading;var c=w.$ensureContext();c.font=gc.css};r.textSize=function(a){gc=E.get(bc,a);cc=a;dc=gc.ascent;ec=gc.descent;fc=gc.leading;var b=w.$ensureContext();b.font=gc.css};r.textAscent=function(){return dc};r.textDescent=function(){return ec};r.textLeading=function(a){fc=a};r.textAlign=function(a,b){$b=a;_b=b||n.BASELINE};xd.prototype.textWidth=function(a){var b=Ke(a).split(/\r?\n/g),d=0;var e,f=b.length;s.font=gc.css;for(e=0;e<f;++e){d=c.max(d,gc.measureTextWidth(b[e]))}return d|0};yd.prototype.textWidth=function(a){var e=Ke(a).split(/\r?\n/g),f=0;var g,h=e.length;if(vb===d){vb=b.createElement("canvas")}var i=vb.getContext("2d");i.font=gc.css;for(g=0;g<h;++g){f=c.max(f,i.measureText(e[g]).width)}return f|0};r.glyphLook=function(a,b){try{switch(b){case"1":return a.one;case"2":return a.two;case"3":return a.three;case"4":return a.four;case"5":return a.five;case"6":return a.six;case"7":return a.seven;case"8":return a.eight;case"9":return a.nine;case"0":return a.zero;case" ":return a.space;case"$":return a.dollar;case"!":return a.exclam;case'"':return a.quotedbl;case"#":return a.numbersign;case"%":return a.percent;case"&":return a.ampersand;case"'":return a.quotesingle;case"(":return a.parenleft;case")":return a.parenright;case"*":return a.asterisk;case"+":return a.plus;case",":return a.comma;case"-":return a.hyphen;case".":return a.period;case"/":return a.slash;case"_":return a.underscore;case":":return a.colon;case";":return a.semicolon;case"<":return a.less;case"=":return a.equal;case">":return a.greater;case"?":return a.question;case"@":return a.at;case"[":return a.bracketleft;case"\\":return a.backslash;case"]":return a.bracketright;case"^":return a.asciicircum;case"`":return a.grave;case"{":return a.braceleft;case"|":return a.bar;case"}":return a.braceright;case"~":return a.asciitilde;default:return a[b]}}catch(c){F.debug(c)}};xd.prototype.text$line=function(a,b,c,d,e){var f=0,g=0;if(!gc.glyph){if(a&&"fillText"in s){if(G){s.fillStyle=r.color.toString(D);G=false}if(e===n.RIGHT||e===n.CENTER){f=gc.measureTextWidth(a);if(e===n.RIGHT){g=-f}else{g=-f/2}}s.fillText(a,b+g,c)}}else{var h=r.glyphTable[bc];Od();s.translate(b,c+cc);if(e===n.RIGHT||e===n.CENTER){f=h.width(a);if(e===n.RIGHT){g=-f}else{g=-f/2}}var i=h.units_per_em,j=1/i*cc;s.scale(j,j);for(var k=0,l=a.length;k<l;k++){try{r.glyphLook(h,a[k]).draw()}catch(m){F.debug(m)}}Pd()}};yd.prototype.text$line=function(a,c,e,f,g){if(vb===d){vb=b.createElement("canvas")}var h=s;s=vb.getContext("2d");s.font=gc.css;var i=gc.measureTextWidth(a);vb.width=i;vb.height=cc;s=vb.getContext("2d");s.font=gc.css;s.textBaseline="top";xd.prototype.text$line(a,0,0,0,n.LEFT);var j=vb.width/vb.height;s=h;s.bindTexture(s.TEXTURE_2D,Tb);s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,vb);s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR);s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR);s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE);s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE);var k=0;if(g===n.RIGHT){k=-i}else if(g===n.CENTER){k=-i/2}var l=new Id;var m=cc*.5;l.translate(c+k-m/2,e-m,f);l.scale(-j*m,-m,m);l.translate(-1,-1,-1);l.transpose();var o=new Id;o.scale(1,-1,1);o.apply(Fc.array());o.transpose();s.useProgram(Eb);pd("aVertex2d",Eb,"aVertex",3,Xb);pd("aTextureCoord2d",Eb,"aTextureCoord",2,Yb);nd("uSampler2d",Eb,"uSampler",[0]);nd("uIsDrawingText2d",Eb,"uIsDrawingText",true);od("uModel2d",Eb,"uModel",false,l.array());od("uView2d",Eb,"uView",false,o.array());md("uColor2d",Eb,"uColor",A);s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,Zb);s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0)};r.text=function(){if(ac===n.SHAPE){return}if(arguments.length===3){Le(Ke(arguments[0]),arguments[1],arguments[2],0)}else if(arguments.length===4){Le(Ke(arguments[0]),arguments[1],arguments[2],arguments[3])}else if(arguments.length===5){Me(Ke(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],0)}else if(arguments.length===6){Me(Ke(arguments[0]),arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}};r.textMode=function(a){ac=a};r.loadGlyphs=function(e){var f,g,h,i,j,k,l,m,n,o,p,q="[0-9\\-]+",s;var t=function(a,b){var c=0,d=[],e,f=new RegExp(a,"g");e=d[c]=f.exec(b);while(e){c++;e=d[c]=f.exec(b)}return d};var u=function(a){var b=t("[A-Za-z][0-9\\- ]+|Z",a);var d=function(){Od();return w.$ensureContext()};var e=function(){ge();he();Pd()};s="return {draw:function(){var curContext=beforePathDraw();curContext.beginPath();";f=0;g=0;h=0;i=0;j=0;k=0;a=0;m=0;n="";o=b.length-1;for(var l=0;l<o;l++){var r=b[l][0],u=t(q,r);switch(r[0]){case"M":f=parseFloat(u[0][0]);g=parseFloat(u[1][0]);s+="curContext.moveTo("+f+","+ -g+");";break;case"L":f=parseFloat(u[0][0]);g=parseFloat(u[1][0]);s+="curContext.lineTo("+f+","+ -g+");";break;case"H":f=parseFloat(u[0][0]);s+="curContext.lineTo("+f+","+ -g+");";break;case"V":g=parseFloat(u[0][0]);s+="curContext.lineTo("+f+","+ -g+");";break;case"T":j=parseFloat(u[0][0]);k=parseFloat(u[1][0]);if(n==="Q"||n==="T"){a=c.sqrt(c.pow(f-h,2)+c.pow(i-g,2));m=c.PI+c.atan2(h-f,i-g);h=f+c.sin(m)*a;i=g+c.cos(m)*a}else{h=f;i=g}s+="curContext.quadraticCurveTo("+h+","+ -i+","+j+","+ -k+");";f=j;g=k;break;case"Q":h=parseFloat(u[0][0]);i=parseFloat(u[1][0]);j=parseFloat(u[2][0]);k=parseFloat(u[3][0]);s+="curContext.quadraticCurveTo("+h+","+ -i+","+j+","+ -k+");";f=j;g=k;break;case"Z":s+="curContext.closePath();";break}n=r[0]}s+="afterPathDraw();";s+="curContext.translate("+p+",0);";s+="}}";return(new Function("beforePathDraw","afterPathDraw",s))(d,e)};var v=function(a){var b=a.getElementsByTagName("font");r.glyphTable[e].horiz_adv_x=b[0].getAttribute("horiz-adv-x");var c=a.getElementsByTagName("font-face")[0];r.glyphTable[e].units_per_em=parseFloat(c.getAttribute("units-per-em"));r.glyphTable[e].ascent=parseFloat(c.getAttribute("ascent"));r.glyphTable[e].descent=parseFloat(c.getAttribute("descent"));var f=a.getElementsByTagName("glyph"),g=f.length;for(var h=0;h<g;h++){var i=f[h].getAttribute("unicode");var j=f[h].getAttribute("glyph-name");p=f[h].getAttribute("horiz-adv-x");if(p===null){p=r.glyphTable[e].horiz_adv_x}l=f[h].getAttribute("d");if(l!==d){s=u(l);r.glyphTable[e][j]={name:j,unicode:i,horiz_adv_x:p,draw:s.draw}}}};var x=function(){var c;try{c=b.implementation.createDocument("","",null)}catch(d){F.debug(d.message);return}try{c.async=false;c.load(e);v(c.getElementsByTagName("svg")[0])}catch(f){F.debug(f);try{var g=new a.XMLHttpRequest;g.open("GET",e,false);g.send(null);v(g.responseXML.documentElement)}catch(h){F.debug(f)}}};r.glyphTable[e]={};x(e);return r.glyphTable[e]};r.param=function(a){var b="data-processing-"+a;if(i.hasAttribute(b)){return i.getAttribute(b)}for(var c=0,d=i.childNodes.length;c<d;++c){var e=i.childNodes.item(c);if(e.nodeType!==1||e.tagName.toLowerCase()!=="param"){continue}if(e.getAttribute("name")===a){return e.getAttribute("value")}}if(u.params.hasOwnProperty(a)){return u.params[a]}return null};zd.prototype.translate=Oe("translate");zd.prototype.scale=Oe("scale");zd.prototype.pushMatrix=Oe("pushMatrix");zd.prototype.popMatrix=Oe("popMatrix");zd.prototype.resetMatrix=Oe("resetMatrix");zd.prototype.applyMatrix=Oe("applyMatrix");zd.prototype.rotate=Oe("rotate");zd.prototype.rotateZ=Oe("rotateZ");zd.prototype.redraw=Oe("redraw");zd.prototype.toImageData=Oe("toImageData");zd.prototype.ambientLight=Oe("ambientLight");zd.prototype.directionalLight=Oe("directionalLight");zd.prototype.lightFalloff=Oe("lightFalloff");zd.prototype.lightSpecular=Oe("lightSpecular");zd.prototype.pointLight=Oe("pointLight");zd.prototype.noLights=Oe("noLights");zd.prototype.spotLight=Oe("spotLight");zd.prototype.beginCamera=Oe("beginCamera");zd.prototype.endCamera=Oe("endCamera");zd.prototype.frustum=Oe("frustum");zd.prototype.box=Oe("box");zd.prototype.sphere=Oe("sphere");zd.prototype.ambient=Oe("ambient");zd.prototype.emissive=Oe("emissive");zd.prototype.shininess=Oe("shininess");zd.prototype.specular=Oe("specular");zd.prototype.fill=Oe("fill");zd.prototype.stroke=Oe("stroke");zd.prototype.strokeWeight=Oe("strokeWeight");zd.prototype.smooth=Oe("smooth");zd.prototype.noSmooth=Oe("noSmooth");zd.prototype.point=Oe("point");zd.prototype.vertex=Oe("vertex");zd.prototype.endShape=Oe("endShape");zd.prototype.bezierVertex=Oe("bezierVertex");zd.prototype.curveVertex=Oe("curveVertex");zd.prototype.curve=Oe("curve");zd.prototype.line=Oe("line");zd.prototype.bezier=Oe("bezier");zd.prototype.rect=Oe("rect");zd.prototype.ellipse=Oe("ellipse");zd.prototype.background=Oe("background");zd.prototype.image=Oe("image");zd.prototype.textWidth=Oe("textWidth");zd.prototype.text$line=Oe("text$line");zd.prototype.$ensureContext=Oe("$ensureContext");zd.prototype.$newPMatrix=Oe("$newPMatrix");zd.prototype.size=function(a,b,c){Ne(c===n.WEBGL?"3D":"2D");r.size(a,b,c)};zd.prototype.$init=e;xd.prototype.$init=function(){r.size(r.width,r.height);s.lineCap="round";r.noSmooth();r.disableContextMenu()};yd.prototype.$init=function(){r.use3DContext=true;r.disableContextMenu()};wd.prototype.$ensureContext=function(){return s};Sd(i,"touchstart",function(a){i.setAttribute("style","-webkit-user-select: none");i.setAttribute("onclick","void(0)");i.setAttribute("style","-webkit-tap-highlight-color:rgba(0,0,0,0)");for(var b=0,c=Rd.length;b<c;b++){var e=Rd[b].type;if(e==="mouseout"||e==="mousemove"||e==="mousedown"||e==="mouseup"||e==="DOMMouseScroll"||e==="mousewheel"||e==="touchstart"){Td(Rd[b])}}if(r.touchStart!==d||r.touchMove!==d||r.touchEnd!==d||r.touchCancel!==d){Sd(i,"touchstart",function(a){if(r.touchStart!==d){a=Re(a);r.touchStart(a)}});Sd(i,"touchmove",function(a){if(r.touchMove!==d){a.preventDefault();a=Re(a);r.touchMove(a)}});Sd(i,"touchend",function(a){if(r.touchEnd!==d){a=Re(a);r.touchEnd(a)}});Sd(i,"touchcancel",function(a){if(r.touchCancel!==d){a=Re(a);r.touchCancel(a)}})}else{Sd(i,"touchstart",function(a){Qe(i,a.touches[0]);r.__mousePressed=true;r.mouseDragging=false;r.mouseButton=n.LEFT;if(typeof r.mousePressed==="function"){r.mousePressed()}});Sd(i,"touchmove",function(a){a.preventDefault();Qe(i,a.touches[0]);if(typeof r.mouseMoved==="function"&&!r.__mousePressed){r.mouseMoved()}if(typeof r.mouseDragged==="function"&&r.__mousePressed){r.mouseDragged();r.mouseDragging=true}});Sd(i,"touchend",function(a){r.__mousePressed=false;if(typeof r.mouseClicked==="function"&&!r.mouseDragging){r.mouseClicked()}if(typeof r.mouseReleased==="function"){r.mouseReleased()}})}i.dispatchEvent(a)});(function(){var a=true,b=function(a){a.preventDefault();a.stopPropagation()};r.disableContextMenu=function(){if(!a){return}Sd(i,"contextmenu",b);a=false};r.enableContextMenu=function(){if(a){return}Td({elem:i,type:"contextmenu",fn:b});a=true}})();Sd(i,"mousemove",function(a){Qe(i,a);if(typeof r.mouseMoved==="function"&&!r.__mousePressed){r.mouseMoved()}if(typeof r.mouseDragged==="function"&&r.__mousePressed){r.mouseDragged();r.mouseDragging=true}});Sd(i,"mouseout",function(a){if(typeof r.mouseOut==="function"){r.mouseOut()}});Sd(i,"mouseover",function(a){Qe(i,a);if(typeof r.mouseOver==="function"){r.mouseOver()}});Sd(i,"mousedown",function(a){r.__mousePressed=true;r.mouseDragging=false;switch(a.which){case 1:r.mouseButton=n.LEFT;break;case 2:r.mouseButton=n.CENTER;break;case 3:r.mouseButton=n.RIGHT;break}if(typeof r.mousePressed==="function"){r.mousePressed()}});Sd(i,"mouseup",function(a){r.__mousePressed=false;if(typeof r.mouseClicked==="function"&&!r.mouseDragging){r.mouseClicked()}if(typeof r.mouseReleased==="function"){r.mouseReleased()}});var Se=function(b){var c=0;if(b.wheelDelta){c=b.wheelDelta/120;if(a.opera){c=-c}}else if(b.detail){c=-b.detail/3}r.mouseScroll=c;if(c&&typeof r.mouseScrolled==="function"){r.mouseScrolled()}};Sd(b,"DOMMouseScroll",Se);Sd(b,"mousewheel",Se);if(!i.getAttribute("tabindex")){i.setAttribute("tabindex",0)}if(!p){if(h instanceof F.Sketch){u=h}else if(typeof h==="function"){u=new F.Sketch(h)}else if(!h){u=new F.Sketch(function(){})}else{u=F.compile(h)}r.externals.sketch=u;Ne();i.onfocus=function(){r.focused=true};i.onblur=function(){r.focused=false;if(!u.options.globalKeyEvents){Xe()}};if(u.options.pauseOnBlur){Sd(a,"focus",function(){if(O){r.loop()}});Sd(a,"blur",function(){if(O&&M){r.noLoop();O=true}Xe()})}var af=u.options.globalKeyEvents?a:i;Sd(af,"keydown",Ze);Sd(af,"keypress",$e);Sd(af,"keyup",_e);for(var bf in F.lib){if(F.lib.hasOwnProperty(bf)){if(F.lib[bf].hasOwnProperty("attach")){F.lib[bf].attach(r)}else if(F.lib[bf]instanceof Function){F.lib[bf].call(this)}}}var cf=100;var df=function(c){if(!(u.imageCache.pending||E.preloading.pending(cf))){if(a.opera){var d,e,f=u.imageCache.operaCache;for(d in f){if(f.hasOwnProperty(d)){e=f[d];if(e!==null){b.body.removeChild(e)}delete f[d]}}}u.attach(c,v);u.onLoad(c);if(c.setup){c.setup();c.resetMatrix();u.onSetup()}Ae();if(c.draw){if(!O){c.redraw()}else{c.loop()}}}else{a.setTimeout(function(){df(c)},cf)}};C(this);df(r)}else{u=new F.Sketch;Ne();r.size=function(a,b,c){if(c&&c===n.WEBGL){Ne("3D")}else{Ne("2D")}r.size(a,b,c)}}};F.debug=f;F.prototype=v;F.compile=function(a){var b=new F.Sketch;var c=I(a,b);var d=H(c);b.sourceCode=d;return b};var J=function(){"use strict";var a={},c="undefined",d="function",e=!1,f=!0,g=512,h="log";if(typeof tinylog!==c&&typeof tinylog[h]===d){a[h]=tinylog[h]}else if(typeof b!==c&&!b.fake){(function(){var c=b,d="div",i="style",j="title",k={zIndex:1e4,position:"fixed",bottom:"0px",width:"100%",height:"15%",fontFamily:"sans-serif",color:"#ccc",backgroundColor:"black"},l={position:"relative",fontFamily:"monospace",overflow:"auto",height:"100%",paddingTop:"5px"},m={height:"5px",marginTop:"-5px",cursor:"n-resize",backgroundColor:"darkgrey"},n={position:"absolute",top:"5px",right:"20px",color:"#111",MozBorderRadius:"4px",webkitBorderRadius:"4px",borderRadius:"4px",cursor:"pointer",fontWeight:"normal",textAlign:"center",padding:"3px 5px",backgroundColor:"#333",fontSize:"12px"},o={minHeight:"16px"},p={fontSize:"12px",margin:"0 8px 0 8px",maxWidth:"100%",whiteSpace:"pre-wrap",overflow:"auto"},q=c.defaultView,r=c.documentElement,s=r[i],t=function(){var a=arguments.length,b,c,d;while(a--){c=arguments[a--];b=arguments[a][i];for(d in c){if(c.hasOwnProperty(d)){b[d]=c[d]}}}},u=function(a,b,c){if(a.addEventListener){a.addEventListener(b,c,e)}else if(a.attachEvent){a.attachEvent("on"+b,c)}return[a,b,c]},v=function(a,b,c){if(a.removeEventListener){a.removeEventListener(b,c,e)}else if(a.detachEvent){a.detachEvent("on"+b,c)}},w=function(a){var b=a.childNodes,c=b.length;while(c--){a.removeChild(b.item(0))}},x=function(a,b){return a.appendChild(b)},y=function(a){return c.createElement(a)},z=function(a){return c.createTextNode(a)},A=a[h]=function(b){var B,C=s.paddingBottom,D=y(d),E=D[i],F=x(D,y(d)),G=x(D,y(d)),H=x(D,y(d)),I=e,J=e,K=e,L=0,M=function(){s.paddingBottom=D.clientHeight+"px"},N=function(a){var b=q.innerHeight,c=F.clientHeight;if(a<0){a=0}else if(a+c>b){a=b-c}E.height=a/b*100+"%";M()},O=[u(c,"mousemove",function(a){if(I){N(q.innerHeight-a.clientY);G.scrollTop=K}}),u(c,"mouseup",function(){if(I){I=K=e}}),u(F,"dblclick",function(a){a.preventDefault();if(J){N(J);J=e}else{J=D.clientHeight;E.height="0px"}}),u(F,"mousedown",function(a){a.preventDefault();I=f;K=G.scrollTop}),u(F,"contextmenu",function(){I=e}),u(H,"click",function(){B()})];B=function(){var b=O.length;while(b--){v.apply(a,O[b])}r.removeChild(D);s.paddingBottom=C;w(G);w(D);a[h]=A};t(D,k,G,l,F,m,H,n);H[j]="Close Log";x(H,z("?"));F[j]="Double-click to toggle log minimization";r.insertBefore(D,r.firstChild);a[h]=function(a){if(L===g){G.removeChild(G.firstChild)}else{L++}var b=x(G,y(d)),c=x(b,y(d));b[j]=(new Date).toLocaleTimeString();t(b,o,c,p);x(c,z(a));G.scrollTop=G.scrollHeight};a[h](b);M()}})()}else if(typeof print===d){a[h]=print}return a}();F.logger=J;F.version="@VERSION@";F.lib={};F.registerLibrary=function(a,b){F.lib[a]=b;if(b.hasOwnProperty("init")){b.init(v)}};F.instances=z;F.getInstanceById=function(a){return z[A[a]]};F.Sketch=function(c){this.attachFunction=c;this.options={pauseOnBlur:false,globalKeyEvents:false};this.onLoad=e;this.onSetup=e;this.onPause=e;this.onLoop=e;this.onFrameStart=e;this.onFrameEnd=e;this.onExit=e;this.params={};this.imageCache={pending:0,images:{},operaCache:{},add:function(c,d){if(this.images[c]){return}if(!h){this.images[c]=null}if(!d){d=new Image;d.onload=function(a){return function(){a.pending--}}(this);this.pending++;d.src=c}this.images[c]=d;if(a.opera){var e=b.createElement("div");e.appendChild(d);e.style.position="absolute";e.style.opacity=0;e.style.width="1px";e.style.height="1px";if(!this.operaCache[c]){b.body.appendChild(e);this.operaCache[c]=e}}}};this.sourceCode=undefined;this.attach=function(a){if(typeof this.attachFunction==="function"){this.attachFunction(a)}else if(this.sourceCode){var b=(new Function("return ("+this.sourceCode+");"))();b(a);this.attachFunction=b}else{throw"Unable to attach sketch to the processing instance"}};this.toString=function(){var a;var b="((function(Sketch) {\n";b+="var sketch = new Sketch(\n"+this.sourceCode+");\n";for(a in this.options){if(this.options.hasOwnProperty(a)){var c=this.options[a];b+="sketch.options."+a+" = "+(typeof c==="string"?'"'+c+'"':""+c)+";\n"}}for(a in this.imageCache){if(this.options.hasOwnProperty(a)){b+='sketch.imageCache.add("'+a+'");\n'}}b+="return sketch;\n})(Processing.Sketch))";return b}};var K=function(c,d){function i(b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){if(d.readyState===4){var b;if(d.status!==200&&d.status!==0){b="Invalid XHR status "+d.status}else if(d.responseText===""){if("withCredentials"in new XMLHttpRequest&&(new XMLHttpRequest).withCredentials===false&&a.location.protocol==="file:"){b="XMLHttpRequest failure, possibly due to a same-origin policy violation. You can try loading this page in another browser, or load it from http://localhost using a local webserver. See the Processing.js README for a more detailed explanation of this problem and solutions."}else{b="File is empty."}}c(d.responseText,b)}};d.open("GET",b,true);if(d.overrideMimeType){d.overrideMimeType("application/json")}d.setRequestHeader("If-Modified-Since","Fri, 01 Jan 1960 00:00:00 GMT");d.send(null)}function j(a,d){function j(b,i){e[a]=b;++h;if(i){f.push(d+" ==> "+i)}if(h===g){if(f.length===0){try{return new F(c,e.join("\n"))}catch(j){throw"Processing.js: Unable to execute pjs sketch: "+j}}else{throw"Processing.js: Unable to load pjs sketch files: "+f.join("\n")}}}if(d.charAt(0)==="#"){var k=b.getElementById(d.substring(1));if(k){j(k.text||k.textContent)}else{j("","Unable to load pjs sketch: element with id '"+d.substring(1)+"' was not found")}return}i(d,j)}var e=[],f=[],g=d.length,h=0;for(var k=0;k<g;++k){j(k,d[k])}};var L=function(){b.removeEventListener("DOMContentLoaded",L,false);z=[];var a=b.getElementsByTagName("canvas"),c;for(var e=0,f=a.length;e<f;e++){var g=a[e].getAttribute("data-processing-sources");if(g===null){g=a[e].getAttribute("data-src");if(g===null){g=a[e].getAttribute("datasrc")}}if(g){c=g.split(/\s+/g);for(var h=0;h<c.length;){if(c[h]){h++}else{c.splice(h,1)}}K(a[e],c)}}var i,j,k,l,m=b.getElementsByTagName("script"),n=[];for(i=m.length-1;i>=0;i--){n.push(m[i])}for(i=0,j=n.length;i<j;i++){var o=n[i];if(!o.getAttribute){continue}var p=o.getAttribute("type");if(p&&(p.toLowerCase()==="text/processing"||p.toLowerCase()==="application/processing")){var q=o.getAttribute("data-processing-target");a=d;if(q){a=b.getElementById(q)}else{var r=o.nextSibling;while(r&&r.nodeType!==1){r=r.nextSibling}if(r&&r.nodeName.toLowerCase()==="canvas"){a=r}}if(a){if(o.getAttribute("src")){c=o.getAttribute("src").split(/\s+/);K(a,c);continue}k=o.textContent||o.text;l=new F(a,k)}}}};F.reload=function(){if(z.length>0){for(var a=z.length-1;a>=0;a--){if(z[a]){z[a].exit()}}}L()};F.loadSketchFromSources=K;F.disableInit=function(){if(h){b.removeEventListener("DOMContentLoaded",L,false)}};if(h){a["Processing"]=F;b.addEventListener("DOMContentLoaded",L,false)}else{this.Processing=F}})(window,window.document,Math)